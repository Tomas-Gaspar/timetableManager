<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Projeto AED: doxygen/liblodepng/lodepng.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Projeto AED
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_4e8d938e9ddb5a617c200d5739d1f41a.html">doxygen</a></li><li class="navelem"><a class="el" href="dir_61aac8a67cc58a3c3d62d7f31b5e8017.html">liblodepng</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">lodepng.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="liblodepng_2lodepng_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">/*</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">LodePNG version 20080927</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment"></span> </div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">Copyright (c) 2005-2008 Lode Vandevenne</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment"></span> </div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment">This software is provided &#39;as-is&#39;, without any express or implied</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">warranty. In no event will the authors be held liable for any damages</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">arising from the use of this software.</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment"></span> </div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">Permission is granted to anyone to use this software for any purpose,</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment">including commercial applications, and to alter it and redistribute it</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">freely, subject to the following restrictions:</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment"></span> </div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment">    1. The origin of this software must not be misrepresented; you must not</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment">    claim that you wrote the original software. If you use this software</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="comment">    in a product, an acknowledgment in the product documentation would be</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="comment">    appreciated but is not required.</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="comment"></span> </div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="comment">    2. Altered source versions must be plainly marked as such, and must not be</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="comment">    misrepresented as being the original software.</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="comment"></span> </div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="comment">    3. This notice may not be removed or altered from any source</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="comment">    distribution.</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="comment">*/</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span> </div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="comment">/*</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="comment">The manual and changelog can be found in the header file &quot;lodepng.h&quot;</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="comment">You are free to name this file lodepng.cpp or lodepng.c depending on your usage.</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="comment">*/</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span> </div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="preprocessor">#include &quot;<a class="code" href="liblodepng_2lodepng_8h.html">lodepng.h</a>&quot;</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span> </div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#ae101a048cc02e184bf38ad2d25650daa">   33</a></span><span class="preprocessor">#define USE_BRUTE_FORCE_ENCODING 1</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span> </div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a698acb89e1bf5837b33c30ef35c30044">   35</a></span><span class="preprocessor">#define VERSION_STRING &quot;20080927&quot;</span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span> </div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span><span class="comment">/* / Tools For C                                                            / */</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span> </div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span><span class="comment">/*</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span><span class="comment">About these tools (vector, uivector, ucvector and string):</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="comment">-LodePNG was originally written in C++. The vectors replace the std::vectors that were used in the C++ version.</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span><span class="comment">-The string tools are made to avoid problems with compilers that declare things like strncat as deprecated.</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span><span class="comment">-They&#39;re not used in the interface, only internally in this file, so all their functions are made static.</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span><span class="comment">*/</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span> </div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><span class="comment">//--------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span> </div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span> </div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span><span class="comment">/*LodePNG_chunk functions: These functions need as input a large enough amount of allocated memory.*/</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span> </div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a577f65d65db51767f90c7b4beba030f5">LodePNG_chunk_length</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* chunk); <span class="comment">/*get the length of the data of the chunk. Total chunk length has 12 bytes more.*/</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span> </div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a8568c3c7e48c2e58919f60ffcbe0d90c">LodePNG_chunk_generate_crc</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* chunk); <span class="comment">/*generates the correct CRC from the data and puts it in the last 4 bytes of the chunk*/</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span> </div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span><span class="comment">/*add chunks to out buffer. It reallocs the buffer to append the data. returns error code*/</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ab2054e40f6c26aed0a0e618035d66190">LodePNG_create_chunk</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>** <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="keywordtype">size_t</span>* outlength, <span class="keywordtype">unsigned</span> length, <span class="keyword">const</span> <span class="keywordtype">char</span>* type, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>); <span class="comment">/*appends new chunk to out. Returns pointer to start of appended chunk, or NULL if error happened; may change memory address of out buffer*/</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span> </div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad45000e15d57d532451035d170b5d455">LodePNG_InfoColor_init</a>(<a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* info);</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a956b1e6db2786d2aca4cca539a8f1a97">LodePNG_InfoColor_cleanup</a>(<a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* info);</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a6d1485ec2eeff62cfae05addb41e7baf">LodePNG_InfoColor_copy</a>(<a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* dest, <span class="keyword">const</span> <a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* source);</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span> </div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span><span class="comment">/*Use these functions instead of allocating palette manually*/</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a56486ddd00ee16b5c21e98b8987b4e16">LodePNG_InfoColor_clearPalette</a>(<a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* info);</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span> </div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span><span class="comment">/*additional color info*/</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a2ff4c2a69c357378cf11dfeca7383b31">LodePNG_InfoColor_getBpp</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* info);      <span class="comment">/*bits per pixel*/</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a1c20c80bee9fe3e28394f231a11fed9b">LodePNG_InfoColor_isGreyscaleType</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* info); <span class="comment">/*is it a greyscale type? (colorType 0 or 4)*/</span></div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#af2722296a74620c6b9761b58ac58881d">LodePNG_InfoColor_isAlphaType</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* info);     <span class="comment">/*has it an alpha channel? (colorType 2 or 6)*/</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span> </div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ab7971f0b72f02afb5ce07151fc59d78d">LodePNG_InfoPng_init</a>(<a class="code hl_struct" href="struct_lode_p_n_g___info_png.html">LodePNG_InfoPng</a>* info);</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a2236a6b7f7bc1c047658a40f24db2658">LodePNG_InfoPng_cleanup</a>(<a class="code hl_struct" href="struct_lode_p_n_g___info_png.html">LodePNG_InfoPng</a>* info);</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aab31a4b50678870f58d9b4fb90570dc6">LodePNG_InfoPng_copy</a>(<a class="code hl_struct" href="struct_lode_p_n_g___info_png.html">LodePNG_InfoPng</a>* dest, <span class="keyword">const</span> <a class="code hl_struct" href="struct_lode_p_n_g___info_png.html">LodePNG_InfoPng</a>* source);</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span> </div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a1aac734c511454ca4d3d05144695d7b4">LodePNG_InfoRaw_init</a>(<a class="code hl_struct" href="struct_lode_p_n_g___info_raw.html">LodePNG_InfoRaw</a>* info);</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa460b4664eff1376c02a8d15ce6843ca">LodePNG_InfoRaw_cleanup</a>(<a class="code hl_struct" href="struct_lode_p_n_g___info_raw.html">LodePNG_InfoRaw</a>* info);</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a7c7a74518cbbfeade8e271556152b683">LodePNG_InfoRaw_copy</a>(<a class="code hl_struct" href="struct_lode_p_n_g___info_raw.html">LodePNG_InfoRaw</a>* dest, <span class="keyword">const</span> <a class="code hl_struct" href="struct_lode_p_n_g___info_raw.html">LodePNG_InfoRaw</a>* source);</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span> </div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span><span class="comment">/*</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span><span class="comment">LodePNG_convert: Converts from any color type to 24-bit or 32-bit (later maybe more supported). return value = LodePNG error code</span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span><span class="comment">The out buffer must have (w * h * bpp + 7) / 8, where bpp is the bits per pixel of the output color type (LodePNG_InfoColor_getBpp)</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span><span class="comment">*/</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aeb70a14a3e3d525bddd824f5aa6bffb8">LodePNG_convert</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* in, <a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* infoOut, <a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* infoIn, <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a>, <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a>);</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span> </div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa3c00d6565b6bf50aa7e68516941da40">LodeZlib_DeflateSettings_init</a>(<a class="code hl_struct" href="struct_lode_zlib___deflate_settings.html">LodeZlib_DeflateSettings</a>* settings);</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span> </div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span><span class="comment">/* LodeFlate &amp; LodeZlib                                                       */</span></div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span> </div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span><span class="comment">/*This function reallocates the out buffer and appends the data.</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span><span class="comment">Either, *out must be NULL and *outsize must be 0, or, *out must be a valid buffer and *outsize its size in bytes.*/</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span><span class="comment">//unsigned LodeZlib_compress(unsigned char** out, size_t* outsize, const unsigned char* in, size_t insize, const LodeZlib_DeflateSettings* settings);</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span> </div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span><span class="comment">//--------------------------------------------------------------------------------------------</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span> </div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_struct" href="structvector.html">vector</a> <span class="comment">/*this one is used only by the deflate compressor*/</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>{</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>  <span class="keywordtype">void</span>* <a class="code hl_variable" href="structvector.html#a5bb4e553d7baae17ad571450ec31fd20">data</a>;</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>  <span class="keywordtype">size_t</span> <a class="code hl_variable" href="structvector.html#a4200005b6949608d6a533db1a0d299c8">size</a>; <span class="comment">/*in groups of bytes depending on type*/</span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>  <span class="keywordtype">size_t</span> <a class="code hl_variable" href="structvector.html#a52795ebc16dc899ccb6c1f9f6238921a">allocsize</a>; <span class="comment">/*in bytes*/</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>  <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="structvector.html#aab0b37e2650659a664f4c993e6309d42">typesize</a>; <span class="comment">/*sizeof the type you store in data*/</span></div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#ac8c5476186a019b60cc8fd4cc6ea41a1">  104</a></span>} <a class="code hl_typedef" href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#ac8c5476186a019b60cc8fd4cc6ea41a1">vector</a>;</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span> </div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#ad70e0171915f500751363be0537b9c76">  106</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad70e0171915f500751363be0537b9c76">vector_resize</a>(<a class="code hl_struct" href="structvector.html">vector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>, <span class="keywordtype">size_t</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>) <span class="comment">/*returns 1 if success, 0 if failure ==&gt; nothing done*/</span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>{</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>  <span class="keywordflow">if</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a> * <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;typesize &gt; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;allocsize)</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>  {</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>    <span class="keywordtype">size_t</span> newsize = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a> * <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;typesize * 2;</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>    <span class="keywordtype">void</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a> = realloc(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;data, newsize);</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>)</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>    {</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>      <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;allocsize = newsize;</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>      <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;data = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>;</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>      <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;size = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>;</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>    }</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    <span class="keywordflow">else</span> <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>  }</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>  <span class="keywordflow">else</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;size = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>;</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>  <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>}</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span> </div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#afc61ae1883ecf63df39e0159cb9e2707">  124</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#afc61ae1883ecf63df39e0159cb9e2707">vector_resized</a>(<a class="code hl_struct" href="structvector.html">vector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>, <span class="keywordtype">size_t</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>, <span class="keywordtype">void</span> dtor(<span class="keywordtype">void</span>*)) <span class="comment">/*resize and use destructor on elements if it gets smaller*/</span></div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>{</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>  <span class="keywordtype">size_t</span> i;</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>  <span class="keywordflow">if</span>(size &lt; p-&gt;<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>) <span class="keywordflow">for</span>(i = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>; i &lt; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;size; i++) dtor(&amp;((<span class="keywordtype">char</span>*)(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;data))[i * <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;typesize]);</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad70e0171915f500751363be0537b9c76">vector_resize</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>);</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>}</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span> </div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#aa6fa04a4423160f5119c6f4e0247556c">  131</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa6fa04a4423160f5119c6f4e0247556c">vector_cleanup</a>(<span class="keywordtype">void</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>)</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>{</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>  ((<a class="code hl_struct" href="structvector.html">vector</a>*)<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>)-&gt;size = ((<a class="code hl_struct" href="structvector.html">vector</a>*)<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>)-&gt;allocsize = 0;</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>  free(((<a class="code hl_struct" href="structvector.html">vector</a>*)<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>)-&gt;<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>);</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>  ((<a class="code hl_struct" href="structvector.html">vector</a>*)<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>)-&gt;data = NULL;</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>}</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span> </div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a07b9ef40ecc9b70aefa3e1bcad7f231f">  138</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a07b9ef40ecc9b70aefa3e1bcad7f231f">vector_cleanupd</a>(<a class="code hl_struct" href="structvector.html">vector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>, <span class="keywordtype">void</span> dtor(<span class="keywordtype">void</span>*)) <span class="comment">/*clear and use destructor on elements*/</span></div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>{</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#afc61ae1883ecf63df39e0159cb9e2707">vector_resized</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>, 0, dtor);</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa6fa04a4423160f5119c6f4e0247556c">vector_cleanup</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>);</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>}</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span> </div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#ad0c66f68896932ea51424b30210432ce">  144</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad0c66f68896932ea51424b30210432ce">vector_init</a>(<a class="code hl_struct" href="structvector.html">vector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>, <span class="keywordtype">unsigned</span> typesize)</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>{</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>  <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;data = NULL;</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>  <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;size = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;allocsize = 0;</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>  <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;typesize = typesize;</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>}</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span> </div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a2cccd3f6527c3d46165ee92b393c89e6">  151</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a2cccd3f6527c3d46165ee92b393c89e6">vector_swap</a>(<a class="code hl_struct" href="structvector.html">vector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>, <a class="code hl_struct" href="structvector.html">vector</a>* q) <span class="comment">/*they&#39;re supposed to have the same typesize*/</span></div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>{</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>  <span class="keywordtype">size_t</span> tmp;</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>  <span class="keywordtype">void</span>* tmpp;</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>  tmp = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;size; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;size = q-&gt;<a class="code hl_variable" href="structvector.html#a4200005b6949608d6a533db1a0d299c8">size</a>; q-&gt;<a class="code hl_variable" href="structvector.html#a4200005b6949608d6a533db1a0d299c8">size</a> = tmp;</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>  tmp = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;allocsize; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;allocsize = q-&gt;<a class="code hl_variable" href="structvector.html#a52795ebc16dc899ccb6c1f9f6238921a">allocsize</a>; q-&gt;<a class="code hl_variable" href="structvector.html#a52795ebc16dc899ccb6c1f9f6238921a">allocsize</a> = tmp;</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>  tmpp = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;data; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;data = q-&gt;<a class="code hl_variable" href="structvector.html#a5bb4e553d7baae17ad571450ec31fd20">data</a>; q-&gt;<a class="code hl_variable" href="structvector.html#a5bb4e553d7baae17ad571450ec31fd20">data</a> = tmpp;</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>}</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span> </div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a657ae1f7880a7e5fc2293e8f46d77983">  160</a></span><span class="keyword">static</span> <span class="keywordtype">void</span>* <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a657ae1f7880a7e5fc2293e8f46d77983">vector_get</a>(<a class="code hl_struct" href="structvector.html">vector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>, <span class="keywordtype">size_t</span> index)</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>{</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>  <span class="keywordflow">return</span> &amp;((<span class="keywordtype">char</span>*)<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;data)[index * <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;typesize];</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>}</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span> </div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span><span class="comment">/* /////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span> </div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_struct" href="structuivector.html">uivector</a></div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>{</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>  <span class="keywordtype">unsigned</span>* <a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>;</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>  <span class="keywordtype">size_t</span> <a class="code hl_variable" href="structuivector.html#aa999025945f0c93d0461192475ae2720">size</a>; <span class="comment">/*size in number of unsigned longs*/</span></div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>  <span class="keywordtype">size_t</span> <a class="code hl_variable" href="structuivector.html#aac0395a9ad397ae7a28219561ab49ffa">allocsize</a>; <span class="comment">/*allocated size in bytes*/</span></div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a7e6939196e23839d48c18dedd705c323">  172</a></span>} <a class="code hl_typedef" href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#a7e6939196e23839d48c18dedd705c323">uivector</a>;</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span> </div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a58616079535e14a89a469632d078d336">  174</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a58616079535e14a89a469632d078d336">uivector_cleanup</a>(<span class="keywordtype">void</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>)</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>{</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>  ((<a class="code hl_struct" href="structuivector.html">uivector</a>*)<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>)-&gt;size = ((<a class="code hl_struct" href="structuivector.html">uivector</a>*)<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>)-&gt;allocsize = 0;</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>  free(((<a class="code hl_struct" href="structuivector.html">uivector</a>*)<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>)-&gt;<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>);</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>  ((<a class="code hl_struct" href="structuivector.html">uivector</a>*)<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>)-&gt;data = NULL;</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>}</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span> </div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a348bbe51fbdd2881e2caabe468611a26">  181</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a348bbe51fbdd2881e2caabe468611a26">uivector_resize</a>(<a class="code hl_struct" href="structuivector.html">uivector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>, <span class="keywordtype">size_t</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>) <span class="comment">/*returns 1 if success, 0 if failure ==&gt; nothing done*/</span></div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>{</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>  <span class="keywordflow">if</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span>) &gt; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;allocsize)</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>  {</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    <span class="keywordtype">size_t</span> newsize = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a> * <span class="keyword">sizeof</span>(unsigned) * 2;</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>    <span class="keywordtype">void</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a> = realloc(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;data, newsize);</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>)</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    {</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>      <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;allocsize = newsize;</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>      <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;data = (<span class="keywordtype">unsigned</span>*)<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>;</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>      <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;size = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>;</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>    }</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    <span class="keywordflow">else</span> <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>  }</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>  <span class="keywordflow">else</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;size = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>;</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>  <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>}</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span> </div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a2ceb381bbb52c2fc72946047b58ea11d">  199</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a2ceb381bbb52c2fc72946047b58ea11d">uivector_resizev</a>(<a class="code hl_struct" href="structuivector.html">uivector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>, <span class="keywordtype">size_t</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>, <span class="keywordtype">unsigned</span> value) <span class="comment">/*resize and give all new elements the value*/</span></div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>{</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>  <span class="keywordtype">size_t</span> oldsize = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;size, i;</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>  <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a348bbe51fbdd2881e2caabe468611a26">uivector_resize</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>)) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>  <span class="keywordflow">for</span>(i = oldsize; i &lt; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>; i++) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;data[i] = value;</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>  <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>}</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span> </div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#aa03164e774d0dea9886ccdbb3f591f49">  207</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa03164e774d0dea9886ccdbb3f591f49">uivector_init</a>(<a class="code hl_struct" href="structuivector.html">uivector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>)</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>{</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>  <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;data = NULL;</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>  <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;size = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;allocsize = 0;</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>}</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span> </div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">  213</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(<a class="code hl_struct" href="structuivector.html">uivector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>, <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>) <span class="comment">/*returns 1 if success, 0 if failure ==&gt; nothing done*/</span></div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>{</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>  <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a348bbe51fbdd2881e2caabe468611a26">uivector_resize</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;size + 1)) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>  <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;data[<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;size - 1] = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>;</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>  <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>}</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span> </div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a4bcc3094b5e09464f3aa13130801a831">  220</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a4bcc3094b5e09464f3aa13130801a831">uivector_copy</a>(<a class="code hl_struct" href="structuivector.html">uivector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>, <span class="keyword">const</span> <a class="code hl_struct" href="structuivector.html">uivector</a>* q) <span class="comment">/*copy q to p, returns 1 if success, 0 if failure ==&gt; nothing done*/</span></div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>{</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>  <span class="keywordtype">size_t</span> i;</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>  <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a348bbe51fbdd2881e2caabe468611a26">uivector_resize</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>, q-&gt;<a class="code hl_variable" href="structuivector.html#aa999025945f0c93d0461192475ae2720">size</a>)) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>  <span class="keywordflow">for</span>(i = 0; i &lt; q-&gt;<a class="code hl_variable" href="structuivector.html#aa999025945f0c93d0461192475ae2720">size</a>; i++) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;data[i] = q-&gt;<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i];</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>  <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>}</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span> </div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a314deb71ac32a18bd09502d2f44936e9">  228</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a314deb71ac32a18bd09502d2f44936e9">uivector_swap</a>(<a class="code hl_struct" href="structuivector.html">uivector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>, <a class="code hl_struct" href="structuivector.html">uivector</a>* q)</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>{</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>  <span class="keywordtype">size_t</span> tmp;</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>  <span class="keywordtype">unsigned</span>* tmpp;</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>  tmp = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;size; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;size = q-&gt;<a class="code hl_variable" href="structuivector.html#aa999025945f0c93d0461192475ae2720">size</a>; q-&gt;<a class="code hl_variable" href="structuivector.html#aa999025945f0c93d0461192475ae2720">size</a> = tmp;</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>  tmp = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;allocsize; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;allocsize = q-&gt;<a class="code hl_variable" href="structuivector.html#aac0395a9ad397ae7a28219561ab49ffa">allocsize</a>; q-&gt;<a class="code hl_variable" href="structuivector.html#aac0395a9ad397ae7a28219561ab49ffa">allocsize</a> = tmp;</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>  tmpp = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;data; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;data = q-&gt;<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>; q-&gt;<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a> = tmpp;</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>}</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span> </div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span><span class="comment">/* /////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span> </div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_struct" href="structucvector.html">ucvector</a></div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>{</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="structucvector.html#a803973058c172963314ff05217b57d60">data</a>;</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>  <span class="keywordtype">size_t</span> <a class="code hl_variable" href="structucvector.html#a27c99c34de0c5b3ca0c242d402c69499">size</a>; <span class="comment">/*used size*/</span></div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>  <span class="keywordtype">size_t</span> <a class="code hl_variable" href="structucvector.html#a235168baac13f0c78bd3e309dc170f90">allocsize</a>; <span class="comment">/*allocated size*/</span></div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a114d783ee4ee8e014094926912e2670d">  244</a></span>} <a class="code hl_typedef" href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#a114d783ee4ee8e014094926912e2670d">ucvector</a>;</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span> </div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#ad689bf84470238e26b01524631d778ec">  246</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad689bf84470238e26b01524631d778ec">ucvector_cleanup</a>(<span class="keywordtype">void</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>)</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>{</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>  ((<a class="code hl_struct" href="structucvector.html">ucvector</a>*)<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>)-&gt;size = ((<a class="code hl_struct" href="structucvector.html">ucvector</a>*)<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>)-&gt;allocsize = 0;</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>  free(((<a class="code hl_struct" href="structucvector.html">ucvector</a>*)<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>)-&gt;<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>);</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>  ((<a class="code hl_struct" href="structucvector.html">ucvector</a>*)<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>)-&gt;data = NULL;</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>}</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span> </div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#ae4e2da90ae4abb858852f211eb28d622">  253</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ae4e2da90ae4abb858852f211eb28d622">ucvector_resize</a>(<a class="code hl_struct" href="structucvector.html">ucvector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>, <span class="keywordtype">size_t</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>) <span class="comment">/*returns 1 if success, 0 if failure ==&gt; nothing done*/</span></div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>{</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>  <span class="keywordflow">if</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a> * <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span>) &gt; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;allocsize)</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>  {</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>    <span class="keywordtype">size_t</span> newsize = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a> * <span class="keyword">sizeof</span>(unsigned) * 2;</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>    <span class="keywordtype">void</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a> = realloc(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;data, newsize);</div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>)</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>    {</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>      <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;allocsize = newsize;</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>      <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;data = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>;</div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>      <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;size = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>;</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>    }</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>    <span class="keywordflow">else</span> <span class="keywordflow">return</span> 0; <span class="comment">/*error: not enough memory*/</span></div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>  }</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>  <span class="keywordflow">else</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;size = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>;</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>  <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>}</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span> </div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span> </div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a1b58c07819eec4ff7e903138c08eb502">  272</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a1b58c07819eec4ff7e903138c08eb502">ucvector_init</a>(<a class="code hl_struct" href="structucvector.html">ucvector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>)</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>{</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>  <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;data = NULL;</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>  <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;size = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;allocsize = 0;</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>}</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span> </div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span><span class="comment">/*you can both convert from vector to buffer&amp;size and vica versa*/</span></div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a965dbd8125f0471f3e0d8206b4c91f22">  279</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a965dbd8125f0471f3e0d8206b4c91f22">ucvector_init_buffer</a>(<a class="code hl_struct" href="structucvector.html">ucvector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* buffer, <span class="keywordtype">size_t</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>)</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>{</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>  <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;data = buffer;</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>  <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;allocsize = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;size = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>;</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>}</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span> </div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">  285</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(<a class="code hl_struct" href="structucvector.html">ucvector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>) <span class="comment">/*returns 1 if success, 0 if failure ==&gt; nothing done*/</span></div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>{</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>  <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ae4e2da90ae4abb858852f211eb28d622">ucvector_resize</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;size + 1)) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>  <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;data[<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>-&gt;size - 1] = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>;</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>  <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>}</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span> </div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span><span class="comment">/* / Reading and writing single bits and bytes from/to stream for Deflate   / */</span></div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span> </div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a4d700260c21794995cbc67d6dd00ce44">  296</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a4d700260c21794995cbc67d6dd00ce44">addBitToStream</a>(<span class="keywordtype">size_t</span>* bitpointer, <a class="code hl_struct" href="structucvector.html">ucvector</a>* bitstream, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> bit)</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>{</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>  <span class="keywordflow">if</span>((*bitpointer) % 8 == 0) <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(bitstream, 0); <span class="comment">/*add a new byte at the end*/</span></div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>  (bitstream-&gt;<a class="code hl_variable" href="structucvector.html#a803973058c172963314ff05217b57d60">data</a>[bitstream-&gt;<a class="code hl_variable" href="structucvector.html#a27c99c34de0c5b3ca0c242d402c69499">size</a> - 1]) |= (bit &lt;&lt; ((*bitpointer) &amp; 0x7)); <span class="comment">/*earlier bit of huffman code is in a lesser significant bit of an earlier byte*/</span></div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>  (*bitpointer)++;</div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>}</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span> </div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#aaee6011b88c8b394ccd9e868b01cafa6">  303</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aaee6011b88c8b394ccd9e868b01cafa6">addBitsToStream</a>(<span class="keywordtype">size_t</span>* bitpointer, <a class="code hl_struct" href="structucvector.html">ucvector</a>* bitstream, <span class="keywordtype">unsigned</span> value, <span class="keywordtype">size_t</span> nbits)</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>{</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>  <span class="keywordtype">size_t</span> i;</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>  <span class="keywordflow">for</span>(i = 0; i &lt; nbits; i++) <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a4d700260c21794995cbc67d6dd00ce44">addBitToStream</a>(bitpointer, bitstream, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)((value &gt;&gt; i) &amp; 1));</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>}</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span> </div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#aef353b91f13641f94a9028ac84fb330c">  309</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aef353b91f13641f94a9028ac84fb330c">addBitsToStreamReversed</a>(<span class="keywordtype">size_t</span>* bitpointer, <a class="code hl_struct" href="structucvector.html">ucvector</a>* bitstream, <span class="keywordtype">unsigned</span> value, <span class="keywordtype">size_t</span> nbits)</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>{</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>  <span class="keywordtype">size_t</span> i;</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>  <span class="keywordflow">for</span>(i = 0; i &lt; nbits; i++) <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a4d700260c21794995cbc67d6dd00ce44">addBitToStream</a>(bitpointer, bitstream, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)((value &gt;&gt; (nbits - 1 - i)) &amp; 1));</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>}</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span> </div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span> </div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span><span class="comment">/* / Deflate - Huffman                                                      / */</span></div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span> </div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#acfb12caea990f92b3aed7c199f615213">  320</a></span><span class="preprocessor">#define FIRST_LENGTH_CODE_INDEX 257</span></div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#adf9597781d7175fdee0b2466e6e462e7">  321</a></span><span class="preprocessor">#define LAST_LENGTH_CODE_INDEX 285</span></div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a58feace6a0d109fc6bb2161504a3011e">  322</a></span><span class="preprocessor">#define NUM_DEFLATE_CODE_SYMBOLS 288 </span><span class="comment">/*256 literals, the end code, some length codes, and 2 unused codes*/</span><span class="preprocessor"></span></div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a5b48becc8f2653ba2bb90858d38fc9ec">  323</a></span><span class="preprocessor">#define NUM_DISTANCE_SYMBOLS 32 </span><span class="comment">/*the distance codes have their own symbols, 30 used, 2 unused*/</span><span class="preprocessor"></span></div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a22ed04d49e008cb4295a8b366c4f2f3b">  324</a></span><span class="preprocessor">#define NUM_CODE_LENGTH_CODES 19 </span><span class="comment">/*the code length codes. 0-15: code lengths, 16: copy previous 3-6 times, 17: 3-10 zeros, 18: 11-138 zeros*/</span><span class="preprocessor"></span></div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span> </div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a6e921f21ce796d21b10a5602708356c9">  326</a></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a6e921f21ce796d21b10a5602708356c9">LENGTHBASE</a>[29] <span class="comment">/*the base lengths represented by codes 257-285*/</span></div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>  = {3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258};</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a36f7494abb7d8fa1ed4c00495ccc69b9">  328</a></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a36f7494abb7d8fa1ed4c00495ccc69b9">LENGTHEXTRA</a>[29] <span class="comment">/*the extra bits used by codes 257-285 (added to base length)*/</span></div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>  = {0, 0, 0, 0, 0, 0, 0,  0,  1,  1,  1,  1,  2,  2,  2,  2,  3,  3,  3,  3,  4,  4,  4,   4,   5,   5,   5,   5,   0};</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#acaf561f0c4e23840e58b49221ed4a39d">  330</a></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#acaf561f0c4e23840e58b49221ed4a39d">DISTANCEBASE</a>[30] <span class="comment">/*the base backwards distances (the bits of distance codes appear after length codes and use their own huffman tree)*/</span></div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>  = {1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577};</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#ae2b6129cf7ecfc3c6bc1c15c0bf2eed0">  332</a></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#ae2b6129cf7ecfc3c6bc1c15c0bf2eed0">DISTANCEEXTRA</a>[30] <span class="comment">/*the extra bits of backwards distances (added to base)*/</span></div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>  = {0, 0, 0, 0, 1, 1, 2,  2,  3,  3,  4,  4,  5,  5,   6,   6,   7,   7,   8,   8,    9,    9,   10,   10,   11,   11,   12,    12,    13,    13};</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a78336e0107c8a22c68a85afe6d7c2af6">  334</a></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a78336e0107c8a22c68a85afe6d7c2af6">CLCL</a>[<a class="code hl_define" href="liblodepng_2lodepng_8cpp.html#a22ed04d49e008cb4295a8b366c4f2f3b">NUM_CODE_LENGTH_CODES</a>] <span class="comment">/*the order in which &quot;code length alphabet code lengths&quot; are stored, out of this the huffman tree of the dynamic huffman tree lengths is generated*/</span></div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>  = {16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15};</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span> </div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span><span class="comment">/* /////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span> </div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span><span class="comment">/*terminology used for the package-merge algorithm and the coin collector&#39;s problem*/</span></div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_struct" href="struct_coin.html">Coin</a> <span class="comment">/*a coin can be multiple coins (when they&#39;re merged)*/</span></div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>{</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>  <a class="code hl_struct" href="structuivector.html">uivector</a> <a class="code hl_variable" href="struct_coin.html#a1d6bc1176bb9fcbd9ca8c781c92ef432">symbols</a>;</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>  <span class="keywordtype">float</span> <a class="code hl_variable" href="struct_coin.html#a0427f9a678a9ce031a254f40f06b3669">weight</a>; <span class="comment">/*the sum of all weights in this coin*/</span></div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a62f97d8b9eda73d358f817e41bee30c2">  344</a></span>} <a class="code hl_typedef" href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#a62f97d8b9eda73d358f817e41bee30c2">Coin</a>;</div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span> </div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#aa132b9bc406016bf1f55268c009502ef">  346</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa132b9bc406016bf1f55268c009502ef">Coin_init</a>(<a class="code hl_struct" href="struct_coin.html">Coin</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>)</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>{</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa03164e774d0dea9886ccdbb3f591f49">uivector_init</a>(&amp;<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>-&gt;symbols);</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>}</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span> </div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a32cdbaf42f584367de1efcf037b7af06">  351</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a32cdbaf42f584367de1efcf037b7af06">Coin_cleanup</a>(<span class="keywordtype">void</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>) <span class="comment">/*void* so that this dtor can be given as function pointer to the vector resize function*/</span></div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>{</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a58616079535e14a89a469632d078d336">uivector_cleanup</a>(&amp;((<a class="code hl_struct" href="struct_coin.html">Coin</a>*)<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>)-&gt;symbols);</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>}</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span> </div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#adf95b6706a8d434cd386d310e50d4db7">  356</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#adf95b6706a8d434cd386d310e50d4db7">Coin_copy</a>(<a class="code hl_struct" href="struct_coin.html">Coin</a>* c1, <span class="keyword">const</span> <a class="code hl_struct" href="struct_coin.html">Coin</a>* c2)</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>{</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>  c1-&gt;<a class="code hl_variable" href="struct_coin.html#a0427f9a678a9ce031a254f40f06b3669">weight</a> = c2-&gt;<a class="code hl_variable" href="struct_coin.html#a0427f9a678a9ce031a254f40f06b3669">weight</a>;</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a4bcc3094b5e09464f3aa13130801a831">uivector_copy</a>(&amp;c1-&gt;<a class="code hl_variable" href="struct_coin.html#a1d6bc1176bb9fcbd9ca8c781c92ef432">symbols</a>, &amp;c2-&gt;<a class="code hl_variable" href="struct_coin.html#a1d6bc1176bb9fcbd9ca8c781c92ef432">symbols</a>);</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>}</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span> </div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#ad4cfbadddc654077c28010b5062ca49e">  362</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad4cfbadddc654077c28010b5062ca49e">addCoins</a>(<a class="code hl_struct" href="struct_coin.html">Coin</a>* c1, <span class="keyword">const</span> <a class="code hl_struct" href="struct_coin.html">Coin</a>* c2)</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>{</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>  <span class="keywordtype">unsigned</span> i;</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>  <span class="keywordflow">for</span>(i = 0; i &lt; c2-&gt;<a class="code hl_variable" href="struct_coin.html#a1d6bc1176bb9fcbd9ca8c781c92ef432">symbols</a>.<a class="code hl_variable" href="structuivector.html#aa999025945f0c93d0461192475ae2720">size</a>; i++) <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(&amp;c1-&gt;<a class="code hl_variable" href="struct_coin.html#a1d6bc1176bb9fcbd9ca8c781c92ef432">symbols</a>, c2-&gt;<a class="code hl_variable" href="struct_coin.html#a1d6bc1176bb9fcbd9ca8c781c92ef432">symbols</a>.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i]);</div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>  c1-&gt;<a class="code hl_variable" href="struct_coin.html#a0427f9a678a9ce031a254f40f06b3669">weight</a> += c2-&gt;<a class="code hl_variable" href="struct_coin.html#a0427f9a678a9ce031a254f40f06b3669">weight</a>;</div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>}</div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span> </div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#aa5fd927979200cad69af4283995db589">  369</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa5fd927979200cad69af4283995db589">Coin_sort</a>(<a class="code hl_struct" href="struct_coin.html">Coin</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>, <span class="keywordtype">size_t</span> amount) <span class="comment">/*combsort*/</span></div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>{</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>  <span class="keywordtype">size_t</span> gap = amount;</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> swapped = 0;</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>  <span class="keywordflow">while</span>(gap &gt; 1 || swapped)</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>  {</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>    <span class="keywordtype">size_t</span> i;</div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>    gap = (gap * 10) / 13; <span class="comment">/*shrink factor 1.3*/</span></div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>    <span class="keywordflow">if</span>(gap == 9 || gap == 10) gap = 11; <span class="comment">/*combsort11*/</span></div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>    <span class="keywordflow">if</span>(gap &lt; 1) gap = 1;</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>    swapped = 0;</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>    <span class="keywordflow">for</span>(i = 0; i &lt; amount - gap; i++)</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>    {</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>      <span class="keywordtype">size_t</span> j = i + gap;</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>      <span class="keywordflow">if</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>[j].<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8128625c9e3fd04c27b82957732d8781">weight</a> &lt; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>[i].<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8128625c9e3fd04c27b82957732d8781">weight</a>)</div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>      {</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>        <span class="keywordtype">float</span> temp = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>[j].weight; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>[j].weight = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>[i].weight; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>[i].weight = temp;</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>        <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a314deb71ac32a18bd09502d2f44936e9">uivector_swap</a>(&amp;<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>[i].symbols, &amp;<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>[j].symbols);</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>        swapped = 1;</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>      }</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>    }</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>  }</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>}</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span> </div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span><span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code hl_struct" href="struct_huffman_tree.html">HuffmanTree</a></div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>{</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>  <a class="code hl_struct" href="structuivector.html">uivector</a> <a class="code hl_variable" href="struct_huffman_tree.html#a24afa4a1079f6ee1c9829b9b5aa5fe89">tree2d</a>;</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>  <a class="code hl_struct" href="structuivector.html">uivector</a> <a class="code hl_variable" href="struct_huffman_tree.html#a0bb5fd80eb9ec029f66cf30641b98363">tree1d</a>;</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>  <a class="code hl_struct" href="structuivector.html">uivector</a> <a class="code hl_variable" href="struct_huffman_tree.html#a293790e0f67d8fdf9df5a2914af39251">lengths</a>; <span class="comment">/*the lengths of the codes of the 1d-tree*/</span></div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>  <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="struct_huffman_tree.html#adf034ca9ce62a4ebfffaaeaba4378a26">maxbitlen</a>; <span class="comment">/*maximum number of bits a single code can get*/</span></div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>  <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="struct_huffman_tree.html#a608df5a24f60d1077a5cde19d5149e1f">numcodes</a>; <span class="comment">/*number of symbols in the alphabet = number of codes*/</span></div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a3bcdfe56aa79c67e8f745020ecd3bbf8">  400</a></span>} <a class="code hl_typedef" href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#a3bcdfe56aa79c67e8f745020ecd3bbf8">HuffmanTree</a>;</div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span> </div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span><span class="comment">/*function used for debug purposes*/</span></div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span><span class="comment">/*#include &lt;iostream&gt;</span></div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span><span class="comment">static void HuffmanTree_draw(HuffmanTree* tree)</span></div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span><span class="comment">{</span></div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span><span class="comment">  std::cout &lt;&lt; &quot;tree. length: &quot; &lt;&lt; tree-&gt;numcodes &lt;&lt; &quot; maxbitlen: &quot; &lt;&lt; tree-&gt;maxbitlen &lt;&lt; std::endl;</span></div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span><span class="comment">  for(size_t i = 0; i &lt; tree-&gt;tree1d.size; i++)</span></div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span><span class="comment">  {</span></div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span><span class="comment">    if(tree-&gt;lengths.data[i])</span></div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span><span class="comment">      std::cout &lt;&lt; i &lt;&lt; &quot; &quot; &lt;&lt; tree-&gt;tree1d.data[i] &lt;&lt; &quot; &quot; &lt;&lt; tree-&gt;lengths.data[i] &lt;&lt; std::endl;</span></div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span><span class="comment">  }</span></div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span><span class="comment">  std::cout &lt;&lt; std::endl;</span></div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span><span class="comment">}*/</span></div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span> </div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a37cb427b175e04defdc48569b76a375c">  415</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a37cb427b175e04defdc48569b76a375c">HuffmanTree_init</a>(<a class="code hl_struct" href="struct_huffman_tree.html">HuffmanTree</a>* tree)</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>{</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa03164e774d0dea9886ccdbb3f591f49">uivector_init</a>(&amp;tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a24afa4a1079f6ee1c9829b9b5aa5fe89">tree2d</a>);</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa03164e774d0dea9886ccdbb3f591f49">uivector_init</a>(&amp;tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a0bb5fd80eb9ec029f66cf30641b98363">tree1d</a>);</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa03164e774d0dea9886ccdbb3f591f49">uivector_init</a>(&amp;tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a293790e0f67d8fdf9df5a2914af39251">lengths</a>);</div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>}</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span> </div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a3228e11a4562c70c9fb78931eb6eb44a">  422</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a3228e11a4562c70c9fb78931eb6eb44a">HuffmanTree_cleanup</a>(<a class="code hl_struct" href="struct_huffman_tree.html">HuffmanTree</a>* tree)</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>{</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a58616079535e14a89a469632d078d336">uivector_cleanup</a>(&amp;tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a24afa4a1079f6ee1c9829b9b5aa5fe89">tree2d</a>);</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a58616079535e14a89a469632d078d336">uivector_cleanup</a>(&amp;tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a0bb5fd80eb9ec029f66cf30641b98363">tree1d</a>);</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a58616079535e14a89a469632d078d336">uivector_cleanup</a>(&amp;tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a293790e0f67d8fdf9df5a2914af39251">lengths</a>);</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>}</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span> </div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span><span class="comment">/*the tree representation used by the decoder. return value is error*/</span></div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#aadc61a27e58bef1cc7722ea172bf58fd">  430</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aadc61a27e58bef1cc7722ea172bf58fd">HuffmanTree_make2DTree</a>(<a class="code hl_struct" href="struct_huffman_tree.html">HuffmanTree</a>* tree)</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>{</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>  <span class="keywordtype">unsigned</span> nodefilled = 0; <span class="comment">/*up to which node it is filled*/</span></div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>  <span class="keywordtype">unsigned</span> treepos = 0; <span class="comment">/*position in the tree (1 of the numcodes columns)*/</span></div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>  <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a>, i;</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span> </div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>  <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a348bbe51fbdd2881e2caabe468611a26">uivector_resize</a>(&amp;tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a24afa4a1079f6ee1c9829b9b5aa5fe89">tree2d</a>, tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a608df5a24f60d1077a5cde19d5149e1f">numcodes</a> * 2)) <span class="keywordflow">return</span> 9901; <span class="comment">/*if failed return not enough memory error*/</span></div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>  <span class="comment">/*convert tree1d[] to tree2d[][]. In the 2D array, a value of 32767 means uninited, a value &gt;= numcodes is an address to another bit, a value &lt; numcodes is a code. The 2 rows are the 2 possible bit values (0 or 1), there are as many columns as codes - 1</span></div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span><span class="comment">  a good huffman tree has N * 2 - 1 nodes, of which N - 1 are internal nodes. Here, the internal nodes are stored (what their 0 and 1 option point to). There is only memory for such good tree currently, if there are more nodes (due to too long length codes), error 55 will happen*/</span></div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>  <span class="keywordflow">for</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a> = 0;  <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a> &lt; tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a608df5a24f60d1077a5cde19d5149e1f">numcodes</a> * 2; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a>++) tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a24afa4a1079f6ee1c9829b9b5aa5fe89">tree2d</a>.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a>] = 32767; <span class="comment">/*32767 here means the tree2d isn&#39;t filled there yet*/</span></div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span> </div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>  <span class="keywordflow">for</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a> = 0; n &lt; tree-&gt;numcodes; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a>++) <span class="comment">/*the codes*/</span></div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>  <span class="keywordflow">for</span>(i = 0; i &lt; tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a293790e0f67d8fdf9df5a2914af39251">lengths</a>.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a>]; i++) <span class="comment">/*the bits for this code*/</span></div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>  {</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> bit = (<span class="keywordtype">unsigned</span> char)((tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a0bb5fd80eb9ec029f66cf30641b98363">tree1d</a>.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a>] &gt;&gt; (tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a293790e0f67d8fdf9df5a2914af39251">lengths</a>.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a>] - i - 1)) &amp; 1);</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>    <span class="keywordflow">if</span>(treepos &gt; tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a608df5a24f60d1077a5cde19d5149e1f">numcodes</a> - 2) <span class="keywordflow">return</span> 55; <span class="comment">/*error 55: oversubscribed; see description in header*/</span></div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>    <span class="keywordflow">if</span>(tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a24afa4a1079f6ee1c9829b9b5aa5fe89">tree2d</a>.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[2 * treepos + bit] == 32767) <span class="comment">/*not yet filled in*/</span></div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>    {</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>      <span class="keywordflow">if</span>(i + 1 == tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a293790e0f67d8fdf9df5a2914af39251">lengths</a>.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a>]) <span class="comment">/*last bit*/</span></div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>      {</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>        tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a24afa4a1079f6ee1c9829b9b5aa5fe89">tree2d</a>.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[2 * treepos + bit] = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a>; <span class="comment">/*put the current code in it*/</span></div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>        treepos = 0;</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>      }</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>      <span class="keywordflow">else</span> <span class="comment">/*put address of the next step in here, first that address has to be found of course (it&#39;s just nodefilled + 1)...*/</span></div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>      {</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>        nodefilled++;</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>        tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a24afa4a1079f6ee1c9829b9b5aa5fe89">tree2d</a>.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[2 * treepos + bit] = nodefilled + tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a608df5a24f60d1077a5cde19d5149e1f">numcodes</a>; <span class="comment">/*addresses encoded with numcodes added to it*/</span></div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>        treepos = nodefilled;</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>      }</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>    }</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>    <span class="keywordflow">else</span> treepos = tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a24afa4a1079f6ee1c9829b9b5aa5fe89">tree2d</a>.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[2 * treepos + bit] - tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a608df5a24f60d1077a5cde19d5149e1f">numcodes</a>;</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>  }</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>  <span class="keywordflow">for</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a> = 0;  <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a> &lt; tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a608df5a24f60d1077a5cde19d5149e1f">numcodes</a> * 2; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a>++) <span class="keywordflow">if</span>(tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a24afa4a1079f6ee1c9829b9b5aa5fe89">tree2d</a>.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a>] == 32767) tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a24afa4a1079f6ee1c9829b9b5aa5fe89">tree2d</a>.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a>] = 0; <span class="comment">/*remove possible remaining 32767&#39;s*/</span></div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span> </div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>}</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span> </div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a6dd288bb82383b61cb04855b6a38680a">  467</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a6dd288bb82383b61cb04855b6a38680a">HuffmanTree_makeFromLengths2</a>(<a class="code hl_struct" href="struct_huffman_tree.html">HuffmanTree</a>* tree) <span class="comment">/*given that numcodes, lengths and maxbitlen are already filled in correctly. return value is error.*/</span></div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>{</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>  <a class="code hl_struct" href="structuivector.html">uivector</a> blcount;</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>  <a class="code hl_struct" href="structuivector.html">uivector</a> nextcode;</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>  <span class="keywordtype">unsigned</span> bits, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a>, error = 0;</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span> </div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa03164e774d0dea9886ccdbb3f591f49">uivector_init</a>(&amp;blcount);</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa03164e774d0dea9886ccdbb3f591f49">uivector_init</a>(&amp;nextcode);</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>  <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a348bbe51fbdd2881e2caabe468611a26">uivector_resize</a>(&amp;tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a0bb5fd80eb9ec029f66cf30641b98363">tree1d</a>, tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a608df5a24f60d1077a5cde19d5149e1f">numcodes</a>)</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>  || !<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a2ceb381bbb52c2fc72946047b58ea11d">uivector_resizev</a>(&amp;blcount, tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#adf034ca9ce62a4ebfffaaeaba4378a26">maxbitlen</a> + 1, 0)</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>  || !<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a2ceb381bbb52c2fc72946047b58ea11d">uivector_resizev</a>(&amp;nextcode, tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#adf034ca9ce62a4ebfffaaeaba4378a26">maxbitlen</a> + 1, 0))</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>    error = 9902;</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span> </div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>  <span class="keywordflow">if</span>(!error)</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>  {</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>    <span class="comment">/*step 1: count number of instances of each code length*/</span></div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>    <span class="keywordflow">for</span>(bits = 0; bits &lt; tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a608df5a24f60d1077a5cde19d5149e1f">numcodes</a>; bits++) blcount.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a293790e0f67d8fdf9df5a2914af39251">lengths</a>.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[bits]]++;</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>    <span class="comment">/*step 2: generate the nextcode values*/</span></div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>    <span class="keywordflow">for</span>(bits = 1; bits &lt;= tree-&gt;maxbitlen; bits++) nextcode.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[bits] = (nextcode.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[bits - 1] + blcount.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[bits - 1]) &lt;&lt; 1;</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>    <span class="comment">/*step 3: generate all the codes*/</span></div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>    <span class="keywordflow">for</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a> = 0; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a> &lt; tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a608df5a24f60d1077a5cde19d5149e1f">numcodes</a>; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a>++) <span class="keywordflow">if</span>(tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a293790e0f67d8fdf9df5a2914af39251">lengths</a>.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a>] != 0) tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a0bb5fd80eb9ec029f66cf30641b98363">tree1d</a>.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a>] = nextcode.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a293790e0f67d8fdf9df5a2914af39251">lengths</a>.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a>]]++;</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>  }</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span> </div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a58616079535e14a89a469632d078d336">uivector_cleanup</a>(&amp;blcount);</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a58616079535e14a89a469632d078d336">uivector_cleanup</a>(&amp;nextcode);</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span> </div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>  <span class="keywordflow">if</span>(!error) <span class="keywordflow">return</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aadc61a27e58bef1cc7722ea172bf58fd">HuffmanTree_make2DTree</a>(tree);</div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>  <span class="keywordflow">else</span> <span class="keywordflow">return</span> error;</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>}</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span> </div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span><span class="comment">/*given the code lengths (as stored in the PNG file), generate the tree as defined by Deflate. maxbitlen is the maximum bits that a code in the tree can have. return value is error.*/</span></div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#aba97231d47c3cb5538a30bb0cd4be7e9">  498</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aba97231d47c3cb5538a30bb0cd4be7e9">HuffmanTree_makeFromLengths</a>(<a class="code hl_struct" href="struct_huffman_tree.html">HuffmanTree</a>* tree, <span class="keyword">const</span> <span class="keywordtype">unsigned</span>* bitlen, <span class="keywordtype">size_t</span> numcodes, <span class="keywordtype">unsigned</span> maxbitlen)</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>{</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>  <span class="keywordtype">unsigned</span> i;</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>  <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a348bbe51fbdd2881e2caabe468611a26">uivector_resize</a>(&amp;tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a293790e0f67d8fdf9df5a2914af39251">lengths</a>, numcodes)) <span class="keywordflow">return</span> 9903;</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>  <span class="keywordflow">for</span>(i = 0; i &lt; numcodes; i++) tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a293790e0f67d8fdf9df5a2914af39251">lengths</a>.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i] = bitlen[i];</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>  tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a608df5a24f60d1077a5cde19d5149e1f">numcodes</a> = (<span class="keywordtype">unsigned</span>)numcodes; <span class="comment">/*number of symbols*/</span></div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>  tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#adf034ca9ce62a4ebfffaaeaba4378a26">maxbitlen</a> = maxbitlen;</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a6dd288bb82383b61cb04855b6a38680a">HuffmanTree_makeFromLengths2</a>(tree);</div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>}</div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span> </div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a0e9475f6ae57e9fb5456af8d80822d48">  508</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a0e9475f6ae57e9fb5456af8d80822d48">HuffmanTree_fillInCoins</a>(<a class="code hl_struct" href="structvector.html">vector</a>* coins, <span class="keyword">const</span> <span class="keywordtype">unsigned</span>* frequencies, <span class="keywordtype">unsigned</span> numcodes, <span class="keywordtype">size_t</span> sum)</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>{</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>  <span class="keywordtype">unsigned</span> i;</div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>  <span class="keywordflow">for</span>(i = 0; i &lt; numcodes; i++)</div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>  {</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>    <a class="code hl_struct" href="struct_coin.html">Coin</a>* coin;</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>    <span class="keywordflow">if</span>(frequencies[i] == 0) <span class="keywordflow">continue</span>; <span class="comment">/*it&#39;s important to exclude symbols that aren&#39;t present*/</span></div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>    <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad70e0171915f500751363be0537b9c76">vector_resize</a>(coins, coins-&gt;<a class="code hl_variable" href="structvector.html#a4200005b6949608d6a533db1a0d299c8">size</a> + 1)) { <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa6fa04a4423160f5119c6f4e0247556c">vector_cleanup</a>(coins); <span class="keywordflow">return</span> 9904; }</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>    coin = (<a class="code hl_struct" href="struct_coin.html">Coin</a>*)(<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a657ae1f7880a7e5fc2293e8f46d77983">vector_get</a>(coins, coins-&gt;<a class="code hl_variable" href="structvector.html#a4200005b6949608d6a533db1a0d299c8">size</a> - 1));</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>    <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa132b9bc406016bf1f55268c009502ef">Coin_init</a>(coin);</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>    coin-&gt;<a class="code hl_variable" href="struct_coin.html#a0427f9a678a9ce031a254f40f06b3669">weight</a> = frequencies[i] / (float)sum;</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>    <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(&amp;coin-&gt;<a class="code hl_variable" href="struct_coin.html#a1d6bc1176bb9fcbd9ca8c781c92ef432">symbols</a>, i);</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>  }</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>  <span class="keywordflow">if</span>(coins-&gt;<a class="code hl_variable" href="structvector.html#a4200005b6949608d6a533db1a0d299c8">size</a>) <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa5fd927979200cad69af4283995db589">Coin_sort</a>((<a class="code hl_struct" href="struct_coin.html">Coin</a>*)coins-&gt;<a class="code hl_variable" href="structvector.html#a5bb4e553d7baae17ad571450ec31fd20">data</a>, coins-&gt;<a class="code hl_variable" href="structvector.html#a4200005b6949608d6a533db1a0d299c8">size</a>);</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>}</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span> </div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a10e6c6183aba33ac05dd184cd0898796">  525</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a10e6c6183aba33ac05dd184cd0898796">HuffmanTree_makeFromFrequencies</a>(<a class="code hl_struct" href="struct_huffman_tree.html">HuffmanTree</a>* tree, <span class="keyword">const</span> <span class="keywordtype">unsigned</span>* frequencies, <span class="keywordtype">size_t</span> numcodes, <span class="keywordtype">unsigned</span> maxbitlen)</div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>{</div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>  <span class="keywordtype">unsigned</span> i, j;</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>  <span class="keywordtype">size_t</span> sum = 0, numpresent = 0;</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>  <span class="keywordtype">unsigned</span> error = 0;</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span> </div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>  <a class="code hl_struct" href="structvector.html">vector</a> prev_row; <span class="comment">/*type Coin, the previous row of coins*/</span></div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>  <a class="code hl_struct" href="structvector.html">vector</a> coins; <span class="comment">/*type Coin, the coins of the currently calculated row*/</span></div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span> </div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>  tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#adf034ca9ce62a4ebfffaaeaba4378a26">maxbitlen</a> = maxbitlen;</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span> </div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>  <span class="keywordflow">for</span>(i = 0; i &lt; numcodes; i++)</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>  {</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>    <span class="keywordflow">if</span>(frequencies[i] &gt; 0)</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>    {</div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>      numpresent++;</div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>      sum += frequencies[i];</div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>    }</div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>  }</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span> </div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>  <span class="keywordflow">if</span>(numcodes == 0) <span class="keywordflow">return</span> 80; <span class="comment">/*error: a tree of 0 symbols is not supposed to be made*/</span></div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>  tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a608df5a24f60d1077a5cde19d5149e1f">numcodes</a> = (unsigned)numcodes; <span class="comment">/*number of symbols*/</span></div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a348bbe51fbdd2881e2caabe468611a26">uivector_resize</a>(&amp;tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a293790e0f67d8fdf9df5a2914af39251">lengths</a>, 0)) <span class="keywordflow">return</span> 9955;</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>  <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a2ceb381bbb52c2fc72946047b58ea11d">uivector_resizev</a>(&amp;tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a293790e0f67d8fdf9df5a2914af39251">lengths</a>, tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a608df5a24f60d1077a5cde19d5149e1f">numcodes</a>, 0)) <span class="keywordflow">return</span> 9905;</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span> </div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>  <span class="keywordflow">if</span>(numpresent == 0) <span class="comment">/*there are no symbols at all, in that case add one symbol of value 0 to the tree (see RFC 1951 section 3.2.7) */</span></div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>  {</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>    tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a293790e0f67d8fdf9df5a2914af39251">lengths</a>.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[0] = 1;</div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a6dd288bb82383b61cb04855b6a38680a">HuffmanTree_makeFromLengths2</a>(tree);</div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>  }</div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(numpresent == 1) <span class="comment">/*the package merge algorithm gives wrong results if there&#39;s only one symbol (theoretically 0 bits would then suffice, but we need a proper symbol for zlib)*/</span></div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>  {</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>    <span class="keywordflow">for</span>(i = 0; i &lt; numcodes; i++) <span class="keywordflow">if</span>(frequencies[i]) tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a293790e0f67d8fdf9df5a2914af39251">lengths</a>.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i] = 1;</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a6dd288bb82383b61cb04855b6a38680a">HuffmanTree_makeFromLengths2</a>(tree);</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>  }</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span> </div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad0c66f68896932ea51424b30210432ce">vector_init</a>(&amp;coins, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="struct_coin.html">Coin</a>));</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad0c66f68896932ea51424b30210432ce">vector_init</a>(&amp;prev_row, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="struct_coin.html">Coin</a>));</div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span> </div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>  <span class="comment">/*Package-Merge algorithm represented by coin collector&#39;s problem</span></div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span><span class="comment">  For every symbol, maxbitlen coins will be created*/</span></div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span> </div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>  <span class="comment">/*first row, lowest denominator*/</span></div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>  error = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a0e9475f6ae57e9fb5456af8d80822d48">HuffmanTree_fillInCoins</a>(&amp;coins, frequencies, tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a608df5a24f60d1077a5cde19d5149e1f">numcodes</a>, sum);</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>  <span class="keywordflow">if</span>(!error)</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>  {</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>    <span class="keywordflow">for</span>(j = 1; j &lt;= maxbitlen &amp;&amp; !error; j++) <span class="comment">/*each of the remaining rows*/</span></div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>    {</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>      <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a2cccd3f6527c3d46165ee92b393c89e6">vector_swap</a>(&amp;coins, &amp;prev_row); <span class="comment">/*swap instead of copying*/</span></div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>      <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#afc61ae1883ecf63df39e0159cb9e2707">vector_resized</a>(&amp;coins, 0, <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a32cdbaf42f584367de1efcf037b7af06">Coin_cleanup</a>)) { error = 9906; <span class="keywordflow">break</span>; }</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span> </div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>      <span class="keywordflow">for</span>(i = 0; i + 1 &lt; prev_row.<a class="code hl_variable" href="structvector.html#a4200005b6949608d6a533db1a0d299c8">size</a>; i += 2)</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>      {</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>        <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad70e0171915f500751363be0537b9c76">vector_resize</a>(&amp;coins, coins.<a class="code hl_variable" href="structvector.html#a4200005b6949608d6a533db1a0d299c8">size</a> + 1)) { error = 9907; <span class="keywordflow">break</span>; }</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span>        <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa132b9bc406016bf1f55268c009502ef">Coin_init</a>((<a class="code hl_struct" href="struct_coin.html">Coin</a>*)<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a657ae1f7880a7e5fc2293e8f46d77983">vector_get</a>(&amp;coins, coins.<a class="code hl_variable" href="structvector.html#a4200005b6949608d6a533db1a0d299c8">size</a> - 1));</div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>        <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#adf95b6706a8d434cd386d310e50d4db7">Coin_copy</a>((<a class="code hl_struct" href="struct_coin.html">Coin</a>*)<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a657ae1f7880a7e5fc2293e8f46d77983">vector_get</a>(&amp;coins, coins.<a class="code hl_variable" href="structvector.html#a4200005b6949608d6a533db1a0d299c8">size</a> - 1), (<a class="code hl_struct" href="struct_coin.html">Coin</a>*)<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a657ae1f7880a7e5fc2293e8f46d77983">vector_get</a>(&amp;prev_row, i));</div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>        <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad4cfbadddc654077c28010b5062ca49e">addCoins</a>((<a class="code hl_struct" href="struct_coin.html">Coin</a>*)<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a657ae1f7880a7e5fc2293e8f46d77983">vector_get</a>(&amp;coins, coins.<a class="code hl_variable" href="structvector.html#a4200005b6949608d6a533db1a0d299c8">size</a> - 1), (<a class="code hl_struct" href="struct_coin.html">Coin</a>*)<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a657ae1f7880a7e5fc2293e8f46d77983">vector_get</a>(&amp;prev_row, i + 1)); <span class="comment">/*merge the coins into packages*/</span></div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>      }</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>      <span class="keywordflow">if</span>(j &lt; maxbitlen)</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>      {</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>        error = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a0e9475f6ae57e9fb5456af8d80822d48">HuffmanTree_fillInCoins</a>(&amp;coins, frequencies, tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a608df5a24f60d1077a5cde19d5149e1f">numcodes</a>, sum);</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>      }</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>    }</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>  }</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span> </div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>  <span class="keywordflow">if</span>(!error)</div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>  {</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>    <span class="comment">/*keep the coins with lowest weight, so that they add up to the amount of symbols - 1*/</span></div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>    <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#afc61ae1883ecf63df39e0159cb9e2707">vector_resized</a>(&amp;coins, numpresent - 1, <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a32cdbaf42f584367de1efcf037b7af06">Coin_cleanup</a>);</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span> </div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>    <span class="comment">/*calculate the lengths of each symbol, as the amount of times a coin of each symbol is used*/</span></div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>    <span class="keywordflow">for</span>(i = 0; i &lt; coins.<a class="code hl_variable" href="structvector.html#a4200005b6949608d6a533db1a0d299c8">size</a>; i++)</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>    {</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>      <a class="code hl_struct" href="struct_coin.html">Coin</a>* coin = (<a class="code hl_struct" href="struct_coin.html">Coin</a>*)<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a657ae1f7880a7e5fc2293e8f46d77983">vector_get</a>(&amp;coins, i);</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>      <span class="keywordflow">for</span>(j = 0; j &lt; coin-&gt;<a class="code hl_variable" href="struct_coin.html#a1d6bc1176bb9fcbd9ca8c781c92ef432">symbols</a>.<a class="code hl_variable" href="structuivector.html#aa999025945f0c93d0461192475ae2720">size</a>; j++) tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a293790e0f67d8fdf9df5a2914af39251">lengths</a>.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[coin-&gt;<a class="code hl_variable" href="struct_coin.html#a1d6bc1176bb9fcbd9ca8c781c92ef432">symbols</a>.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[j]]++;</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>    }</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span> </div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>    error = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a6dd288bb82383b61cb04855b6a38680a">HuffmanTree_makeFromLengths2</a>(tree);</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>  }</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span> </div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a07b9ef40ecc9b70aefa3e1bcad7f231f">vector_cleanupd</a>(&amp;coins, <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a32cdbaf42f584367de1efcf037b7af06">Coin_cleanup</a>);</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a07b9ef40ecc9b70aefa3e1bcad7f231f">vector_cleanupd</a>(&amp;prev_row, <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a32cdbaf42f584367de1efcf037b7af06">Coin_cleanup</a>);</div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span> </div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>  <span class="keywordflow">return</span> error;</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>}</div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span> </div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a4a219535105aecc94ba9d4bccfbb66b8">  611</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a4a219535105aecc94ba9d4bccfbb66b8">HuffmanTree_getCode</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_huffman_tree.html">HuffmanTree</a>* tree, <span class="keywordtype">unsigned</span> index) { <span class="keywordflow">return</span> tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a0bb5fd80eb9ec029f66cf30641b98363">tree1d</a>.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[index]; }</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a0b12e062127bf0b511165c7a14ca9a87">  612</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a0b12e062127bf0b511165c7a14ca9a87">HuffmanTree_getLength</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_huffman_tree.html">HuffmanTree</a>* tree, <span class="keywordtype">unsigned</span> index) { <span class="keywordflow">return</span> tree-&gt;<a class="code hl_variable" href="struct_huffman_tree.html#a293790e0f67d8fdf9df5a2914af39251">lengths</a>.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[index]; }</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span> </div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span><span class="comment">/*get the tree of a deflated block with fixed tree, as specified in the deflate specification*/</span></div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a1e940c5656ead8ab9309511b00467eb1">  615</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a1e940c5656ead8ab9309511b00467eb1">generateFixedTree</a>(<a class="code hl_struct" href="struct_huffman_tree.html">HuffmanTree</a>* tree)</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>{</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>  <span class="keywordtype">unsigned</span> i, error = 0;</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>  <a class="code hl_struct" href="structuivector.html">uivector</a> bitlen;</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa03164e774d0dea9886ccdbb3f591f49">uivector_init</a>(&amp;bitlen);</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>  <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a348bbe51fbdd2881e2caabe468611a26">uivector_resize</a>(&amp;bitlen, <a class="code hl_define" href="liblodepng_2lodepng_8cpp.html#a58feace6a0d109fc6bb2161504a3011e">NUM_DEFLATE_CODE_SYMBOLS</a>)) error = 9909;</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span> </div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>  <span class="keywordflow">if</span>(!error)</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>  {</div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>    <span class="comment">/*288 possible codes: 0-255=literals, 256=endcode, 257-285=lengthcodes, 286-287=unused*/</span></div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>    <span class="keywordflow">for</span>(i =   0; i &lt;= 143; i++) bitlen.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i] = 8;</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>    <span class="keywordflow">for</span>(i = 144; i &lt;= 255; i++) bitlen.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i] = 9;</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>    <span class="keywordflow">for</span>(i = 256; i &lt;= 279; i++) bitlen.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i] = 7;</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>    <span class="keywordflow">for</span>(i = 280; i &lt;= 287; i++) bitlen.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i] = 8;</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span> </div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>    error = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aba97231d47c3cb5538a30bb0cd4be7e9">HuffmanTree_makeFromLengths</a>(tree, bitlen.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>, <a class="code hl_define" href="liblodepng_2lodepng_8cpp.html#a58feace6a0d109fc6bb2161504a3011e">NUM_DEFLATE_CODE_SYMBOLS</a>, 15);</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>  }</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span> </div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a58616079535e14a89a469632d078d336">uivector_cleanup</a>(&amp;bitlen);</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>  <span class="keywordflow">return</span> error;</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>}</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span> </div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a78e71630babf8893f976287a9a8aa65b">  637</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a78e71630babf8893f976287a9a8aa65b">generateDistanceTree</a>(<a class="code hl_struct" href="struct_huffman_tree.html">HuffmanTree</a>* tree)</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>{</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>  <span class="keywordtype">unsigned</span> i, error = 0;</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>  <a class="code hl_struct" href="structuivector.html">uivector</a> bitlen;</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa03164e774d0dea9886ccdbb3f591f49">uivector_init</a>(&amp;bitlen);</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>  <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a348bbe51fbdd2881e2caabe468611a26">uivector_resize</a>(&amp;bitlen, <a class="code hl_define" href="liblodepng_2lodepng_8cpp.html#a5b48becc8f2653ba2bb90858d38fc9ec">NUM_DISTANCE_SYMBOLS</a>)) error = 9910;</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span> </div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>  <span class="comment">/*there are 32 distance codes, but 30-31 are unused*/</span></div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>  <span class="keywordflow">if</span>(!error)</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>  {</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>    <span class="keywordflow">for</span>(i = 0; i &lt; <a class="code hl_define" href="liblodepng_2lodepng_8cpp.html#a5b48becc8f2653ba2bb90858d38fc9ec">NUM_DISTANCE_SYMBOLS</a>; i++) bitlen.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i] = 5;</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>    error = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aba97231d47c3cb5538a30bb0cd4be7e9">HuffmanTree_makeFromLengths</a>(tree, bitlen.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>, <a class="code hl_define" href="liblodepng_2lodepng_8cpp.html#a5b48becc8f2653ba2bb90858d38fc9ec">NUM_DISTANCE_SYMBOLS</a>, 15);</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>  }</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a58616079535e14a89a469632d078d336">uivector_cleanup</a>(&amp;bitlen);</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>  <span class="keywordflow">return</span> error;</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>}</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span> </div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span><span class="comment">/* / Deflator                                                               / */</span></div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span> </div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a2a7f7638619c00f79a4be22bcf5fadba">  658</a></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a2a7f7638619c00f79a4be22bcf5fadba">MAX_SUPPORTED_DEFLATE_LENGTH</a> = 258;</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span> </div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span><span class="comment">/*bitlen is the size in bits of the code*/</span></div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a8220b4fba74162202ac5294bde504252">  661</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a8220b4fba74162202ac5294bde504252">addHuffmanSymbol</a>(<span class="keywordtype">size_t</span>* bp, <a class="code hl_struct" href="structucvector.html">ucvector</a>* compressed, <span class="keywordtype">unsigned</span> code, <span class="keywordtype">unsigned</span> bitlen)</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>{</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aef353b91f13641f94a9028ac84fb330c">addBitsToStreamReversed</a>(bp, compressed, code, bitlen);</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>}</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span> </div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span><span class="comment">/*search the index in the array, that has the largest value smaller than or equal to the given value, given array must be sorted (if no value is smaller, it returns the size of the given array)*/</span></div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a1be657e325355087ebe176d187d2c0a5">  667</a></span><span class="keyword">static</span> <span class="keywordtype">size_t</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a1be657e325355087ebe176d187d2c0a5">searchCodeIndex</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span>* array, <span class="keywordtype">size_t</span> array_size, <span class="keywordtype">size_t</span> value)</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>{</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>  <span class="comment">/*linear search implementation*/</span></div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>  <span class="comment">/*for(size_t i = 1; i &lt; array_size; i++) if(array[i] &gt; value) return i - 1;</span></div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span><span class="comment">  return array_size - 1;*/</span></div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span> </div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>  <span class="comment">/*binary search implementation (not that much faster) (precondition: array_size &gt; 0)*/</span></div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>  <span class="keywordtype">size_t</span> left  = 1;</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>  <span class="keywordtype">size_t</span> right = array_size - 1;</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span>  <span class="keywordflow">while</span>(left &lt;= right)</div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>  {</div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>    <span class="keywordtype">size_t</span> mid = (left + right) / 2;</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>    <span class="keywordflow">if</span>(array[mid] &lt;= value) left = mid + 1; <span class="comment">/*the value to find is more to the right*/</span></div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(array[mid - 1] &gt; value) right = mid - 1; <span class="comment">/*the value to find is more to the left*/</span></div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>    <span class="keywordflow">else</span> <span class="keywordflow">return</span> mid - 1;</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>  }</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>  <span class="keywordflow">return</span> array_size - 1;</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>}</div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span> </div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#aad409090a7949e79b1db4c3a34431712">  686</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aad409090a7949e79b1db4c3a34431712">addLengthDistance</a>(<a class="code hl_struct" href="structuivector.html">uivector</a>* values, <span class="keywordtype">size_t</span> length, <span class="keywordtype">size_t</span> distance)</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>{</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>  <span class="comment">/*values in encoded vector are those used by deflate:</span></div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span><span class="comment">  0-255: literal bytes</span></div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span><span class="comment">  256: end</span></div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span><span class="comment">  257-285: length/distance pair (length code, followed by extra length bits, distance code, extra distance bits)</span></div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span><span class="comment">  286-287: invalid*/</span></div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span> </div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>  <span class="keywordtype">unsigned</span> length_code = (unsigned)<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a1be657e325355087ebe176d187d2c0a5">searchCodeIndex</a>(<a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a6e921f21ce796d21b10a5602708356c9">LENGTHBASE</a>, 29, length);</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>  <span class="keywordtype">unsigned</span> extra_length = (unsigned)(length - <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a6e921f21ce796d21b10a5602708356c9">LENGTHBASE</a>[length_code]);</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>  <span class="keywordtype">unsigned</span> dist_code = (unsigned)<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a1be657e325355087ebe176d187d2c0a5">searchCodeIndex</a>(<a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#acaf561f0c4e23840e58b49221ed4a39d">DISTANCEBASE</a>, 30, distance);</div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>  <span class="keywordtype">unsigned</span> extra_distance = (unsigned)(distance - <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#acaf561f0c4e23840e58b49221ed4a39d">DISTANCEBASE</a>[dist_code]);</div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span> </div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(values, length_code + <a class="code hl_define" href="liblodepng_2lodepng_8cpp.html#acfb12caea990f92b3aed7c199f615213">FIRST_LENGTH_CODE_INDEX</a>);</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(values, extra_length);</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(values, dist_code);</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(values, extra_distance);</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>}</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span> </div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span><span class="preprocessor">#if USE_BRUTE_FORCE_ENCODING</span></div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a96367b6d4f2b41539c3584448dea5a80">  706</a></span><span class="preprocessor">#define encodeLZ77 encodeLZ77_brute</span></div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span><span class="comment">/*the &quot;brute force&quot; version of the encodeLZ7 algorithm, not used anymore, kept here for reference*/</span></div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#abffce52f6c998970053d50ea867e4277">  708</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#abffce52f6c998970053d50ea867e4277">encodeLZ77_brute</a>(<a class="code hl_struct" href="structuivector.html">uivector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* in, <span class="keywordtype">size_t</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>, <span class="keywordtype">unsigned</span> windowSize)</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>{</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>  <span class="keywordtype">size_t</span> pos;</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>  <span class="comment">/*using pointer instead of vector for input makes it faster when NOT using optimization when compiling; no influence if optimization is used*/</span></div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>  <span class="keywordflow">for</span>(pos = 0; pos &lt; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>; pos++)</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>  {</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>    <span class="comment">/*Phase 1: doxygen images often have long runs of the same color, try to find them*/</span></div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>    <span class="keyword">const</span> <span class="keywordtype">int</span> minLength = 4; <span class="comment">// Minimum length for a run to make sense</span></div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span> </div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>    <span class="keywordflow">if</span>(pos &lt; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a> - minLength * 4)</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>    {</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>      <span class="keywordtype">size_t</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>, fp;</div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>      <span class="keywordtype">size_t</span> current_length;</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span> </div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>      <span class="comment">/*RGBA pixel run?*/</span></div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>      <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>  = pos;</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>      fp = pos + 4;</div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>      current_length = 0;</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span> </div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>      <span class="keywordflow">while</span>(fp &lt; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a> &amp;&amp; in[<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>] == in[fp] &amp;&amp; current_length &lt; <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a2a7f7638619c00f79a4be22bcf5fadba">MAX_SUPPORTED_DEFLATE_LENGTH</a>)</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>      {</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>        ++<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>;</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>        ++fp;</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>        ++current_length;</div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>      }</div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span> </div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>      <span class="keywordflow">if</span> (current_length &gt; (minLength - 1 ) * 4) <span class="comment">/*worth using?*/</span></div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>      {</div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>        <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, in[pos    ]);</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>        <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, in[pos + 1]);</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>        <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, in[pos + 2]);</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>        <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, in[pos + 3]);</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>        <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aad409090a7949e79b1db4c3a34431712">addLengthDistance</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, current_length, 4);</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span> </div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>        pos += current_length + 4 - 1; <span class="comment">/*-1 for loop&#39;s pos++*/</span></div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>      }</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span> </div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>      <span class="comment">/*RGB pixel run?*/</span></div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>      <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>  = pos;</div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>      fp = pos + 3;</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>      current_length = 0;</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span> </div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>      <span class="keywordflow">while</span>(fp &lt; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a> &amp;&amp; in[<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>] == in[fp] &amp;&amp; current_length &lt; <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a2a7f7638619c00f79a4be22bcf5fadba">MAX_SUPPORTED_DEFLATE_LENGTH</a>)</div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>      {</div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>        ++<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>;</div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>        ++fp;</div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>        ++current_length;</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>      }</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span> </div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>      <span class="keywordflow">if</span> (current_length &gt; (minLength - 1 ) * 3) <span class="comment">/*worth using?*/</span></div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>      {</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>        <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, in[pos    ]);</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>        <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, in[pos + 1]);</div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>        <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, in[pos + 2]);</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>        <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aad409090a7949e79b1db4c3a34431712">addLengthDistance</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, current_length, 3);</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span> </div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>        pos += current_length + 3 - 1; <span class="comment">/*-1 for loop&#39;s pos++*/</span></div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>        <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>      }</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>    }</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span> </div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>    <span class="keywordtype">size_t</span> length = 0, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ae8293bdb39668d0bafde58b6c1d836f0">offset</a> = 0; <span class="comment">/*the length and offset found for the current position*/</span></div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>    <span class="keywordtype">size_t</span> max_offset = pos &lt; windowSize ? pos : windowSize; <span class="comment">/*how far back to test*/</span></div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>    <span class="keywordtype">size_t</span> current_offset;</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span> </div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>    <span class="keywordflow">for</span>(current_offset = 1; current_offset &lt; max_offset; current_offset++) <span class="comment">/*search backwards through all possible distances (=offsets)*/</span></div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>    {</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>      <span class="keywordtype">size_t</span> backpos = pos - current_offset;</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>      <span class="keywordflow">if</span>(in[backpos] == in[pos])</div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>      {</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>        <span class="comment">/*test the next characters*/</span></div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>        <span class="keywordtype">size_t</span> current_length = 1;</div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>        <span class="keywordtype">size_t</span> backtest = backpos + 1;</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>        <span class="keywordtype">size_t</span> foretest = pos + 1;</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>        <span class="keywordflow">while</span>(foretest &lt; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a> &amp;&amp; in[backtest] == in[foretest] &amp;&amp; current_length &lt; <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a2a7f7638619c00f79a4be22bcf5fadba">MAX_SUPPORTED_DEFLATE_LENGTH</a>) <span class="comment">/*maximum support length by deflate is max length*/</span></div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>        {</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>          <span class="keywordflow">if</span>(backpos &gt;= pos) backpos -= current_offset; <span class="comment">/*continue as if we work on the decoded bytes after pos by jumping back before pos*/</span></div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>          current_length++;</div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>          backtest++;</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>          foretest++;</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>        }</div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>        <span class="keywordflow">if</span>(current_length &gt; length)</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>        {</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>          length = current_length; <span class="comment">/*the longest length*/</span></div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>          <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ae8293bdb39668d0bafde58b6c1d836f0">offset</a> = current_offset; <span class="comment">/*the offset that is related to this longest length*/</span></div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>          <span class="keywordflow">if</span>(current_length == <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a2a7f7638619c00f79a4be22bcf5fadba">MAX_SUPPORTED_DEFLATE_LENGTH</a>) <span class="keywordflow">break</span>; <span class="comment">/*you can jump out of this for loop once a length of max length is found (gives significant speed gain)*/</span></div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>        }</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>      }</div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>    }</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span> </div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>    <span class="keywordflow">if</span>(length &lt; 3) <span class="comment">/*only lengths of 3 or higher are supported as length/distance pair*/</span></div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>    {</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>      <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, in[pos]);</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>    }</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>    {</div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>      <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aad409090a7949e79b1db4c3a34431712">addLengthDistance</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, length, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ae8293bdb39668d0bafde58b6c1d836f0">offset</a>);</div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>      pos += (length - 1);</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>    }</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>  } <span class="comment">/*end of the loop through each character of input*/</span></div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span> </div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>}</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span> </div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span><span class="comment">/*</span></div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span><span class="comment">static const unsigned HASH_NUM_VALUES = 65536;</span></div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span><span class="comment">static const unsigned HASH_NUM_CHARACTERS = 6;</span></div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span><span class="comment">static const unsigned HASH_SHIFT = 2;</span></div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span><span class="comment">Good and fast values: HASH_NUM_VALUES=65536, HASH_NUM_CHARACTERS=6, HASH_SHIFT=2</span></div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span><span class="comment">making HASH_NUM_CHARACTERS larger (like 8), makes the file size larger but is a bit faster</span></div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span><span class="comment">making HASH_NUM_CHARACTERS smaller (like 3), makes the file size smaller but is slower</span></div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span><span class="comment">*/</span></div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span> </div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span><span class="preprocessor">#if !defined(USE_BRUTE_FORCE_ENCODING)</span></div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> getHash(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>, <span class="keywordtype">size_t</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>, <span class="keywordtype">size_t</span> pos)</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>{</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>  <span class="keywordtype">unsigned</span> result = 0;</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>  <span class="keywordtype">size_t</span> amount, i;</div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>  <span class="keywordflow">if</span>(pos &gt;= <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>  amount = HASH_NUM_CHARACTERS; <span class="keywordflow">if</span>(pos + amount &gt;= <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>) amount = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a> - pos;</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>  <span class="keywordflow">for</span>(i = 0; i &lt; amount; i++) result ^= (<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>[pos + i] &lt;&lt; (i * HASH_SHIFT));</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>  <span class="keywordflow">return</span> result % HASH_NUM_VALUES;</div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>}</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span> </div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span><span class="comment">/*LZ77-encode the data using a hash table technique to let it encode faster. Return value is error code*/</span></div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_define" href="liblodepng_2lodepng_8cpp.html#a96367b6d4f2b41539c3584448dea5a80">encodeLZ77</a>(<a class="code hl_struct" href="structuivector.html">uivector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* in, <span class="keywordtype">size_t</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>, <span class="keywordtype">unsigned</span> windowSize)</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>{</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>  <a class="code hl_struct" href="structvector.html">vector</a> table; <span class="comment">/*HASH_NUM_VALUES uivectors; this represents what would be an std::vector&lt;std::vector&lt;unsigned&gt; &gt; in C++*/</span></div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>  <a class="code hl_struct" href="structuivector.html">uivector</a> tablepos1, tablepos2;</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>  <span class="keywordtype">unsigned</span> pos, i, error = 0;</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span> </div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad0c66f68896932ea51424b30210432ce">vector_init</a>(&amp;table, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structuivector.html">uivector</a>));</div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>  <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad70e0171915f500751363be0537b9c76">vector_resize</a>(&amp;table, HASH_NUM_VALUES)) <span class="keywordflow">return</span> 9917;</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>  <span class="keywordflow">for</span>(i = 0; i &lt; HASH_NUM_VALUES; i++)</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>  {</div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>    <a class="code hl_struct" href="structuivector.html">uivector</a>* v = (<a class="code hl_struct" href="structuivector.html">uivector</a>*)<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a657ae1f7880a7e5fc2293e8f46d77983">vector_get</a>(&amp;table, i);</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>    <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa03164e774d0dea9886ccdbb3f591f49">uivector_init</a>(v);</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>  }</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span> </div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>  <span class="comment">/*remember start and end positions in the tables to searching in*/</span></div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa03164e774d0dea9886ccdbb3f591f49">uivector_init</a>(&amp;tablepos1);</div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa03164e774d0dea9886ccdbb3f591f49">uivector_init</a>(&amp;tablepos2);</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>  <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a2ceb381bbb52c2fc72946047b58ea11d">uivector_resizev</a>(&amp;tablepos1, HASH_NUM_VALUES, 0)) error = 9918;</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>  <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a2ceb381bbb52c2fc72946047b58ea11d">uivector_resizev</a>(&amp;tablepos2, HASH_NUM_VALUES, 0)) error = 9919;</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span> </div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>  <span class="keywordflow">if</span>(!error)</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>  {</div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>    <span class="keywordflow">for</span>(pos = 0; pos &lt; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>; pos++)</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>    {</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>      <span class="keywordtype">unsigned</span> length = 0, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ae8293bdb39668d0bafde58b6c1d836f0">offset</a> = 0; <span class="comment">/*the length and offset found for the current position*/</span></div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>      <span class="keywordtype">unsigned</span> max_offset = pos &lt; windowSize ? pos : windowSize; <span class="comment">/*how far back to test*/</span></div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>      <span class="keywordtype">unsigned</span> tablepos;</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span> </div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>      <span class="comment">/*/search for the longest string*/</span></div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>      <span class="comment">/*first find out where in the table to start (the first value that is in the range from &quot;pos - max_offset&quot; to &quot;pos&quot;)*/</span></div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>      <span class="keywordtype">unsigned</span> hash = getHash(in, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>, pos);</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>      <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>((<a class="code hl_struct" href="structuivector.html">uivector</a>*)<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a657ae1f7880a7e5fc2293e8f46d77983">vector_get</a>(&amp;table, hash), pos))  { error = 9920; <span class="keywordflow">break</span>; }</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span> </div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>      <span class="keywordflow">while</span>(((<a class="code hl_struct" href="structuivector.html">uivector</a>*)<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a657ae1f7880a7e5fc2293e8f46d77983">vector_get</a>(&amp;table, hash))-&gt;<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>[tablepos1.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[hash]] &lt; pos - max_offset) tablepos1.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[hash]++; <span class="comment">/*it now points to the first value in the table for which the index is larger than or equal to pos - max_offset*/</span></div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>      <span class="keywordflow">while</span>(((<a class="code hl_struct" href="structuivector.html">uivector</a>*)<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a657ae1f7880a7e5fc2293e8f46d77983">vector_get</a>(&amp;table, hash))-&gt;<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>[tablepos2.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[hash]] &lt; pos) tablepos2.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[hash]++; <span class="comment">/*it now points to the first value in the table for which the index is larger than or equal to pos*/</span></div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span> </div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>      <span class="keywordflow">for</span>(tablepos = tablepos2.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[hash] - 1; tablepos &gt;= tablepos1.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[hash] &amp;&amp; tablepos &lt; tablepos2.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[hash]; tablepos--)</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>      {</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>        <span class="keywordtype">unsigned</span> backpos = ((<a class="code hl_struct" href="structuivector.html">uivector</a>*)<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a657ae1f7880a7e5fc2293e8f46d77983">vector_get</a>(&amp;table, hash))-&gt;<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>[tablepos];</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>        <span class="keywordtype">unsigned</span> current_offset = pos - backpos;</div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span> </div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>        <span class="comment">/*test the next characters*/</span></div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>        <span class="keywordtype">unsigned</span> current_length = 0;</div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>        <span class="keywordtype">unsigned</span> backtest = backpos;</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>        <span class="keywordtype">unsigned</span> foretest = pos;</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>        <span class="keywordflow">while</span>(foretest &lt; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a> &amp;&amp; in[backtest] == in[foretest] &amp;&amp; current_length &lt; <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a2a7f7638619c00f79a4be22bcf5fadba">MAX_SUPPORTED_DEFLATE_LENGTH</a>) <span class="comment">/*maximum support length by deflate is max length*/</span></div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>        {</div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>          <span class="keywordflow">if</span>(backpos &gt;= pos) backpos -= current_offset; <span class="comment">/*continue as if we work on the decoded bytes after pos by jumping back before pos*/</span></div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>          current_length++;</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>          backtest++;</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>          foretest++;</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>        }</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>        <span class="keywordflow">if</span>(current_length &gt; length)</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>        {</div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>          length = current_length; <span class="comment">/*the longest length*/</span></div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>          <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ae8293bdb39668d0bafde58b6c1d836f0">offset</a> = current_offset; <span class="comment">/*the offset that is related to this longest length*/</span></div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>          <span class="keywordflow">if</span>(current_length == <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a2a7f7638619c00f79a4be22bcf5fadba">MAX_SUPPORTED_DEFLATE_LENGTH</a>) <span class="keywordflow">break</span>; <span class="comment">/*you can jump out of this for loop once a length of max length is found (gives significant speed gain)*/</span></div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>        }</div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>      }</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span> </div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>      <span class="keywordflow">if</span>(length &lt; 3) <span class="comment">/*only lengths of 3 or higher are supported as length/distance pair*/</span></div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>      {</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span>        <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, in[pos])) { error = 9921; <span class="keywordflow">break</span>; }</div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>      }</div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>      <span class="keywordflow">else</span></div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>      {</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>        <span class="keywordtype">unsigned</span> j;</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>        <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aad409090a7949e79b1db4c3a34431712">addLengthDistance</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, length, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ae8293bdb39668d0bafde58b6c1d836f0">offset</a>);</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>        <span class="keywordflow">for</span>(j = 0; j &lt; length - 1; j++)</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>        {</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>          pos++;</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>          <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>((<a class="code hl_struct" href="structuivector.html">uivector</a>*)<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a657ae1f7880a7e5fc2293e8f46d77983">vector_get</a>(&amp;table, getHash(in, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>, pos)), pos)) { error = 9922; <span class="keywordflow">break</span>; }</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>        }</div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>      }</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>    } <span class="comment">/*end of the loop through each character of input*/</span></div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>  } <span class="comment">/*end of &quot;if(!error)&quot;*/</span></div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span> </div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>  <span class="comment">/*cleanup*/</span></div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>  <span class="keywordflow">for</span>(i = 0; i &lt; table.<a class="code hl_variable" href="structvector.html#a4200005b6949608d6a533db1a0d299c8">size</a>; i++)</div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>  {</div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>    <a class="code hl_struct" href="structuivector.html">uivector</a>* v = (<a class="code hl_struct" href="structuivector.html">uivector</a>*)<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a657ae1f7880a7e5fc2293e8f46d77983">vector_get</a>(&amp;table, i);</div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>    <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a58616079535e14a89a469632d078d336">uivector_cleanup</a>(v);</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>  }</div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa6fa04a4423160f5119c6f4e0247556c">vector_cleanup</a>(&amp;table);</div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a58616079535e14a89a469632d078d336">uivector_cleanup</a>(&amp;tablepos1);</div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a58616079535e14a89a469632d078d336">uivector_cleanup</a>(&amp;tablepos2);</div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>  <span class="keywordflow">return</span> error;</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>}</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span> </div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span><span class="comment">/* /////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span> </div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a758e000aa92967d5916db08e815e6b1f">  931</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a758e000aa92967d5916db08e815e6b1f">deflateNoCompression</a>(<a class="code hl_struct" href="structucvector.html">ucvector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>, <span class="keywordtype">size_t</span> datasize)</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>{</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>  <span class="comment">/*non compressed deflate block data: 1 bit BFINAL,2 bits BTYPE,(5 bits): it jumps to start of next byte, 2 bytes LEN, 2 bytes NLEN, LEN bytes literal DATA*/</span></div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span> </div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>  <span class="keywordtype">size_t</span> i, j, numdeflateblocks = datasize / 65536 + 1;</div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>  <span class="keywordtype">unsigned</span> datapos = 0;</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>  <span class="keywordflow">for</span>(i = 0; i &lt; numdeflateblocks; i++)</div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>  {</div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>    <span class="keywordtype">unsigned</span> BFINAL, BTYPE, LEN, NLEN;</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> firstbyte;</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span> </div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>    BFINAL = (i == numdeflateblocks - 1);</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>    BTYPE = 0;</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span> </div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>    firstbyte = (<span class="keywordtype">unsigned</span> char)(BFINAL + ((BTYPE &amp; 1) &lt;&lt; 1) + ((BTYPE &amp; 2) &lt;&lt; 1));</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>    <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, firstbyte);</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span> </div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>    LEN = 65535;</div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>    <span class="keywordflow">if</span>(datasize - datapos &lt; 65535) LEN = (unsigned)datasize - datapos;</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>    NLEN = 65535 - LEN;</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span> </div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>    <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(LEN % 256));</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>    <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(LEN / 256));</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>    <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(NLEN % 256));</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>    <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(NLEN / 256));</div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span> </div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>    <span class="comment">/*Decompressed data*/</span></div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>    <span class="keywordflow">for</span>(j = 0; j &lt; 65535 &amp;&amp; datapos &lt; datasize; j++)</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>    {</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>      <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>[datapos++]);</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>    }</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>  }</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span> </div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>}</div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span> </div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span><span class="comment">/*write the encoded data, using lit/len as well as distance codes*/</span></div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#ad4fe7843fd0159f6b632aa41826132ec">  968</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad4fe7843fd0159f6b632aa41826132ec">writeLZ77data</a>(<span class="keywordtype">size_t</span>* bp, <a class="code hl_struct" href="structucvector.html">ucvector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="keyword">const</span> <a class="code hl_struct" href="structuivector.html">uivector</a>* lz77_encoded, <span class="keyword">const</span> <a class="code hl_struct" href="struct_huffman_tree.html">HuffmanTree</a>* codes, <span class="keyword">const</span> <a class="code hl_struct" href="struct_huffman_tree.html">HuffmanTree</a>* codesD)</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>{</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>  <span class="keywordtype">size_t</span> i = 0;</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>  <span class="keywordflow">for</span>(i = 0; i &lt; lz77_encoded-&gt;<a class="code hl_variable" href="structuivector.html#aa999025945f0c93d0461192475ae2720">size</a>; i++)</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>  {</div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>    <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="namespacetestsqlite3.html#aaf1f002c93e5808e18b0a59e3b1691d9">val</a> = lz77_encoded-&gt;<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i];</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>    <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a8220b4fba74162202ac5294bde504252">addHuffmanSymbol</a>(bp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a4a219535105aecc94ba9d4bccfbb66b8">HuffmanTree_getCode</a>(codes, <a class="code hl_variable" href="namespacetestsqlite3.html#aaf1f002c93e5808e18b0a59e3b1691d9">val</a>), <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a0b12e062127bf0b511165c7a14ca9a87">HuffmanTree_getLength</a>(codes, <a class="code hl_variable" href="namespacetestsqlite3.html#aaf1f002c93e5808e18b0a59e3b1691d9">val</a>));</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="namespacetestsqlite3.html#aaf1f002c93e5808e18b0a59e3b1691d9">val</a> &gt; 256) <span class="comment">/*for a length code, 3 more things have to be added*/</span></div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>    {</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>      <span class="keywordtype">unsigned</span> length_index = <a class="code hl_variable" href="namespacetestsqlite3.html#aaf1f002c93e5808e18b0a59e3b1691d9">val</a> - <a class="code hl_define" href="liblodepng_2lodepng_8cpp.html#acfb12caea990f92b3aed7c199f615213">FIRST_LENGTH_CODE_INDEX</a>;</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>      <span class="keywordtype">unsigned</span> n_length_extra_bits = <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a36f7494abb7d8fa1ed4c00495ccc69b9">LENGTHEXTRA</a>[length_index];</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>      <span class="keywordtype">unsigned</span> length_extra_bits = lz77_encoded-&gt;<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[++i];</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span> </div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>      <span class="keywordtype">unsigned</span> distance_code = lz77_encoded-&gt;<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[++i];</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span> </div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>      <span class="keywordtype">unsigned</span> distance_index = distance_code;</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>      <span class="keywordtype">unsigned</span> n_distance_extra_bits = <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#ae2b6129cf7ecfc3c6bc1c15c0bf2eed0">DISTANCEEXTRA</a>[distance_index];</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>      <span class="keywordtype">unsigned</span> distance_extra_bits = lz77_encoded-&gt;<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[++i];</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span> </div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>      <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aaee6011b88c8b394ccd9e868b01cafa6">addBitsToStream</a>(bp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, length_extra_bits, n_length_extra_bits);</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>      <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a8220b4fba74162202ac5294bde504252">addHuffmanSymbol</a>(bp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a4a219535105aecc94ba9d4bccfbb66b8">HuffmanTree_getCode</a>(codesD, distance_code), <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a0b12e062127bf0b511165c7a14ca9a87">HuffmanTree_getLength</a>(codesD, distance_code));</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>      <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aaee6011b88c8b394ccd9e868b01cafa6">addBitsToStream</a>(bp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, distance_extra_bits, n_distance_extra_bits);</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>    }</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>  }</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>}</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span> </div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a3cc9fa693ee76a403ef35370fea7f0f9">  994</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a3cc9fa693ee76a403ef35370fea7f0f9">deflateDynamic</a>(<a class="code hl_struct" href="structucvector.html">ucvector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>, <span class="keywordtype">size_t</span> datasize, <span class="keyword">const</span> <a class="code hl_struct" href="struct_lode_zlib___deflate_settings.html">LodeZlib_DeflateSettings</a>* settings)</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>{</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>  <span class="comment">/*</span></div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span><span class="comment">  after the BFINAL and BTYPE, the dynamic block consists out of the following:</span></div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span><span class="comment">  - 5 bits HLIT, 5 bits HDIST, 4 bits HCLEN</span></div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span><span class="comment">  - (HCLEN+4)*3 bits code lengths of code length alphabet</span></div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span><span class="comment">  - HLIT + 257 code lengths of lit/length alphabet (encoded using the code length alphabet, + possible repetition codes 16, 17, 18)</span></div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span><span class="comment">  - HDIST + 1 code lengths of distance alphabet (encoded using the code length alphabet, + possible repetition codes 16, 17, 18)</span></div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span><span class="comment">  - compressed data</span></div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span><span class="comment">  - 256 (end code)</span></div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span><span class="comment">  */</span></div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span> </div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>  <span class="keywordtype">unsigned</span> error = 0;</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span> </div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>  <a class="code hl_struct" href="structuivector.html">uivector</a> lz77_encoded;</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>  <a class="code hl_struct" href="struct_huffman_tree.html">HuffmanTree</a> codes; <span class="comment">/*tree for literal values and length codes*/</span></div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>  <a class="code hl_struct" href="struct_huffman_tree.html">HuffmanTree</a> codesD; <span class="comment">/*tree for distance codes*/</span></div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>  <a class="code hl_struct" href="struct_huffman_tree.html">HuffmanTree</a> codelengthcodes;</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>  <a class="code hl_struct" href="structuivector.html">uivector</a> frequencies;</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>  <a class="code hl_struct" href="structuivector.html">uivector</a> frequenciesD;</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>  <a class="code hl_struct" href="structuivector.html">uivector</a> amounts; <span class="comment">/*the amounts in the &quot;normal&quot; order*/</span></div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>  <a class="code hl_struct" href="structuivector.html">uivector</a> lldl;</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>  <a class="code hl_struct" href="structuivector.html">uivector</a> lldll; <span class="comment">/*lit/len &amp; dist code lengths*/</span></div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>  <a class="code hl_struct" href="structuivector.html">uivector</a> clcls;</div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span> </div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>  <span class="keywordtype">unsigned</span> BFINAL = 1; <span class="comment">/*make only one block... the first and final one*/</span></div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>  <span class="keywordtype">size_t</span> numcodes, numcodesD, i, bp = 0; <span class="comment">/*the bit pointer*/</span></div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>  <span class="keywordtype">unsigned</span> HLIT, HDIST, HCLEN;</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span> </div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa03164e774d0dea9886ccdbb3f591f49">uivector_init</a>(&amp;lz77_encoded);</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a37cb427b175e04defdc48569b76a375c">HuffmanTree_init</a>(&amp;codes);</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a37cb427b175e04defdc48569b76a375c">HuffmanTree_init</a>(&amp;codesD);</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a37cb427b175e04defdc48569b76a375c">HuffmanTree_init</a>(&amp;codelengthcodes);</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa03164e774d0dea9886ccdbb3f591f49">uivector_init</a>(&amp;frequencies);</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa03164e774d0dea9886ccdbb3f591f49">uivector_init</a>(&amp;frequenciesD);</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa03164e774d0dea9886ccdbb3f591f49">uivector_init</a>(&amp;amounts);</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa03164e774d0dea9886ccdbb3f591f49">uivector_init</a>(&amp;lldl);</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa03164e774d0dea9886ccdbb3f591f49">uivector_init</a>(&amp;lldll);</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa03164e774d0dea9886ccdbb3f591f49">uivector_init</a>(&amp;clcls);</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span> </div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>  <span class="keywordflow">while</span>(!error) <span class="comment">/*the goto-avoiding while construct: break out to go to the cleanup phase, a break at the end makes sure the while is never repeated*/</span></div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>  {</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>    <span class="keywordflow">if</span>(settings-&gt;<a class="code hl_variable" href="struct_lode_zlib___deflate_settings.html#a71f933aad07b4d940716c7873c771c95">useLZ77</a>)</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>    {</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>      error = <a class="code hl_define" href="liblodepng_2lodepng_8cpp.html#a96367b6d4f2b41539c3584448dea5a80">encodeLZ77</a>(&amp;lz77_encoded, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>, datasize, settings-&gt;<a class="code hl_variable" href="struct_lode_zlib___deflate_settings.html#ab4db0ff77376a9a8b9af7f85cafc6028">windowSize</a>); <span class="comment">/*LZ77 encoded*/</span></div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>      <span class="keywordflow">if</span>(error) <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>    }</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>    {</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>      <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a348bbe51fbdd2881e2caabe468611a26">uivector_resize</a>(&amp;lz77_encoded, datasize)) { error = 9923; <span class="keywordflow">break</span>; }</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>      <span class="keywordflow">for</span>(i = 0; i &lt; datasize; i++) lz77_encoded.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i] = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>[i]; <span class="comment">/*no LZ77, but still will be Huffman compressed*/</span></div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>    }</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span> </div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>    <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a2ceb381bbb52c2fc72946047b58ea11d">uivector_resizev</a>(&amp;frequencies, 286, 0)) { error = 9924; <span class="keywordflow">break</span>; }</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>    <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a2ceb381bbb52c2fc72946047b58ea11d">uivector_resizev</a>(&amp;frequenciesD, 30, 0)) { error = 9925; <span class="keywordflow">break</span>; }</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>    <span class="keywordflow">for</span>(i = 0; i &lt; lz77_encoded.<a class="code hl_variable" href="structuivector.html#aa999025945f0c93d0461192475ae2720">size</a>; i++)</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>    {</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span>      <span class="keywordtype">unsigned</span> symbol = lz77_encoded.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i];</div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>      frequencies.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[symbol]++;</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>      <span class="keywordflow">if</span>(symbol &gt; 256)</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>      {</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>        <span class="keywordtype">unsigned</span> dist = lz77_encoded.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i + 2];</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>        frequenciesD.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[dist]++;</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>        i += 3;</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>      }</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>    }</div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>    frequencies.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[256] = 1; <span class="comment">/*there will be exactly 1 end code, at the end of the block*/</span></div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span> </div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>    error = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a10e6c6183aba33ac05dd184cd0898796">HuffmanTree_makeFromFrequencies</a>(&amp;codes, frequencies.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>, frequencies.<a class="code hl_variable" href="structuivector.html#aa999025945f0c93d0461192475ae2720">size</a>, 15);</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>    <span class="keywordflow">if</span>(error) <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>    error = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a10e6c6183aba33ac05dd184cd0898796">HuffmanTree_makeFromFrequencies</a>(&amp;codesD, frequenciesD.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>, frequenciesD.<a class="code hl_variable" href="structuivector.html#aa999025945f0c93d0461192475ae2720">size</a>, 15);</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>    <span class="keywordflow">if</span>(error) <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span> </div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>    <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a4d700260c21794995cbc67d6dd00ce44">addBitToStream</a>(&amp;bp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, BFINAL);</div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>    <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a4d700260c21794995cbc67d6dd00ce44">addBitToStream</a>(&amp;bp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, 0); <span class="comment">/*first bit of BTYPE &quot;dynamic&quot;*/</span></div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>    <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a4d700260c21794995cbc67d6dd00ce44">addBitToStream</a>(&amp;bp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, 1); <span class="comment">/*second bit of BTYPE &quot;dynamic&quot;*/</span></div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span> </div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>    numcodes = codes.<a class="code hl_variable" href="struct_huffman_tree.html#a608df5a24f60d1077a5cde19d5149e1f">numcodes</a>; <span class="keywordflow">if</span>(numcodes &gt; 286) numcodes = 286;</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>    numcodesD = codesD.<a class="code hl_variable" href="struct_huffman_tree.html#a608df5a24f60d1077a5cde19d5149e1f">numcodes</a>; <span class="keywordflow">if</span>(numcodesD &gt; 30) numcodesD = 30;</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>    <span class="keywordflow">for</span>(i = 0; i &lt; numcodes; i++) <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(&amp;lldll, <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a0b12e062127bf0b511165c7a14ca9a87">HuffmanTree_getLength</a>(&amp;codes, (<span class="keywordtype">unsigned</span>)i));</div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>    <span class="keywordflow">for</span>(i = 0; i &lt; numcodesD; i++) <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(&amp;lldll, <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a0b12e062127bf0b511165c7a14ca9a87">HuffmanTree_getLength</a>(&amp;codesD, (<span class="keywordtype">unsigned</span>)i));</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span> </div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>    <span class="comment">/*make lldl smaller by using repeat codes 16 (copy length 3-6 times), 17 (3-10 zeros), 18 (11-138 zeros)*/</span></div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>    <span class="keywordflow">for</span>(i = 0; i &lt; (unsigned)lldll.<a class="code hl_variable" href="structuivector.html#aa999025945f0c93d0461192475ae2720">size</a>; i++)</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>    {</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>      <span class="keywordtype">unsigned</span> j = 0;</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>      <span class="keywordflow">while</span>(i + j + 1 &lt; (<span class="keywordtype">unsigned</span>)lldll.<a class="code hl_variable" href="structuivector.html#aa999025945f0c93d0461192475ae2720">size</a> &amp;&amp; lldll.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i + j + 1] == lldll.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i]) j++;</div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span> </div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>      <span class="keywordflow">if</span>(lldll.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i] == 0 &amp;&amp; j &gt;= 2)</div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>      {</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>        j++; <span class="comment">/*include the first zero*/</span></div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>        <span class="keywordflow">if</span>(j &lt;= 10) { <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(&amp;lldl, 17); <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(&amp;lldl, j - 3); }</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>        {</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>          <span class="keywordflow">if</span>(j &gt; 138) j = 138;</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>          <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(&amp;lldl, 18); <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(&amp;lldl, j - 11);</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>        }</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>        i += (j - 1);</div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>      }</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(j &gt;= 3)</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>      {</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>        <span class="keywordtype">size_t</span> k;</div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>        <span class="keywordtype">unsigned</span> num = j / 6, rest = j % 6;</div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>        <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(&amp;lldl, lldll.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i]);</div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>        <span class="keywordflow">for</span>(k = 0; k &lt; num; k++) { <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(&amp;lldl, 16); <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(&amp;lldl,    6 - 3); }</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>        <span class="keywordflow">if</span>(rest &gt;= 3)            { <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(&amp;lldl, 16); <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(&amp;lldl, rest - 3); }</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>        <span class="keywordflow">else</span> j -= rest;</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>        i += j;</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>      }</div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>      <span class="keywordflow">else</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a>(&amp;lldl, lldll.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i]);</div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>    }</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span> </div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>    <span class="comment">/*generate huffmantree for the length codes of lit/len and dist codes*/</span></div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>    <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a2ceb381bbb52c2fc72946047b58ea11d">uivector_resizev</a>(&amp;amounts, 19, 0)) { error = 9926; <span class="keywordflow">break</span>; } <span class="comment">/*16 possible lengths (0-15) and 3 repeat codes (16, 17 and 18)*/</span></div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>    <span class="keywordflow">for</span>(i = 0; i &lt; lldl.<a class="code hl_variable" href="structuivector.html#aa999025945f0c93d0461192475ae2720">size</a>; i++)</div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>    {</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>      amounts.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[lldl.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i]]++;</div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>      <span class="keywordflow">if</span>(lldl.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i] &gt;= 16) i++; <span class="comment">/*after a repeat code come the bits that specify the amount, those don&#39;t need to be in the amounts calculation*/</span></div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>    }</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span> </div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>    error = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a10e6c6183aba33ac05dd184cd0898796">HuffmanTree_makeFromFrequencies</a>(&amp;codelengthcodes, amounts.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>, amounts.<a class="code hl_variable" href="structuivector.html#aa999025945f0c93d0461192475ae2720">size</a>, 7);</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>    <span class="keywordflow">if</span>(error) <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span> </div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>    <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a348bbe51fbdd2881e2caabe468611a26">uivector_resize</a>(&amp;clcls, 19)) { error = 9927; <span class="keywordflow">break</span>; }</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>    <span class="keywordflow">for</span>(i = 0; i &lt; 19; i++) clcls.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i] = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a0b12e062127bf0b511165c7a14ca9a87">HuffmanTree_getLength</a>(&amp;codelengthcodes, <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a78336e0107c8a22c68a85afe6d7c2af6">CLCL</a>[i]); <span class="comment">/*lengths of code length tree is in the order as specified by deflate*/</span></div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>    <span class="keywordflow">while</span>(clcls.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[clcls.<a class="code hl_variable" href="structuivector.html#aa999025945f0c93d0461192475ae2720">size</a> - 1] == 0 &amp;&amp; clcls.<a class="code hl_variable" href="structuivector.html#aa999025945f0c93d0461192475ae2720">size</a> &gt; 4)</div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>    {</div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>      <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a348bbe51fbdd2881e2caabe468611a26">uivector_resize</a>(&amp;clcls, clcls.<a class="code hl_variable" href="structuivector.html#aa999025945f0c93d0461192475ae2720">size</a> - 1)) { error = 9928; <span class="keywordflow">break</span>; } <span class="comment">/*remove zeros at the end, but minimum size must be 4*/</span></div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>    }</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>    <span class="keywordflow">if</span>(error) <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span> </div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>    <span class="comment">/*write the HLIT, HDIST and HCLEN values*/</span></div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>    HLIT = (unsigned)(numcodes - 257);</div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>    HDIST = (unsigned)(numcodesD - 1);</div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>    HCLEN = (unsigned)clcls.<a class="code hl_variable" href="structuivector.html#aa999025945f0c93d0461192475ae2720">size</a> - 4;</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>    <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aaee6011b88c8b394ccd9e868b01cafa6">addBitsToStream</a>(&amp;bp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, HLIT, 5);</div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>    <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aaee6011b88c8b394ccd9e868b01cafa6">addBitsToStream</a>(&amp;bp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, HDIST, 5);</div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>    <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aaee6011b88c8b394ccd9e868b01cafa6">addBitsToStream</a>(&amp;bp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, HCLEN, 4);</div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span> </div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>    <span class="comment">/*write the code lengths of the code length alphabet*/</span></div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>    <span class="keywordflow">for</span>(i = 0; i &lt; HCLEN + 4; i++) <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aaee6011b88c8b394ccd9e868b01cafa6">addBitsToStream</a>(&amp;bp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, clcls.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i], 3);</div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span> </div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>    <span class="comment">/*write the lengths of the lit/len AND the dist alphabet*/</span></div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>    <span class="keywordflow">for</span>(i = 0; i &lt; lldl.<a class="code hl_variable" href="structuivector.html#aa999025945f0c93d0461192475ae2720">size</a>; i++)</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>    {</div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>      <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a8220b4fba74162202ac5294bde504252">addHuffmanSymbol</a>(&amp;bp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a4a219535105aecc94ba9d4bccfbb66b8">HuffmanTree_getCode</a>(&amp;codelengthcodes, lldl.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i]), <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a0b12e062127bf0b511165c7a14ca9a87">HuffmanTree_getLength</a>(&amp;codelengthcodes, lldl.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i]));</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>      <span class="comment">/*extra bits of repeat codes*/</span></div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>      <span class="keywordflow">if</span>(lldl.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i] == 16) <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aaee6011b88c8b394ccd9e868b01cafa6">addBitsToStream</a>(&amp;bp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, lldl.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[++i], 2);</div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(lldl.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i] == 17) <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aaee6011b88c8b394ccd9e868b01cafa6">addBitsToStream</a>(&amp;bp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, lldl.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[++i], 3);</div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(lldl.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[i] == 18) <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aaee6011b88c8b394ccd9e868b01cafa6">addBitsToStream</a>(&amp;bp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, lldl.<a class="code hl_variable" href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">data</a>[++i], 7);</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>    }</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span> </div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>    <span class="comment">/*write the compressed data symbols*/</span></div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>    <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad4fe7843fd0159f6b632aa41826132ec">writeLZ77data</a>(&amp;bp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, &amp;lz77_encoded, &amp;codes, &amp;codesD);</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>    <span class="keywordflow">if</span>(<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a0b12e062127bf0b511165c7a14ca9a87">HuffmanTree_getLength</a>(&amp;codes, 256) == 0) { error = 64; <span class="keywordflow">break</span>; } <span class="comment">/*the length of the end code 256 must be larger than 0*/</span></div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>    <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a8220b4fba74162202ac5294bde504252">addHuffmanSymbol</a>(&amp;bp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a4a219535105aecc94ba9d4bccfbb66b8">HuffmanTree_getCode</a>(&amp;codes, 256), <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a0b12e062127bf0b511165c7a14ca9a87">HuffmanTree_getLength</a>(&amp;codes, 256)); <span class="comment">/*end code*/</span></div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span> </div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>    <span class="keywordflow">break</span>; <span class="comment">/*end of error-while*/</span></div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>  }</div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span> </div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>  <span class="comment">/*cleanup*/</span></div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a58616079535e14a89a469632d078d336">uivector_cleanup</a>(&amp;lz77_encoded);</div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a3228e11a4562c70c9fb78931eb6eb44a">HuffmanTree_cleanup</a>(&amp;codes);</div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a3228e11a4562c70c9fb78931eb6eb44a">HuffmanTree_cleanup</a>(&amp;codesD);</div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a3228e11a4562c70c9fb78931eb6eb44a">HuffmanTree_cleanup</a>(&amp;codelengthcodes);</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a58616079535e14a89a469632d078d336">uivector_cleanup</a>(&amp;frequencies);</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a58616079535e14a89a469632d078d336">uivector_cleanup</a>(&amp;frequenciesD);</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a58616079535e14a89a469632d078d336">uivector_cleanup</a>(&amp;amounts);</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a58616079535e14a89a469632d078d336">uivector_cleanup</a>(&amp;lldl);</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a58616079535e14a89a469632d078d336">uivector_cleanup</a>(&amp;lldll);</div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a58616079535e14a89a469632d078d336">uivector_cleanup</a>(&amp;clcls);</div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span> </div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>  <span class="keywordflow">return</span> error;</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>}</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span> </div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#ad20eccb1816580176496c3723e6178c3"> 1169</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad20eccb1816580176496c3723e6178c3">deflateFixed</a>(<a class="code hl_struct" href="structucvector.html">ucvector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>, <span class="keywordtype">size_t</span> datasize, <span class="keyword">const</span> <a class="code hl_struct" href="struct_lode_zlib___deflate_settings.html">LodeZlib_DeflateSettings</a>* settings)</div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>{</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>  <a class="code hl_struct" href="struct_huffman_tree.html">HuffmanTree</a> codes; <span class="comment">/*tree for literal values and length codes*/</span></div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>  <a class="code hl_struct" href="struct_huffman_tree.html">HuffmanTree</a> codesD; <span class="comment">/*tree for distance codes*/</span></div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span> </div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>  <span class="keywordtype">unsigned</span> BFINAL = 1; <span class="comment">/*make only one block... the first and final one*/</span></div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>  <span class="keywordtype">unsigned</span> error = 0;</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span>  <span class="keywordtype">size_t</span> i, bp = 0; <span class="comment">/*the bit pointer*/</span></div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span> </div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a37cb427b175e04defdc48569b76a375c">HuffmanTree_init</a>(&amp;codes);</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a37cb427b175e04defdc48569b76a375c">HuffmanTree_init</a>(&amp;codesD);</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span> </div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a1e940c5656ead8ab9309511b00467eb1">generateFixedTree</a>(&amp;codes);</div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a78e71630babf8893f976287a9a8aa65b">generateDistanceTree</a>(&amp;codesD);</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span> </div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a4d700260c21794995cbc67d6dd00ce44">addBitToStream</a>(&amp;bp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, BFINAL);</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a4d700260c21794995cbc67d6dd00ce44">addBitToStream</a>(&amp;bp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, 1); <span class="comment">/*first bit of BTYPE*/</span></div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a4d700260c21794995cbc67d6dd00ce44">addBitToStream</a>(&amp;bp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, 0); <span class="comment">/*second bit of BTYPE*/</span></div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span> </div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span>  <span class="keywordflow">if</span>(settings-&gt;<a class="code hl_variable" href="struct_lode_zlib___deflate_settings.html#a71f933aad07b4d940716c7873c771c95">useLZ77</a>) <span class="comment">/*LZ77 encoded*/</span></div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>  {</div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span>    <a class="code hl_struct" href="structuivector.html">uivector</a> lz77_encoded;</div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>    <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa03164e774d0dea9886ccdbb3f591f49">uivector_init</a>(&amp;lz77_encoded);</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>    error = <a class="code hl_define" href="liblodepng_2lodepng_8cpp.html#a96367b6d4f2b41539c3584448dea5a80">encodeLZ77</a>(&amp;lz77_encoded, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>, datasize, settings-&gt;<a class="code hl_variable" href="struct_lode_zlib___deflate_settings.html#ab4db0ff77376a9a8b9af7f85cafc6028">windowSize</a>);</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>    <span class="keywordflow">if</span>(!error) <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad4fe7843fd0159f6b632aa41826132ec">writeLZ77data</a>(&amp;bp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, &amp;lz77_encoded, &amp;codes, &amp;codesD);</div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span>    <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a58616079535e14a89a469632d078d336">uivector_cleanup</a>(&amp;lz77_encoded);</div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span>  }</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>  <span class="keywordflow">else</span> <span class="comment">/*no LZ77, but still will be Huffman compressed*/</span></div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>  {</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span>    <span class="keywordflow">for</span>(i = 0; i &lt; datasize; i++) <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a8220b4fba74162202ac5294bde504252">addHuffmanSymbol</a>(&amp;bp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a4a219535105aecc94ba9d4bccfbb66b8">HuffmanTree_getCode</a>(&amp;codes, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>[i]), <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a0b12e062127bf0b511165c7a14ca9a87">HuffmanTree_getLength</a>(&amp;codes, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>[i]));</div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>  }</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>  <span class="keywordflow">if</span>(!error) <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a8220b4fba74162202ac5294bde504252">addHuffmanSymbol</a>(&amp;bp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a4a219535105aecc94ba9d4bccfbb66b8">HuffmanTree_getCode</a>(&amp;codes, 256), <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a0b12e062127bf0b511165c7a14ca9a87">HuffmanTree_getLength</a>(&amp;codes, 256)); <span class="comment">/*&quot;end&quot; code*/</span></div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span> </div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span>  <span class="comment">/*cleanup*/</span></div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a3228e11a4562c70c9fb78931eb6eb44a">HuffmanTree_cleanup</a>(&amp;codes);</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a3228e11a4562c70c9fb78931eb6eb44a">HuffmanTree_cleanup</a>(&amp;codesD);</div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span> </div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span>  <span class="keywordflow">return</span> error;</div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span>}</div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span> </div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#ab88e597da4e7744daa475f555ffc4cc4"> 1209</a></span><span class="keywordtype">unsigned</span> <a class="code hl_function" href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#ab88e597da4e7744daa475f555ffc4cc4">LodeFlate_deflate</a>(<a class="code hl_struct" href="structucvector.html">ucvector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>, <span class="keywordtype">size_t</span> datasize, <span class="keyword">const</span> <a class="code hl_struct" href="struct_lode_zlib___deflate_settings.html">LodeZlib_DeflateSettings</a>* settings)</div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span>{</div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span>  <span class="keywordtype">unsigned</span> error = 0;</div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span>  <span class="keywordflow">if</span>(settings-&gt;<a class="code hl_variable" href="struct_lode_zlib___deflate_settings.html#a9a016a3b62b8efae335eb585f7f40cfd">btype</a> == 0) error = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a758e000aa92967d5916db08e815e6b1f">deflateNoCompression</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>, datasize);</div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(settings-&gt;<a class="code hl_variable" href="struct_lode_zlib___deflate_settings.html#a9a016a3b62b8efae335eb585f7f40cfd">btype</a> == 1) error = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad20eccb1816580176496c3723e6178c3">deflateFixed</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>, datasize, settings);</div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"> 1214</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(settings-&gt;<a class="code hl_variable" href="struct_lode_zlib___deflate_settings.html#a9a016a3b62b8efae335eb585f7f40cfd">btype</a> == 2) error = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a3cc9fa693ee76a403ef35370fea7f0f9">deflateDynamic</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>, datasize, settings);</div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span>  <span class="keywordflow">else</span> error = 61;</div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span>  <span class="keywordflow">return</span> error;</div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span>}</div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span> </div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span> </div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span><span class="comment">/* / Adler32                                                                  */</span></div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span> </div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a6b8e3bf04ec5a378eabb8851728421dd"> 1224</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a6b8e3bf04ec5a378eabb8851728421dd">update_adler32</a>(<span class="keywordtype">unsigned</span> adler, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>, <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#afed088663f8704004425cdae2120b9b3">len</a>)</div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>{</div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>   <span class="keywordtype">unsigned</span> s1 = adler &amp; 0xffff;</div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>   <span class="keywordtype">unsigned</span> s2 = (adler &gt;&gt; 16) &amp; 0xffff;</div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span> </div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span>  <span class="keywordflow">while</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &gt; 0)</div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>  {</div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span>    <span class="comment">/*at least 5550 sums can be done before the sums overflow, saving us from a lot of module divisions*/</span></div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>    <span class="keywordtype">unsigned</span> amount = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#afed088663f8704004425cdae2120b9b3">len</a> &gt; 5550 ? 5550 : <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#afed088663f8704004425cdae2120b9b3">len</a>;</div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span>    <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#afed088663f8704004425cdae2120b9b3">len</a> -= amount;</div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>    <span class="keywordflow">while</span>(amount &gt; 0)</div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span>    {</div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span>      s1 = (s1 + *<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>++);</div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>      s2 = (s2 + s1);</div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>      amount--;</div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span>    }</div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span>    s1 %= 65521;</div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>    s2 %= 65521;</div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span>  }</div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span> </div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>  <span class="keywordflow">return</span> (s2 &lt;&lt; 16) | s1;</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>}</div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span> </div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span><span class="comment">/*Return the adler32 of the bytes data[0..len-1]*/</span></div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#aaff8570a8cd87fb288946c4465077c8d"> 1248</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aaff8570a8cd87fb288946c4465077c8d">adler32</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>, <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#afed088663f8704004425cdae2120b9b3">len</a>)</div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>{</div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a6b8e3bf04ec5a378eabb8851728421dd">update_adler32</a>(1L, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#afed088663f8704004425cdae2120b9b3">len</a>);</div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>}</div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span> </div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span><span class="comment">/* / Reading and writing single bits and bytes from/to stream for Zlib      / */</span></div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span> </div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a66240228e12afb19529ad1dff8469f58"> 1257</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a66240228e12afb19529ad1dff8469f58">LodeZlib_add32bitInt</a>(<a class="code hl_struct" href="structucvector.html">ucvector</a>* buffer, <span class="keywordtype">unsigned</span> value)</div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span>{</div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(buffer, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)((value &gt;&gt; 24) &amp; 0xff));</div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(buffer, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)((value &gt;&gt; 16) &amp; 0xff));</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(buffer, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)((value &gt;&gt;  8) &amp; 0xff));</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(buffer, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)((value      ) &amp; 0xff));</div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span>}</div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span> </div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span><span class="comment">/* / Zlib                                                                   / */</span></div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span> </div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a419dd192a4197c45bd6613d62fb29a0a"> 1269</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a419dd192a4197c45bd6613d62fb29a0a">LodeZlib_compress</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>** <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="keywordtype">size_t</span>* outsize, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* in, <span class="keywordtype">size_t</span> insize, <span class="keyword">const</span> <a class="code hl_struct" href="struct_lode_zlib___deflate_settings.html">LodeZlib_DeflateSettings</a>* settings)</div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span>{</div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span>  <span class="comment">/*initially, *out must be NULL and outsize 0, if you just give some random *out that&#39;s pointing to a non allocated buffer, this&#39;ll crash*/</span></div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>  <a class="code hl_struct" href="structucvector.html">ucvector</a> deflatedata, outv;</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>  <span class="keywordtype">size_t</span> i;</div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span>  <span class="keywordtype">unsigned</span> error;</div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span> </div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>  <span class="keywordtype">unsigned</span> ADLER32;</div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>  <span class="comment">/*zlib data: 1 byte CMF (CM+CINFO), 1 byte FLG, deflate data, 4 byte ADLER32 checksum of the Decompressed data*/</span></div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>  <span class="keywordtype">unsigned</span> CMF = 120; <span class="comment">/*0b01111000: CM 8, CINFO 7. With CINFO 7, any window size up to 32768 can be used.*/</span></div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>  <span class="keywordtype">unsigned</span> FLEVEL = 0;</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>  <span class="keywordtype">unsigned</span> FDICT = 0;</div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>  <span class="keywordtype">unsigned</span> CMFFLG = 256 * CMF + FDICT * 32 + FLEVEL * 64;</div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span>  <span class="keywordtype">unsigned</span> FCHECK = 31 - CMFFLG % 31;</div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>  CMFFLG += FCHECK;</div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span> </div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a965dbd8125f0471f3e0d8206b4c91f22">ucvector_init_buffer</a>(&amp;outv, *<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, *outsize); <span class="comment">/*ucvector-controlled version of the output buffer, for dynamic array*/</span></div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span> </div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(&amp;outv, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(CMFFLG / 256));</div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(&amp;outv, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(CMFFLG % 256));</div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span> </div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a1b58c07819eec4ff7e903138c08eb502">ucvector_init</a>(&amp;deflatedata);</div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>  error = <a class="code hl_function" href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#ab88e597da4e7744daa475f555ffc4cc4">LodeFlate_deflate</a>(&amp;deflatedata, in, insize, settings);</div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span> </div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>  <span class="keywordflow">if</span>(!error)</div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>  {</div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span>    ADLER32 = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aaff8570a8cd87fb288946c4465077c8d">adler32</a>(in, (<span class="keywordtype">unsigned</span>)insize);</div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>    <span class="keywordflow">for</span>(i = 0; i &lt; deflatedata.<a class="code hl_variable" href="structucvector.html#a27c99c34de0c5b3ca0c242d402c69499">size</a>; i++) <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(&amp;outv, deflatedata.<a class="code hl_variable" href="structucvector.html#a803973058c172963314ff05217b57d60">data</a>[i]);</div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>    <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad689bf84470238e26b01524631d778ec">ucvector_cleanup</a>(&amp;deflatedata);</div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span>    <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a66240228e12afb19529ad1dff8469f58">LodeZlib_add32bitInt</a>(&amp;outv, ADLER32);</div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span>  }</div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span> </div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span>  *<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a> = outv.<a class="code hl_variable" href="structucvector.html#a803973058c172963314ff05217b57d60">data</a>;</div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span>  *outsize = outv.<a class="code hl_variable" href="structucvector.html#a27c99c34de0c5b3ca0c242d402c69499">size</a>;</div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span> </div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>  <span class="keywordflow">return</span> error;</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span>}</div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span> </div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span> </div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#aa3c00d6565b6bf50aa7e68516941da40"> 1309</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa3c00d6565b6bf50aa7e68516941da40">LodeZlib_DeflateSettings_init</a>(<a class="code hl_struct" href="struct_lode_zlib___deflate_settings.html">LodeZlib_DeflateSettings</a>* settings)</div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span>{</div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span>  settings-&gt;<a class="code hl_variable" href="struct_lode_zlib___deflate_settings.html#a9a016a3b62b8efae335eb585f7f40cfd">btype</a> = 2; <span class="comment">/*compress with dynamic huffman tree (not in the mathematical sense, just not the predefined one)*/</span></div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>  settings-&gt;<a class="code hl_variable" href="struct_lode_zlib___deflate_settings.html#a71f933aad07b4d940716c7873c771c95">useLZ77</a> = 1;</div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>  settings-&gt;<a class="code hl_variable" href="struct_lode_zlib___deflate_settings.html#ab4db0ff77376a9a8b9af7f85cafc6028">windowSize</a> = 2048; <span class="comment">/*this is a good tradeoff between speed and compression ratio*/</span></div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span>}</div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span> </div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span><span class="comment">/* // End of Zlib related code, now comes the PNG related code that uses it// */</span></div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span> </div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span><span class="comment">/*</span></div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span><span class="comment">The two functions below (LodePNG_decompress and LodePNG_compress) directly call the</span></div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span><span class="comment">LodeZlib_decompress and LodeZlib_compress functions. The only purpose of the functions</span></div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span><span class="comment">below, is to provide the ability to let LodePNG use a different Zlib encoder by only</span></div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span><span class="comment">changing the two functions below, instead of changing it inside the various places</span></div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span><span class="comment">in the other LodePNG functions.</span></div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span><span class="comment"></span> </div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span><span class="comment">*out must be NULL and *outsize must be 0 initially, and after the function is done,</span></div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span><span class="comment">*out must point to the decompressed data, *outsize must be the size of it, and must</span></div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span><span class="comment">be the size of the useful data in bytes, not the alloc size.</span></div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span><span class="comment">*/</span></div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span> </div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a2ddf4171e45f147a48c3de7d8ee14f6f"> 1340</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a2ddf4171e45f147a48c3de7d8ee14f6f">LodePNG_compress</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>** <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="keywordtype">size_t</span>* outsize, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* in, <span class="keywordtype">size_t</span> insize, <span class="keyword">const</span> <a class="code hl_struct" href="struct_lode_zlib___deflate_settings.html">LodeZlib_DeflateSettings</a>* settings)</div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span>{</div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a419dd192a4197c45bd6613d62fb29a0a">LodeZlib_compress</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, outsize, in, insize, settings);</div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>}</div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span> </div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span><span class="comment">/* / CRC32                                                                  / */</span></div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span> </div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#ac961612365e0c5c5633e7b88d8ade52f"> 1349</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#ac961612365e0c5c5633e7b88d8ade52f">Crc32_crc_table_computed</a> = 0;</div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#aca8bfab1ea1377cbd8172773f56ab4d3"> 1350</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#aca8bfab1ea1377cbd8172773f56ab4d3">Crc32_crc_table</a>[256];</div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span> </div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span><span class="comment">/*Make the table for a fast CRC.*/</span></div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a529a3f16b5cab45e0940809399e07c6f"> 1353</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a529a3f16b5cab45e0940809399e07c6f">Crc32_make_crc_table</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span>{</div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>, k, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a>;</div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span>  <span class="keywordflow">for</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a> = 0; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a> &lt; 256; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a>++)</div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span>  {</div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span>    <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a> = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a>;</div>
<div class="line"><a id="l01359" name="l01359"></a><span class="lineno"> 1359</span>    <span class="keywordflow">for</span>(k = 0; k &lt; 8; k++)</div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"> 1360</span>    {</div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span>      <span class="keywordflow">if</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a> &amp; 1) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a> = (<span class="keywordtype">unsigned</span> int)(0xedb88320L ^ (<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a> &gt;&gt; 1));</div>
<div class="line"><a id="l01362" name="l01362"></a><span class="lineno"> 1362</span>      <span class="keywordflow">else</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a> = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a> &gt;&gt; 1;</div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span>    }</div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span>    <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#aca8bfab1ea1377cbd8172773f56ab4d3">Crc32_crc_table</a>[<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a>] = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>;</div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>  }</div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span>  <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#ac961612365e0c5c5633e7b88d8ade52f">Crc32_crc_table_computed</a> = 1;</div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>}</div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span> </div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span><span class="comment">/*Update a running CRC with the bytes buf[0..len-1]--the CRC should be</span></div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span><span class="comment">initialized to all 1&#39;s, and the transmitted value is the 1&#39;s complement of the</span></div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span><span class="comment">final running CRC (see the crc() routine below).*/</span></div>
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#aa3df75b8dd02addb3ab313a22bc85cd9"> 1372</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa3df75b8dd02addb3ab313a22bc85cd9">Crc32_update_crc</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* buf, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> crc, <span class="keywordtype">size_t</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#afed088663f8704004425cdae2120b9b3">len</a>)</div>
<div class="line"><a id="l01373" name="l01373"></a><span class="lineno"> 1373</span>{</div>
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"> 1374</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a> = crc;</div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span>  <span class="keywordtype">size_t</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a>;</div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span> </div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span>  <span class="keywordflow">if</span>(!<a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#ac961612365e0c5c5633e7b88d8ade52f">Crc32_crc_table_computed</a>) <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a529a3f16b5cab45e0940809399e07c6f">Crc32_make_crc_table</a>();</div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span>  <span class="keywordflow">for</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a> = 0; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a> &lt; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#afed088663f8704004425cdae2120b9b3">len</a>; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a>++)</div>
<div class="line"><a id="l01379" name="l01379"></a><span class="lineno"> 1379</span>  {</div>
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"> 1380</span>    <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a> = <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#aca8bfab1ea1377cbd8172773f56ab4d3">Crc32_crc_table</a>[(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a> ^ buf[<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a>]) &amp; 0xff] ^ (<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a> &gt;&gt; 8);</div>
<div class="line"><a id="l01381" name="l01381"></a><span class="lineno"> 1381</span>  }</div>
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"> 1382</span>  <span class="keywordflow">return</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>;</div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span>}</div>
<div class="line"><a id="l01384" name="l01384"></a><span class="lineno"> 1384</span> </div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span><span class="comment">/*Return the CRC of the bytes buf[0..len-1].*/</span></div>
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#aac2094ad000d8ec77a7dfe2e221ce551"> 1386</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aac2094ad000d8ec77a7dfe2e221ce551">Crc32_crc</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* buf, <span class="keywordtype">size_t</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#afed088663f8704004425cdae2120b9b3">len</a>)</div>
<div class="line"><a id="l01387" name="l01387"></a><span class="lineno"> 1387</span>{</div>
<div class="line"><a id="l01388" name="l01388"></a><span class="lineno"> 1388</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa3df75b8dd02addb3ab313a22bc85cd9">Crc32_update_crc</a>(buf, 0xffffffffu, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#afed088663f8704004425cdae2120b9b3">len</a>) ^ 0xffffffffu;</div>
<div class="line"><a id="l01389" name="l01389"></a><span class="lineno"> 1389</span>}</div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span> </div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span><span class="comment">/* / Reading and writing single bits and bytes from/to stream for LodePNG   / */</span></div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"> 1393</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"> 1394</span> </div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#aa65d1743dade2919f44301461bde054d"> 1395</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa65d1743dade2919f44301461bde054d">readBitFromReversedStream</a>(<span class="keywordtype">size_t</span>* bitpointer, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* bitstream)</div>
<div class="line"><a id="l01396" name="l01396"></a><span class="lineno"> 1396</span>{</div>
<div class="line"><a id="l01397" name="l01397"></a><span class="lineno"> 1397</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> result = (<span class="keywordtype">unsigned</span> char)((bitstream[(*bitpointer) &gt;&gt; 3] &gt;&gt; (7 - ((*bitpointer) &amp; 0x7))) &amp; 1);</div>
<div class="line"><a id="l01398" name="l01398"></a><span class="lineno"> 1398</span>  (*bitpointer)++;</div>
<div class="line"><a id="l01399" name="l01399"></a><span class="lineno"> 1399</span>  <span class="keywordflow">return</span> result;</div>
<div class="line"><a id="l01400" name="l01400"></a><span class="lineno"> 1400</span>}</div>
<div class="line"><a id="l01401" name="l01401"></a><span class="lineno"> 1401</span> </div>
<div class="line"><a id="l01402" name="l01402"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a25ac892793826b6ab7542b32dda29739"> 1402</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a25ac892793826b6ab7542b32dda29739">readBitsFromReversedStream</a>(<span class="keywordtype">size_t</span>* bitpointer, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* bitstream, <span class="keywordtype">size_t</span> nbits)</div>
<div class="line"><a id="l01403" name="l01403"></a><span class="lineno"> 1403</span>{</div>
<div class="line"><a id="l01404" name="l01404"></a><span class="lineno"> 1404</span>  <span class="keywordtype">unsigned</span> result = 0;</div>
<div class="line"><a id="l01405" name="l01405"></a><span class="lineno"> 1405</span>  <span class="keywordtype">size_t</span> i;</div>
<div class="line"><a id="l01406" name="l01406"></a><span class="lineno"> 1406</span>  <span class="keywordflow">for</span>(i = nbits - 1; i &lt; nbits; i--) result += (<span class="keywordtype">unsigned</span>)<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa65d1743dade2919f44301461bde054d">readBitFromReversedStream</a>(bitpointer, bitstream) &lt;&lt; i;</div>
<div class="line"><a id="l01407" name="l01407"></a><span class="lineno"> 1407</span>  <span class="keywordflow">return</span> result;</div>
<div class="line"><a id="l01408" name="l01408"></a><span class="lineno"> 1408</span>}</div>
<div class="line"><a id="l01409" name="l01409"></a><span class="lineno"> 1409</span> </div>
<div class="line"><a id="l01410" name="l01410"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#afab63835fa156b812c454a4a96b7b28b"> 1410</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#afab63835fa156b812c454a4a96b7b28b">setBitOfReversedStream</a>(<span class="keywordtype">size_t</span>* bitpointer, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* bitstream, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> bit)</div>
<div class="line"><a id="l01411" name="l01411"></a><span class="lineno"> 1411</span>{</div>
<div class="line"><a id="l01412" name="l01412"></a><span class="lineno"> 1412</span>  <span class="comment">/*the current bit in bitstream may be 0 or 1 for this to work*/</span></div>
<div class="line"><a id="l01413" name="l01413"></a><span class="lineno"> 1413</span>  <span class="keywordflow">if</span>(bit == 0) bitstream[(*bitpointer) &gt;&gt; 3] &amp;=  (<span class="keywordtype">unsigned</span> char)(~(1 &lt;&lt; (7 - ((*bitpointer) &amp; 0x7))));</div>
<div class="line"><a id="l01414" name="l01414"></a><span class="lineno"> 1414</span>  <span class="keywordflow">else</span> bitstream[(*bitpointer) &gt;&gt; 3] |=  (1 &lt;&lt; (7 - ((*bitpointer) &amp; 0x7)));</div>
<div class="line"><a id="l01415" name="l01415"></a><span class="lineno"> 1415</span>  (*bitpointer)++;</div>
<div class="line"><a id="l01416" name="l01416"></a><span class="lineno"> 1416</span>}</div>
<div class="line"><a id="l01417" name="l01417"></a><span class="lineno"> 1417</span> </div>
<div class="line"><a id="l01418" name="l01418"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a6090accee58d525f8ed01bcb3a779080"> 1418</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a6090accee58d525f8ed01bcb3a779080">LodePNG_read32bitInt</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* buffer)</div>
<div class="line"><a id="l01419" name="l01419"></a><span class="lineno"> 1419</span>{</div>
<div class="line"><a id="l01420" name="l01420"></a><span class="lineno"> 1420</span>  <span class="keywordflow">return</span> (buffer[0] &lt;&lt; 24) | (buffer[1] &lt;&lt; 16) | (buffer[2] &lt;&lt; 8) | buffer[3];</div>
<div class="line"><a id="l01421" name="l01421"></a><span class="lineno"> 1421</span>}</div>
<div class="line"><a id="l01422" name="l01422"></a><span class="lineno"> 1422</span> </div>
<div class="line"><a id="l01423" name="l01423"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#aaea176486e1e119fd7b742f8c7049104"> 1423</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aaea176486e1e119fd7b742f8c7049104">LodePNG_set32bitInt</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* buffer, <span class="keywordtype">unsigned</span> value) <span class="comment">/*buffer must have at least 4 allocated bytes available*/</span></div>
<div class="line"><a id="l01424" name="l01424"></a><span class="lineno"> 1424</span>{</div>
<div class="line"><a id="l01425" name="l01425"></a><span class="lineno"> 1425</span>  buffer[0] = (<span class="keywordtype">unsigned</span> char)((value &gt;&gt; 24) &amp; 0xff);</div>
<div class="line"><a id="l01426" name="l01426"></a><span class="lineno"> 1426</span>  buffer[1] = (<span class="keywordtype">unsigned</span> char)((value &gt;&gt; 16) &amp; 0xff);</div>
<div class="line"><a id="l01427" name="l01427"></a><span class="lineno"> 1427</span>  buffer[2] = (<span class="keywordtype">unsigned</span> char)((value &gt;&gt;  8) &amp; 0xff);</div>
<div class="line"><a id="l01428" name="l01428"></a><span class="lineno"> 1428</span>  buffer[3] = (<span class="keywordtype">unsigned</span> char)((value      ) &amp; 0xff);</div>
<div class="line"><a id="l01429" name="l01429"></a><span class="lineno"> 1429</span>}</div>
<div class="line"><a id="l01430" name="l01430"></a><span class="lineno"> 1430</span> </div>
<div class="line"><a id="l01431" name="l01431"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a916c52418acebce22bcc2ad10af2b3b7"> 1431</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a916c52418acebce22bcc2ad10af2b3b7">LodePNG_add32bitInt</a>(<a class="code hl_struct" href="structucvector.html">ucvector</a>* buffer, <span class="keywordtype">unsigned</span> value)</div>
<div class="line"><a id="l01432" name="l01432"></a><span class="lineno"> 1432</span>{</div>
<div class="line"><a id="l01433" name="l01433"></a><span class="lineno"> 1433</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ae4e2da90ae4abb858852f211eb28d622">ucvector_resize</a>(buffer, buffer-&gt;<a class="code hl_variable" href="structucvector.html#a27c99c34de0c5b3ca0c242d402c69499">size</a> + 4);</div>
<div class="line"><a id="l01434" name="l01434"></a><span class="lineno"> 1434</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aaea176486e1e119fd7b742f8c7049104">LodePNG_set32bitInt</a>(&amp;buffer-&gt;<a class="code hl_variable" href="structucvector.html#a803973058c172963314ff05217b57d60">data</a>[buffer-&gt;<a class="code hl_variable" href="structucvector.html#a27c99c34de0c5b3ca0c242d402c69499">size</a> - 4], value);</div>
<div class="line"><a id="l01435" name="l01435"></a><span class="lineno"> 1435</span>}</div>
<div class="line"><a id="l01436" name="l01436"></a><span class="lineno"> 1436</span> </div>
<div class="line"><a id="l01437" name="l01437"></a><span class="lineno"> 1437</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01438" name="l01438"></a><span class="lineno"> 1438</span><span class="comment">/* / PNG chunks                                                             / */</span></div>
<div class="line"><a id="l01439" name="l01439"></a><span class="lineno"> 1439</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01440" name="l01440"></a><span class="lineno"> 1440</span> </div>
<div class="line"><a id="l01441" name="l01441"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a577f65d65db51767f90c7b4beba030f5"> 1441</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a577f65d65db51767f90c7b4beba030f5">LodePNG_chunk_length</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* chunk) <span class="comment">/*get the length of the data of the chunk. Total chunk length has 12 bytes more.*/</span></div>
<div class="line"><a id="l01442" name="l01442"></a><span class="lineno"> 1442</span>{</div>
<div class="line"><a id="l01443" name="l01443"></a><span class="lineno"> 1443</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a6090accee58d525f8ed01bcb3a779080">LodePNG_read32bitInt</a>(&amp;chunk[0]);</div>
<div class="line"><a id="l01444" name="l01444"></a><span class="lineno"> 1444</span>}</div>
<div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span> </div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a8568c3c7e48c2e58919f60ffcbe0d90c"> 1446</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a8568c3c7e48c2e58919f60ffcbe0d90c">LodePNG_chunk_generate_crc</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* chunk) <span class="comment">/*generates the correct CRC from the data and puts it in the last 4 bytes of the chunk*/</span></div>
<div class="line"><a id="l01447" name="l01447"></a><span class="lineno"> 1447</span>{</div>
<div class="line"><a id="l01448" name="l01448"></a><span class="lineno"> 1448</span>  <span class="keywordtype">unsigned</span> length = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a577f65d65db51767f90c7b4beba030f5">LodePNG_chunk_length</a>(chunk);</div>
<div class="line"><a id="l01449" name="l01449"></a><span class="lineno"> 1449</span>  <span class="keywordtype">unsigned</span> CRC = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aac2094ad000d8ec77a7dfe2e221ce551">Crc32_crc</a>(&amp;chunk[4], length + 4);</div>
<div class="line"><a id="l01450" name="l01450"></a><span class="lineno"> 1450</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aaea176486e1e119fd7b742f8c7049104">LodePNG_set32bitInt</a>(chunk + 8 + length, CRC);</div>
<div class="line"><a id="l01451" name="l01451"></a><span class="lineno"> 1451</span>}</div>
<div class="line"><a id="l01452" name="l01452"></a><span class="lineno"> 1452</span> </div>
<div class="line"><a id="l01453" name="l01453"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#ab2054e40f6c26aed0a0e618035d66190"> 1453</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ab2054e40f6c26aed0a0e618035d66190">LodePNG_create_chunk</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>** <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="keywordtype">size_t</span>* outlength, <span class="keywordtype">unsigned</span> length, <span class="keyword">const</span> <span class="keywordtype">char</span>* type, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>) <span class="comment">/*appends new chunk to out. Returns error code; may change memory address of out buffer*/</span></div>
<div class="line"><a id="l01454" name="l01454"></a><span class="lineno"> 1454</span>{</div>
<div class="line"><a id="l01455" name="l01455"></a><span class="lineno"> 1455</span>  <span class="keywordtype">unsigned</span> i;</div>
<div class="line"><a id="l01456" name="l01456"></a><span class="lineno"> 1456</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *chunk, *new_buffer;</div>
<div class="line"><a id="l01457" name="l01457"></a><span class="lineno"> 1457</span>  <span class="keywordtype">size_t</span> new_length = (*outlength) + length + 12;</div>
<div class="line"><a id="l01458" name="l01458"></a><span class="lineno"> 1458</span>  <span class="keywordflow">if</span>(new_length &lt; length + 12 || new_length &lt; (*outlength)) <span class="keywordflow">return</span> 77; <span class="comment">/*integer overflow happened*/</span></div>
<div class="line"><a id="l01459" name="l01459"></a><span class="lineno"> 1459</span>  new_buffer = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)realloc(*<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, new_length);</div>
<div class="line"><a id="l01460" name="l01460"></a><span class="lineno"> 1460</span>  <span class="keywordflow">if</span>(!new_buffer) <span class="keywordflow">return</span> 9930;</div>
<div class="line"><a id="l01461" name="l01461"></a><span class="lineno"> 1461</span>  (*out) = new_buffer;</div>
<div class="line"><a id="l01462" name="l01462"></a><span class="lineno"> 1462</span>  (*outlength) = new_length;</div>
<div class="line"><a id="l01463" name="l01463"></a><span class="lineno"> 1463</span>  chunk = &amp;(*out)[(*outlength) - length - 12];</div>
<div class="line"><a id="l01464" name="l01464"></a><span class="lineno"> 1464</span> </div>
<div class="line"><a id="l01465" name="l01465"></a><span class="lineno"> 1465</span>  <span class="comment">/*1: length*/</span></div>
<div class="line"><a id="l01466" name="l01466"></a><span class="lineno"> 1466</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aaea176486e1e119fd7b742f8c7049104">LodePNG_set32bitInt</a>(chunk, (<span class="keywordtype">unsigned</span>)length);</div>
<div class="line"><a id="l01467" name="l01467"></a><span class="lineno"> 1467</span> </div>
<div class="line"><a id="l01468" name="l01468"></a><span class="lineno"> 1468</span>  <span class="comment">/*2: chunk name (4 letters)*/</span></div>
<div class="line"><a id="l01469" name="l01469"></a><span class="lineno"> 1469</span>  chunk[4] = type[0];</div>
<div class="line"><a id="l01470" name="l01470"></a><span class="lineno"> 1470</span>  chunk[5] = type[1];</div>
<div class="line"><a id="l01471" name="l01471"></a><span class="lineno"> 1471</span>  chunk[6] = type[2];</div>
<div class="line"><a id="l01472" name="l01472"></a><span class="lineno"> 1472</span>  chunk[7] = type[3];</div>
<div class="line"><a id="l01473" name="l01473"></a><span class="lineno"> 1473</span> </div>
<div class="line"><a id="l01474" name="l01474"></a><span class="lineno"> 1474</span>  <span class="comment">/*3: the data*/</span></div>
<div class="line"><a id="l01475" name="l01475"></a><span class="lineno"> 1475</span>  <span class="keywordflow">for</span>(i = 0; i &lt; length; i++) chunk[8 + i] = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>[i];</div>
<div class="line"><a id="l01476" name="l01476"></a><span class="lineno"> 1476</span> </div>
<div class="line"><a id="l01477" name="l01477"></a><span class="lineno"> 1477</span>  <span class="comment">/*4: CRC (of the chunkname characters and the data)*/</span></div>
<div class="line"><a id="l01478" name="l01478"></a><span class="lineno"> 1478</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a8568c3c7e48c2e58919f60ffcbe0d90c">LodePNG_chunk_generate_crc</a>(chunk);</div>
<div class="line"><a id="l01479" name="l01479"></a><span class="lineno"> 1479</span> </div>
<div class="line"><a id="l01480" name="l01480"></a><span class="lineno"> 1480</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01481" name="l01481"></a><span class="lineno"> 1481</span>}</div>
<div class="line"><a id="l01482" name="l01482"></a><span class="lineno"> 1482</span> </div>
<div class="line"><a id="l01483" name="l01483"></a><span class="lineno"> 1483</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01484" name="l01484"></a><span class="lineno"> 1484</span><span class="comment">/* / Color types and such                                                   / */</span></div>
<div class="line"><a id="l01485" name="l01485"></a><span class="lineno"> 1485</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01486" name="l01486"></a><span class="lineno"> 1486</span> </div>
<div class="line"><a id="l01487" name="l01487"></a><span class="lineno"> 1487</span><span class="comment">/*return type is a LodePNG error code*/</span></div>
<div class="line"><a id="l01488" name="l01488"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a83a90dcbc8adcba8293158785d264bb8"> 1488</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a83a90dcbc8adcba8293158785d264bb8">checkColorValidity</a>(<span class="keywordtype">unsigned</span> colorType, <span class="keywordtype">unsigned</span> bd) <span class="comment">/*bd = bitDepth*/</span></div>
<div class="line"><a id="l01489" name="l01489"></a><span class="lineno"> 1489</span>{</div>
<div class="line"><a id="l01490" name="l01490"></a><span class="lineno"> 1490</span>  <span class="keywordflow">switch</span>(colorType)</div>
<div class="line"><a id="l01491" name="l01491"></a><span class="lineno"> 1491</span>  {</div>
<div class="line"><a id="l01492" name="l01492"></a><span class="lineno"> 1492</span>    <span class="keywordflow">case</span> 0: <span class="keywordflow">if</span>(!(bd == 1 || bd == 2 || bd == 4 || bd == 8 || bd == 16)) <span class="keywordflow">return</span> 37; <span class="keywordflow">break</span>; <span class="comment">/*grey*/</span></div>
<div class="line"><a id="l01493" name="l01493"></a><span class="lineno"> 1493</span>    <span class="keywordflow">case</span> 2: <span class="keywordflow">if</span>(!(                                 bd == 8 || bd == 16)) <span class="keywordflow">return</span> 37; <span class="keywordflow">break</span>; <span class="comment">/*RGB*/</span></div>
<div class="line"><a id="l01494" name="l01494"></a><span class="lineno"> 1494</span>    <span class="keywordflow">case</span> 3: <span class="keywordflow">if</span>(!(bd == 1 || bd == 2 || bd == 4 || bd == 8            )) <span class="keywordflow">return</span> 37; <span class="keywordflow">break</span>; <span class="comment">/*palette*/</span></div>
<div class="line"><a id="l01495" name="l01495"></a><span class="lineno"> 1495</span>    <span class="keywordflow">case</span> 4: <span class="keywordflow">if</span>(!(                                 bd == 8 || bd == 16)) <span class="keywordflow">return</span> 37; <span class="keywordflow">break</span>; <span class="comment">/*grey + alpha*/</span></div>
<div class="line"><a id="l01496" name="l01496"></a><span class="lineno"> 1496</span>    <span class="keywordflow">case</span> 6: <span class="keywordflow">if</span>(!(                                 bd == 8 || bd == 16)) <span class="keywordflow">return</span> 37; <span class="keywordflow">break</span>; <span class="comment">/*RGBA*/</span></div>
<div class="line"><a id="l01497" name="l01497"></a><span class="lineno"> 1497</span>    <span class="keywordflow">default</span>: <span class="keywordflow">return</span> 31;</div>
<div class="line"><a id="l01498" name="l01498"></a><span class="lineno"> 1498</span>  }</div>
<div class="line"><a id="l01499" name="l01499"></a><span class="lineno"> 1499</span>  <span class="keywordflow">return</span> 0; <span class="comment">/*allowed color type / bits combination*/</span></div>
<div class="line"><a id="l01500" name="l01500"></a><span class="lineno"> 1500</span>}</div>
<div class="line"><a id="l01501" name="l01501"></a><span class="lineno"> 1501</span> </div>
<div class="line"><a id="l01502" name="l01502"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a9255de3deb6a57a77c17f95f4609af08"> 1502</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a9255de3deb6a57a77c17f95f4609af08">getNumColorChannels</a>(<span class="keywordtype">unsigned</span> colorType)</div>
<div class="line"><a id="l01503" name="l01503"></a><span class="lineno"> 1503</span>{</div>
<div class="line"><a id="l01504" name="l01504"></a><span class="lineno"> 1504</span>  <span class="keywordflow">switch</span>(colorType)</div>
<div class="line"><a id="l01505" name="l01505"></a><span class="lineno"> 1505</span>  {</div>
<div class="line"><a id="l01506" name="l01506"></a><span class="lineno"> 1506</span>    <span class="keywordflow">case</span> 0: <span class="keywordflow">return</span> 1; <span class="comment">/*grey*/</span></div>
<div class="line"><a id="l01507" name="l01507"></a><span class="lineno"> 1507</span>    <span class="keywordflow">case</span> 2: <span class="keywordflow">return</span> 3; <span class="comment">/*RGB*/</span></div>
<div class="line"><a id="l01508" name="l01508"></a><span class="lineno"> 1508</span>    <span class="keywordflow">case</span> 3: <span class="keywordflow">return</span> 1; <span class="comment">/*palette*/</span></div>
<div class="line"><a id="l01509" name="l01509"></a><span class="lineno"> 1509</span>    <span class="keywordflow">case</span> 4: <span class="keywordflow">return</span> 2; <span class="comment">/*grey + alpha*/</span></div>
<div class="line"><a id="l01510" name="l01510"></a><span class="lineno"> 1510</span>    <span class="keywordflow">case</span> 6: <span class="keywordflow">return</span> 4; <span class="comment">/*RGBA*/</span></div>
<div class="line"><a id="l01511" name="l01511"></a><span class="lineno"> 1511</span>  }</div>
<div class="line"><a id="l01512" name="l01512"></a><span class="lineno"> 1512</span>  <span class="keywordflow">return</span> 0; <span class="comment">/*nonexistent color type*/</span></div>
<div class="line"><a id="l01513" name="l01513"></a><span class="lineno"> 1513</span>}</div>
<div class="line"><a id="l01514" name="l01514"></a><span class="lineno"> 1514</span> </div>
<div class="line"><a id="l01515" name="l01515"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a0b9c1a546cc75a5baa798087bbcbf63e"> 1515</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a0b9c1a546cc75a5baa798087bbcbf63e">getBpp</a>(<span class="keywordtype">unsigned</span> colorType, <span class="keywordtype">unsigned</span> bitDepth)</div>
<div class="line"><a id="l01516" name="l01516"></a><span class="lineno"> 1516</span>{</div>
<div class="line"><a id="l01517" name="l01517"></a><span class="lineno"> 1517</span>  <span class="keywordflow">return</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a9255de3deb6a57a77c17f95f4609af08">getNumColorChannels</a>(colorType) * bitDepth; <span class="comment">/*bits per pixel is amount of channels * bits per channel*/</span></div>
<div class="line"><a id="l01518" name="l01518"></a><span class="lineno"> 1518</span>}</div>
<div class="line"><a id="l01519" name="l01519"></a><span class="lineno"> 1519</span> </div>
<div class="line"><a id="l01520" name="l01520"></a><span class="lineno"> 1520</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01521" name="l01521"></a><span class="lineno"> 1521</span> </div>
<div class="line"><a id="l01522" name="l01522"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#ad45000e15d57d532451035d170b5d455"> 1522</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad45000e15d57d532451035d170b5d455">LodePNG_InfoColor_init</a>(<a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* info)</div>
<div class="line"><a id="l01523" name="l01523"></a><span class="lineno"> 1523</span>{</div>
<div class="line"><a id="l01524" name="l01524"></a><span class="lineno"> 1524</span>  info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#aa0193ce13025c776a0dfb1e6d1bed14a">key_defined</a> = 0;</div>
<div class="line"><a id="l01525" name="l01525"></a><span class="lineno"> 1525</span>  info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a5536a8859201cd11df789ec7ad8263df">key_r</a> = info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a44bf4906335328972acebd6c8b83a073">key_g</a> = info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9f99cc5b4366f1eed325d13b4f191560">key_b</a> = 0;</div>
<div class="line"><a id="l01526" name="l01526"></a><span class="lineno"> 1526</span>  info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> = 6;</div>
<div class="line"><a id="l01527" name="l01527"></a><span class="lineno"> 1527</span>  info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">bitDepth</a> = 8;</div>
<div class="line"><a id="l01528" name="l01528"></a><span class="lineno"> 1528</span>  info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a3b3862dd05e3f9f0bd9e95741d49e266">palette</a> = 0;</div>
<div class="line"><a id="l01529" name="l01529"></a><span class="lineno"> 1529</span>  info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a49842a304ffd0abc8aa791030c5fa5dd">palettesize</a> = 0;</div>
<div class="line"><a id="l01530" name="l01530"></a><span class="lineno"> 1530</span>}</div>
<div class="line"><a id="l01531" name="l01531"></a><span class="lineno"> 1531</span> </div>
<div class="line"><a id="l01532" name="l01532"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a956b1e6db2786d2aca4cca539a8f1a97"> 1532</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a956b1e6db2786d2aca4cca539a8f1a97">LodePNG_InfoColor_cleanup</a>(<a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* info)</div>
<div class="line"><a id="l01533" name="l01533"></a><span class="lineno"> 1533</span>{</div>
<div class="line"><a id="l01534" name="l01534"></a><span class="lineno"> 1534</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a56486ddd00ee16b5c21e98b8987b4e16">LodePNG_InfoColor_clearPalette</a>(info);</div>
<div class="line"><a id="l01535" name="l01535"></a><span class="lineno"> 1535</span>}</div>
<div class="line"><a id="l01536" name="l01536"></a><span class="lineno"> 1536</span> </div>
<div class="line"><a id="l01537" name="l01537"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a56486ddd00ee16b5c21e98b8987b4e16"> 1537</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a56486ddd00ee16b5c21e98b8987b4e16">LodePNG_InfoColor_clearPalette</a>(<a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* info)</div>
<div class="line"><a id="l01538" name="l01538"></a><span class="lineno"> 1538</span>{</div>
<div class="line"><a id="l01539" name="l01539"></a><span class="lineno"> 1539</span>  <span class="keywordflow">if</span>(info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a3b3862dd05e3f9f0bd9e95741d49e266">palette</a>) free(info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a3b3862dd05e3f9f0bd9e95741d49e266">palette</a>);</div>
<div class="line"><a id="l01540" name="l01540"></a><span class="lineno"> 1540</span>  info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a49842a304ffd0abc8aa791030c5fa5dd">palettesize</a> = 0;</div>
<div class="line"><a id="l01541" name="l01541"></a><span class="lineno"> 1541</span>}</div>
<div class="line"><a id="l01542" name="l01542"></a><span class="lineno"> 1542</span> </div>
<div class="line"><a id="l01543" name="l01543"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#af062c1db1f9e18f47aa2d9a86651dea3"> 1543</a></span><span class="keywordtype">unsigned</span> <a class="code hl_function" href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#af062c1db1f9e18f47aa2d9a86651dea3">LodePNG_InfoColor_addPalette</a>(<a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* info, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acab531abaa74a7e664e3986f2522b33a">r</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a16304bc747437a168e633f9186eed1bf">g</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#aadf2a4297af25f4a140ea29500e8d47d">b</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ae1c02e9f36a12e377487affe87df4bb6">a</a>)</div>
<div class="line"><a id="l01544" name="l01544"></a><span class="lineno"> 1544</span>{</div>
<div class="line"><a id="l01545" name="l01545"></a><span class="lineno"> 1545</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>;</div>
<div class="line"><a id="l01546" name="l01546"></a><span class="lineno"> 1546</span>  <span class="comment">/*the same resize technique as C++ std::vectors is used, and here it&#39;s made so that for a palette with the max of 256 colors, it&#39;ll have the exact alloc size*/</span></div>
<div class="line"><a id="l01547" name="l01547"></a><span class="lineno"> 1547</span>  <span class="keywordflow">if</span>(!(info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a49842a304ffd0abc8aa791030c5fa5dd">palettesize</a> &amp; (info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a49842a304ffd0abc8aa791030c5fa5dd">palettesize</a> - 1))) <span class="comment">/*if palettesize is 0 or a power of two*/</span></div>
<div class="line"><a id="l01548" name="l01548"></a><span class="lineno"> 1548</span>  {</div>
<div class="line"><a id="l01549" name="l01549"></a><span class="lineno"> 1549</span>    <span class="comment">/*allocated data must be at least 4* palettesize (for 4 color bytes)*/</span></div>
<div class="line"><a id="l01550" name="l01550"></a><span class="lineno"> 1550</span>    <span class="keywordtype">size_t</span> alloc_size = info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a49842a304ffd0abc8aa791030c5fa5dd">palettesize</a> == 0 ? 4 : info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a49842a304ffd0abc8aa791030c5fa5dd">palettesize</a> * 4 * 2;</div>
<div class="line"><a id="l01551" name="l01551"></a><span class="lineno"> 1551</span>    <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)realloc(info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a3b3862dd05e3f9f0bd9e95741d49e266">palette</a>, alloc_size);</div>
<div class="line"><a id="l01552" name="l01552"></a><span class="lineno"> 1552</span>    <span class="keywordflow">if</span>(!<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>) <span class="keywordflow">return</span> 9931;</div>
<div class="line"><a id="l01553" name="l01553"></a><span class="lineno"> 1553</span>    <span class="keywordflow">else</span> info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a3b3862dd05e3f9f0bd9e95741d49e266">palette</a> = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>;</div>
<div class="line"><a id="l01554" name="l01554"></a><span class="lineno"> 1554</span>  }</div>
<div class="line"><a id="l01555" name="l01555"></a><span class="lineno"> 1555</span>  info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a3b3862dd05e3f9f0bd9e95741d49e266">palette</a>[4 * info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a49842a304ffd0abc8aa791030c5fa5dd">palettesize</a> + 0] = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acab531abaa74a7e664e3986f2522b33a">r</a>;</div>
<div class="line"><a id="l01556" name="l01556"></a><span class="lineno"> 1556</span>  info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a3b3862dd05e3f9f0bd9e95741d49e266">palette</a>[4 * info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a49842a304ffd0abc8aa791030c5fa5dd">palettesize</a> + 1] = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a16304bc747437a168e633f9186eed1bf">g</a>;</div>
<div class="line"><a id="l01557" name="l01557"></a><span class="lineno"> 1557</span>  info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a3b3862dd05e3f9f0bd9e95741d49e266">palette</a>[4 * info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a49842a304ffd0abc8aa791030c5fa5dd">palettesize</a> + 2] = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#aadf2a4297af25f4a140ea29500e8d47d">b</a>;</div>
<div class="line"><a id="l01558" name="l01558"></a><span class="lineno"> 1558</span>  info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a3b3862dd05e3f9f0bd9e95741d49e266">palette</a>[4 * info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a49842a304ffd0abc8aa791030c5fa5dd">palettesize</a> + 3] = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ae1c02e9f36a12e377487affe87df4bb6">a</a>;</div>
<div class="line"><a id="l01559" name="l01559"></a><span class="lineno"> 1559</span>  info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a49842a304ffd0abc8aa791030c5fa5dd">palettesize</a>++;</div>
<div class="line"><a id="l01560" name="l01560"></a><span class="lineno"> 1560</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01561" name="l01561"></a><span class="lineno"> 1561</span>}</div>
<div class="line"><a id="l01562" name="l01562"></a><span class="lineno"> 1562</span> </div>
<div class="line"><a id="l01563" name="l01563"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a2ff4c2a69c357378cf11dfeca7383b31"> 1563</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a2ff4c2a69c357378cf11dfeca7383b31">LodePNG_InfoColor_getBpp</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* info) { <span class="keywordflow">return</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a0b9c1a546cc75a5baa798087bbcbf63e">getBpp</a>(info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a>, info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">bitDepth</a>); } <span class="comment">/*calculate bits per pixel out of colorType and bitDepth*/</span></div>
<div class="line"><a id="l01564" name="l01564"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a1c20c80bee9fe3e28394f231a11fed9b"> 1564</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a1c20c80bee9fe3e28394f231a11fed9b">LodePNG_InfoColor_isGreyscaleType</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* info) { <span class="keywordflow">return</span> info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> == 0 || info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> == 4; }</div>
<div class="line"><a id="l01565" name="l01565"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#af2722296a74620c6b9761b58ac58881d"> 1565</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#af2722296a74620c6b9761b58ac58881d">LodePNG_InfoColor_isAlphaType</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* info) { <span class="keywordflow">return</span> (info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> &amp; 4) != 0; }</div>
<div class="line"><a id="l01566" name="l01566"></a><span class="lineno"> 1566</span> </div>
<div class="line"><a id="l01567" name="l01567"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#afa9f9dc4d70561a39c15ccac3459e3de"> 1567</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#afa9f9dc4d70561a39c15ccac3459e3de">LodePNG_InfoColor_equal</a>(<span class="keyword">const</span> <a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* info1, <span class="keyword">const</span> <a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* info2)</div>
<div class="line"><a id="l01568" name="l01568"></a><span class="lineno"> 1568</span>{</div>
<div class="line"><a id="l01569" name="l01569"></a><span class="lineno"> 1569</span>  <span class="keywordflow">return</span> info1-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> == info2-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a></div>
<div class="line"><a id="l01570" name="l01570"></a><span class="lineno"> 1570</span>      &amp;&amp; info1-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">bitDepth</a>  == info2-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">bitDepth</a>; <span class="comment">/*palette and color key not compared*/</span></div>
<div class="line"><a id="l01571" name="l01571"></a><span class="lineno"> 1571</span>}</div>
<div class="line"><a id="l01572" name="l01572"></a><span class="lineno"> 1572</span> </div>
<div class="line"><a id="l01573" name="l01573"></a><span class="lineno"> 1573</span> </div>
<div class="line"><a id="l01574" name="l01574"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#ab7971f0b72f02afb5ce07151fc59d78d"> 1574</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ab7971f0b72f02afb5ce07151fc59d78d">LodePNG_InfoPng_init</a>(<a class="code hl_struct" href="struct_lode_p_n_g___info_png.html">LodePNG_InfoPng</a>* info)</div>
<div class="line"><a id="l01575" name="l01575"></a><span class="lineno"> 1575</span>{</div>
<div class="line"><a id="l01576" name="l01576"></a><span class="lineno"> 1576</span>  info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#a74be99b177b28f3178c02139c4b7f149">width</a> = info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#a4b87ec9649e7177af7a5f5e08e5bc491">height</a> = 0;</div>
<div class="line"><a id="l01577" name="l01577"></a><span class="lineno"> 1577</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad45000e15d57d532451035d170b5d455">LodePNG_InfoColor_init</a>(&amp;info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>);</div>
<div class="line"><a id="l01578" name="l01578"></a><span class="lineno"> 1578</span>  info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#ad261cbe064eb69a92638e880d99347ca">interlaceMethod</a> = 0;</div>
<div class="line"><a id="l01579" name="l01579"></a><span class="lineno"> 1579</span>  info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#a177065a8eeb66398a89ed93e7c2b2f50">compressionMethod</a> = 0;</div>
<div class="line"><a id="l01580" name="l01580"></a><span class="lineno"> 1580</span>  info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#a101ffbacd7026dad4ab062e984cecf17">filterMethod</a> = 0;</div>
<div class="line"><a id="l01581" name="l01581"></a><span class="lineno"> 1581</span>}</div>
<div class="line"><a id="l01582" name="l01582"></a><span class="lineno"> 1582</span> </div>
<div class="line"><a id="l01583" name="l01583"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a2236a6b7f7bc1c047658a40f24db2658"> 1583</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a2236a6b7f7bc1c047658a40f24db2658">LodePNG_InfoPng_cleanup</a>(<a class="code hl_struct" href="struct_lode_p_n_g___info_png.html">LodePNG_InfoPng</a>* info)</div>
<div class="line"><a id="l01584" name="l01584"></a><span class="lineno"> 1584</span>{</div>
<div class="line"><a id="l01585" name="l01585"></a><span class="lineno"> 1585</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a956b1e6db2786d2aca4cca539a8f1a97">LodePNG_InfoColor_cleanup</a>(&amp;info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>);</div>
<div class="line"><a id="l01586" name="l01586"></a><span class="lineno"> 1586</span>}</div>
<div class="line"><a id="l01587" name="l01587"></a><span class="lineno"> 1587</span> </div>
<div class="line"><a id="l01588" name="l01588"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#aab31a4b50678870f58d9b4fb90570dc6"> 1588</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aab31a4b50678870f58d9b4fb90570dc6">LodePNG_InfoPng_copy</a>(<a class="code hl_struct" href="struct_lode_p_n_g___info_png.html">LodePNG_InfoPng</a>* dest, <span class="keyword">const</span> <a class="code hl_struct" href="struct_lode_p_n_g___info_png.html">LodePNG_InfoPng</a>* source)</div>
<div class="line"><a id="l01589" name="l01589"></a><span class="lineno"> 1589</span>{</div>
<div class="line"><a id="l01590" name="l01590"></a><span class="lineno"> 1590</span>  <span class="keywordtype">unsigned</span> error = 0;</div>
<div class="line"><a id="l01591" name="l01591"></a><span class="lineno"> 1591</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a2236a6b7f7bc1c047658a40f24db2658">LodePNG_InfoPng_cleanup</a>(dest);</div>
<div class="line"><a id="l01592" name="l01592"></a><span class="lineno"> 1592</span>  *dest = *source;</div>
<div class="line"><a id="l01593" name="l01593"></a><span class="lineno"> 1593</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad45000e15d57d532451035d170b5d455">LodePNG_InfoColor_init</a>(&amp;dest-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>);</div>
<div class="line"><a id="l01594" name="l01594"></a><span class="lineno"> 1594</span>  error = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a6d1485ec2eeff62cfae05addb41e7baf">LodePNG_InfoColor_copy</a>(&amp;dest-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>, &amp;source-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>); <span class="keywordflow">if</span>(error) <span class="keywordflow">return</span> error;</div>
<div class="line"><a id="l01595" name="l01595"></a><span class="lineno"> 1595</span>  <span class="keywordflow">return</span> error;</div>
<div class="line"><a id="l01596" name="l01596"></a><span class="lineno"> 1596</span>}</div>
<div class="line"><a id="l01597" name="l01597"></a><span class="lineno"> 1597</span> </div>
<div class="line"><a id="l01598" name="l01598"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a6d1485ec2eeff62cfae05addb41e7baf"> 1598</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a6d1485ec2eeff62cfae05addb41e7baf">LodePNG_InfoColor_copy</a>(<a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* dest, <span class="keyword">const</span> <a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* source)</div>
<div class="line"><a id="l01599" name="l01599"></a><span class="lineno"> 1599</span>{</div>
<div class="line"><a id="l01600" name="l01600"></a><span class="lineno"> 1600</span>  <span class="keywordtype">size_t</span> i;</div>
<div class="line"><a id="l01601" name="l01601"></a><span class="lineno"> 1601</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a956b1e6db2786d2aca4cca539a8f1a97">LodePNG_InfoColor_cleanup</a>(dest);</div>
<div class="line"><a id="l01602" name="l01602"></a><span class="lineno"> 1602</span>  *dest = *source;</div>
<div class="line"><a id="l01603" name="l01603"></a><span class="lineno"> 1603</span>  dest-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a3b3862dd05e3f9f0bd9e95741d49e266">palette</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)malloc(source-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a49842a304ffd0abc8aa791030c5fa5dd">palettesize</a> * 4);</div>
<div class="line"><a id="l01604" name="l01604"></a><span class="lineno"> 1604</span>  <span class="keywordflow">if</span>(!dest-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a3b3862dd05e3f9f0bd9e95741d49e266">palette</a> &amp;&amp; source-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a49842a304ffd0abc8aa791030c5fa5dd">palettesize</a>) <span class="keywordflow">return</span> 9935;</div>
<div class="line"><a id="l01605" name="l01605"></a><span class="lineno"> 1605</span>  <span class="keywordflow">for</span>(i = 0; i &lt; source-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a49842a304ffd0abc8aa791030c5fa5dd">palettesize</a> * 4; i++) dest-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a3b3862dd05e3f9f0bd9e95741d49e266">palette</a>[i] = source-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a3b3862dd05e3f9f0bd9e95741d49e266">palette</a>[i];</div>
<div class="line"><a id="l01606" name="l01606"></a><span class="lineno"> 1606</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01607" name="l01607"></a><span class="lineno"> 1607</span>}</div>
<div class="line"><a id="l01608" name="l01608"></a><span class="lineno"> 1608</span> </div>
<div class="line"><a id="l01609" name="l01609"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a1aac734c511454ca4d3d05144695d7b4"> 1609</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a1aac734c511454ca4d3d05144695d7b4">LodePNG_InfoRaw_init</a>(<a class="code hl_struct" href="struct_lode_p_n_g___info_raw.html">LodePNG_InfoRaw</a>* info)</div>
<div class="line"><a id="l01610" name="l01610"></a><span class="lineno"> 1610</span>{</div>
<div class="line"><a id="l01611" name="l01611"></a><span class="lineno"> 1611</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad45000e15d57d532451035d170b5d455">LodePNG_InfoColor_init</a>(&amp;info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_raw.html#ae9fa1c020358980be41f861ab71589fb">color</a>);</div>
<div class="line"><a id="l01612" name="l01612"></a><span class="lineno"> 1612</span>}</div>
<div class="line"><a id="l01613" name="l01613"></a><span class="lineno"> 1613</span> </div>
<div class="line"><a id="l01614" name="l01614"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#aa460b4664eff1376c02a8d15ce6843ca"> 1614</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa460b4664eff1376c02a8d15ce6843ca">LodePNG_InfoRaw_cleanup</a>(<a class="code hl_struct" href="struct_lode_p_n_g___info_raw.html">LodePNG_InfoRaw</a>* info)</div>
<div class="line"><a id="l01615" name="l01615"></a><span class="lineno"> 1615</span>{</div>
<div class="line"><a id="l01616" name="l01616"></a><span class="lineno"> 1616</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a956b1e6db2786d2aca4cca539a8f1a97">LodePNG_InfoColor_cleanup</a>(&amp;info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_raw.html#ae9fa1c020358980be41f861ab71589fb">color</a>);</div>
<div class="line"><a id="l01617" name="l01617"></a><span class="lineno"> 1617</span>}</div>
<div class="line"><a id="l01618" name="l01618"></a><span class="lineno"> 1618</span> </div>
<div class="line"><a id="l01619" name="l01619"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a7c7a74518cbbfeade8e271556152b683"> 1619</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a7c7a74518cbbfeade8e271556152b683">LodePNG_InfoRaw_copy</a>(<a class="code hl_struct" href="struct_lode_p_n_g___info_raw.html">LodePNG_InfoRaw</a>* dest, <span class="keyword">const</span> <a class="code hl_struct" href="struct_lode_p_n_g___info_raw.html">LodePNG_InfoRaw</a>* source)</div>
<div class="line"><a id="l01620" name="l01620"></a><span class="lineno"> 1620</span>{</div>
<div class="line"><a id="l01621" name="l01621"></a><span class="lineno"> 1621</span>  <span class="keywordtype">unsigned</span> error = 0;</div>
<div class="line"><a id="l01622" name="l01622"></a><span class="lineno"> 1622</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa460b4664eff1376c02a8d15ce6843ca">LodePNG_InfoRaw_cleanup</a>(dest);</div>
<div class="line"><a id="l01623" name="l01623"></a><span class="lineno"> 1623</span>  *dest = *source;</div>
<div class="line"><a id="l01624" name="l01624"></a><span class="lineno"> 1624</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad45000e15d57d532451035d170b5d455">LodePNG_InfoColor_init</a>(&amp;dest-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_raw.html#ae9fa1c020358980be41f861ab71589fb">color</a>);</div>
<div class="line"><a id="l01625" name="l01625"></a><span class="lineno"> 1625</span>  error = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a6d1485ec2eeff62cfae05addb41e7baf">LodePNG_InfoColor_copy</a>(&amp;dest-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_raw.html#ae9fa1c020358980be41f861ab71589fb">color</a>, &amp;source-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_raw.html#ae9fa1c020358980be41f861ab71589fb">color</a>);</div>
<div class="line"><a id="l01626" name="l01626"></a><span class="lineno"> 1626</span>  <span class="keywordflow">return</span> error;</div>
<div class="line"><a id="l01627" name="l01627"></a><span class="lineno"> 1627</span>}</div>
<div class="line"><a id="l01628" name="l01628"></a><span class="lineno"> 1628</span> </div>
<div class="line"><a id="l01629" name="l01629"></a><span class="lineno"> 1629</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01630" name="l01630"></a><span class="lineno"> 1630</span> </div>
<div class="line"><a id="l01631" name="l01631"></a><span class="lineno"> 1631</span><span class="comment">/*</span></div>
<div class="line"><a id="l01632" name="l01632"></a><span class="lineno"> 1632</span><span class="comment">converts from any color type to 24-bit or 32-bit (later maybe more supported). return value = LodePNG error code</span></div>
<div class="line"><a id="l01633" name="l01633"></a><span class="lineno"> 1633</span><span class="comment">the out buffer must have (w * h * bpp + 7) / 8 bytes, where bpp is the bits per pixel of the output color type (LodePNG_InfoColor_getBpp)</span></div>
<div class="line"><a id="l01634" name="l01634"></a><span class="lineno"> 1634</span><span class="comment">for &lt; 8 bpp images, there may _not_ be padding bits at the end of scanlines.</span></div>
<div class="line"><a id="l01635" name="l01635"></a><span class="lineno"> 1635</span><span class="comment">*/</span></div>
<div class="line"><a id="l01636" name="l01636"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#aeb70a14a3e3d525bddd824f5aa6bffb8"> 1636</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aeb70a14a3e3d525bddd824f5aa6bffb8">LodePNG_convert</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* in, <a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* infoOut, <a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* infoIn, <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a>, <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a>)</div>
<div class="line"><a id="l01637" name="l01637"></a><span class="lineno"> 1637</span>{</div>
<div class="line"><a id="l01638" name="l01638"></a><span class="lineno"> 1638</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> numpixels = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a> * <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a>; <span class="comment">/*amount of pixels*/</span></div>
<div class="line"><a id="l01639" name="l01639"></a><span class="lineno"> 1639</span>  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> OUT_BYTES = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a2ff4c2a69c357378cf11dfeca7383b31">LodePNG_InfoColor_getBpp</a>(infoOut) / 8; <span class="comment">/*bytes per pixel in the output image*/</span></div>
<div class="line"><a id="l01640" name="l01640"></a><span class="lineno"> 1640</span>  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> OUT_ALPHA = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#af2722296a74620c6b9761b58ac58881d">LodePNG_InfoColor_isAlphaType</a>(infoOut); <span class="comment">/*use 8-bit alpha channel*/</span></div>
<div class="line"><a id="l01641" name="l01641"></a><span class="lineno"> 1641</span>  <span class="keywordtype">size_t</span> i, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>, bp = 0; <span class="comment">/*bitpointer, used by less-than-8-bit color types*/</span></div>
<div class="line"><a id="l01642" name="l01642"></a><span class="lineno"> 1642</span> </div>
<div class="line"><a id="l01643" name="l01643"></a><span class="lineno"> 1643</span>  <span class="comment">/*cases where in and out already have the same format*/</span></div>
<div class="line"><a id="l01644" name="l01644"></a><span class="lineno"> 1644</span>  <span class="keywordflow">if</span>(<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#afa9f9dc4d70561a39c15ccac3459e3de">LodePNG_InfoColor_equal</a>(infoIn, infoOut))</div>
<div class="line"><a id="l01645" name="l01645"></a><span class="lineno"> 1645</span>  {</div>
<div class="line"><a id="l01646" name="l01646"></a><span class="lineno"> 1646</span>    <span class="keywordtype">size_t</span> i, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a> = (<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a> * <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a> * <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a2ff4c2a69c357378cf11dfeca7383b31">LodePNG_InfoColor_getBpp</a>(infoIn) + 7) / 8;</div>
<div class="line"><a id="l01647" name="l01647"></a><span class="lineno"> 1647</span>    <span class="keywordflow">for</span>(i = 0; i &lt; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>; i++) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[i] = in[i];</div>
<div class="line"><a id="l01648" name="l01648"></a><span class="lineno"> 1648</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01649" name="l01649"></a><span class="lineno"> 1649</span>  }</div>
<div class="line"><a id="l01650" name="l01650"></a><span class="lineno"> 1650</span> </div>
<div class="line"><a id="l01651" name="l01651"></a><span class="lineno"> 1651</span>  <span class="keywordflow">if</span>((infoOut-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> == 2 || infoOut-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> == 6) &amp;&amp; infoOut-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">bitDepth</a> == 8)</div>
<div class="line"><a id="l01652" name="l01652"></a><span class="lineno"> 1652</span>  {</div>
<div class="line"><a id="l01653" name="l01653"></a><span class="lineno"> 1653</span>    <span class="keywordflow">if</span>(infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">bitDepth</a> == 8)</div>
<div class="line"><a id="l01654" name="l01654"></a><span class="lineno"> 1654</span>    {</div>
<div class="line"><a id="l01655" name="l01655"></a><span class="lineno"> 1655</span>      <span class="keywordflow">switch</span>(infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a>)</div>
<div class="line"><a id="l01656" name="l01656"></a><span class="lineno"> 1656</span>      {</div>
<div class="line"><a id="l01657" name="l01657"></a><span class="lineno"> 1657</span>        <span class="keywordflow">case</span> 0: <span class="comment">/*greyscale color*/</span></div>
<div class="line"><a id="l01658" name="l01658"></a><span class="lineno"> 1658</span>          <span class="keywordflow">for</span>(i = 0; i &lt; numpixels; i++)</div>
<div class="line"><a id="l01659" name="l01659"></a><span class="lineno"> 1659</span>          {</div>
<div class="line"><a id="l01660" name="l01660"></a><span class="lineno"> 1660</span>            <span class="keywordflow">if</span>(OUT_ALPHA) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 3] = 255;</div>
<div class="line"><a id="l01661" name="l01661"></a><span class="lineno"> 1661</span>            <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 0] = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 1] = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 2] = in[i];</div>
<div class="line"><a id="l01662" name="l01662"></a><span class="lineno"> 1662</span>            <span class="keywordflow">if</span>(OUT_ALPHA &amp;&amp; infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#aa0193ce13025c776a0dfb1e6d1bed14a">key_defined</a> &amp;&amp; in[i] == infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a5536a8859201cd11df789ec7ad8263df">key_r</a>) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 3] = 0;</div>
<div class="line"><a id="l01663" name="l01663"></a><span class="lineno"> 1663</span>          }</div>
<div class="line"><a id="l01664" name="l01664"></a><span class="lineno"> 1664</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01665" name="l01665"></a><span class="lineno"> 1665</span>        <span class="keywordflow">case</span> 2: <span class="comment">/*RGB color*/</span></div>
<div class="line"><a id="l01666" name="l01666"></a><span class="lineno"> 1666</span>          <span class="keywordflow">for</span>(i = 0; i &lt; numpixels; i++)</div>
<div class="line"><a id="l01667" name="l01667"></a><span class="lineno"> 1667</span>          {</div>
<div class="line"><a id="l01668" name="l01668"></a><span class="lineno"> 1668</span>            <span class="keywordflow">if</span>(OUT_ALPHA) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 3] = 255;</div>
<div class="line"><a id="l01669" name="l01669"></a><span class="lineno"> 1669</span>            <span class="keywordflow">for</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a> = 0; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a> &lt; 3; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>++) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>] = in[3 * i + <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>];</div>
<div class="line"><a id="l01670" name="l01670"></a><span class="lineno"> 1670</span>            <span class="keywordflow">if</span>(OUT_ALPHA &amp;&amp; infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#aa0193ce13025c776a0dfb1e6d1bed14a">key_defined</a> == 1 &amp;&amp; in[3 * i + 0] == infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a5536a8859201cd11df789ec7ad8263df">key_r</a> &amp;&amp; in[3 * i + 1] == infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a44bf4906335328972acebd6c8b83a073">key_g</a> &amp;&amp; in[3 * i + 2] == infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9f99cc5b4366f1eed325d13b4f191560">key_b</a>) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 3] = 0;</div>
<div class="line"><a id="l01671" name="l01671"></a><span class="lineno"> 1671</span>          }</div>
<div class="line"><a id="l01672" name="l01672"></a><span class="lineno"> 1672</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01673" name="l01673"></a><span class="lineno"> 1673</span>        <span class="keywordflow">case</span> 3: <span class="comment">/*indexed color (palette)*/</span></div>
<div class="line"><a id="l01674" name="l01674"></a><span class="lineno"> 1674</span>          <span class="keywordflow">for</span>(i = 0; i &lt; numpixels; i++)</div>
<div class="line"><a id="l01675" name="l01675"></a><span class="lineno"> 1675</span>          {</div>
<div class="line"><a id="l01676" name="l01676"></a><span class="lineno"> 1676</span>            <span class="keywordflow">if</span>(OUT_ALPHA) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 3] = 255;</div>
<div class="line"><a id="l01677" name="l01677"></a><span class="lineno"> 1677</span>            <span class="keywordflow">if</span>(in[i] &gt;= infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a49842a304ffd0abc8aa791030c5fa5dd">palettesize</a>) <span class="keywordflow">return</span> 46;</div>
<div class="line"><a id="l01678" name="l01678"></a><span class="lineno"> 1678</span>            <span class="keywordflow">for</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a> = 0; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a> &lt; OUT_BYTES; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>++) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>] = infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a3b3862dd05e3f9f0bd9e95741d49e266">palette</a>[4 * in[i] + <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>]; <span class="comment">/*get rgb colors from the palette*/</span></div>
<div class="line"><a id="l01679" name="l01679"></a><span class="lineno"> 1679</span>          }</div>
<div class="line"><a id="l01680" name="l01680"></a><span class="lineno"> 1680</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01681" name="l01681"></a><span class="lineno"> 1681</span>        <span class="keywordflow">case</span> 4: <span class="comment">/*greyscale with alpha*/</span></div>
<div class="line"><a id="l01682" name="l01682"></a><span class="lineno"> 1682</span>          <span class="keywordflow">for</span>(i = 0; i &lt; numpixels; i++)</div>
<div class="line"><a id="l01683" name="l01683"></a><span class="lineno"> 1683</span>          {</div>
<div class="line"><a id="l01684" name="l01684"></a><span class="lineno"> 1684</span>            <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 0] = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 1] = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 2] = in[2 * i + 0];</div>
<div class="line"><a id="l01685" name="l01685"></a><span class="lineno"> 1685</span>            <span class="keywordflow">if</span>(OUT_ALPHA) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 3] = in[2 * i + 1];</div>
<div class="line"><a id="l01686" name="l01686"></a><span class="lineno"> 1686</span>          }</div>
<div class="line"><a id="l01687" name="l01687"></a><span class="lineno"> 1687</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01688" name="l01688"></a><span class="lineno"> 1688</span>        <span class="keywordflow">case</span> 6: <span class="comment">/*RGB with alpha*/</span></div>
<div class="line"><a id="l01689" name="l01689"></a><span class="lineno"> 1689</span>          <span class="keywordflow">for</span>(i = 0; i &lt; numpixels; i++)</div>
<div class="line"><a id="l01690" name="l01690"></a><span class="lineno"> 1690</span>          {</div>
<div class="line"><a id="l01691" name="l01691"></a><span class="lineno"> 1691</span>            <span class="keywordflow">for</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a> = 0; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a> &lt; OUT_BYTES; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>++) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>] = in[4 * i + <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>];</div>
<div class="line"><a id="l01692" name="l01692"></a><span class="lineno"> 1692</span>          }</div>
<div class="line"><a id="l01693" name="l01693"></a><span class="lineno"> 1693</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01694" name="l01694"></a><span class="lineno"> 1694</span>        <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01695" name="l01695"></a><span class="lineno"> 1695</span>      }</div>
<div class="line"><a id="l01696" name="l01696"></a><span class="lineno"> 1696</span>    }</div>
<div class="line"><a id="l01697" name="l01697"></a><span class="lineno"> 1697</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">bitDepth</a> == 16)</div>
<div class="line"><a id="l01698" name="l01698"></a><span class="lineno"> 1698</span>    {</div>
<div class="line"><a id="l01699" name="l01699"></a><span class="lineno"> 1699</span>      <span class="keywordflow">switch</span>(infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a>)</div>
<div class="line"><a id="l01700" name="l01700"></a><span class="lineno"> 1700</span>      {</div>
<div class="line"><a id="l01701" name="l01701"></a><span class="lineno"> 1701</span>        <span class="keywordflow">case</span> 0: <span class="comment">/*greyscale color*/</span></div>
<div class="line"><a id="l01702" name="l01702"></a><span class="lineno"> 1702</span>          <span class="keywordflow">for</span>(i = 0; i &lt; numpixels; i++)</div>
<div class="line"><a id="l01703" name="l01703"></a><span class="lineno"> 1703</span>          {</div>
<div class="line"><a id="l01704" name="l01704"></a><span class="lineno"> 1704</span>            <span class="keywordflow">if</span>(OUT_ALPHA) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 3] = 255;</div>
<div class="line"><a id="l01705" name="l01705"></a><span class="lineno"> 1705</span>            <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 0] = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 1] = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 2] = in[2 * i];</div>
<div class="line"><a id="l01706" name="l01706"></a><span class="lineno"> 1706</span>            <span class="keywordflow">if</span>(OUT_ALPHA &amp;&amp; infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#aa0193ce13025c776a0dfb1e6d1bed14a">key_defined</a> &amp;&amp; 256U * in[i] + in[i + 1] == infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a5536a8859201cd11df789ec7ad8263df">key_r</a>) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 3] = 0;</div>
<div class="line"><a id="l01707" name="l01707"></a><span class="lineno"> 1707</span>          }</div>
<div class="line"><a id="l01708" name="l01708"></a><span class="lineno"> 1708</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01709" name="l01709"></a><span class="lineno"> 1709</span>        <span class="keywordflow">case</span> 2: <span class="comment">/*RGB color*/</span></div>
<div class="line"><a id="l01710" name="l01710"></a><span class="lineno"> 1710</span>          <span class="keywordflow">for</span>(i = 0; i &lt; numpixels; i++)</div>
<div class="line"><a id="l01711" name="l01711"></a><span class="lineno"> 1711</span>          {</div>
<div class="line"><a id="l01712" name="l01712"></a><span class="lineno"> 1712</span>            <span class="keywordflow">if</span>(OUT_ALPHA) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 3] = 255;</div>
<div class="line"><a id="l01713" name="l01713"></a><span class="lineno"> 1713</span>            <span class="keywordflow">for</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a> = 0; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a> &lt; 3; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>++) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>] = in[6 * i + 2 * <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>];</div>
<div class="line"><a id="l01714" name="l01714"></a><span class="lineno"> 1714</span>            <span class="keywordflow">if</span>(OUT_ALPHA &amp;&amp; infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#aa0193ce13025c776a0dfb1e6d1bed14a">key_defined</a> &amp;&amp; 256U * in[6 * i + 0] + in[6 * i + 1] == infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a5536a8859201cd11df789ec7ad8263df">key_r</a> &amp;&amp; 256U * in[6 * i + 2] + in[6 * i + 3] == infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a44bf4906335328972acebd6c8b83a073">key_g</a> &amp;&amp; 256U * in[6 * i + 4] + in[6 * i + 5] == infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9f99cc5b4366f1eed325d13b4f191560">key_b</a>) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 3] = 0;</div>
<div class="line"><a id="l01715" name="l01715"></a><span class="lineno"> 1715</span>          }</div>
<div class="line"><a id="l01716" name="l01716"></a><span class="lineno"> 1716</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01717" name="l01717"></a><span class="lineno"> 1717</span>        <span class="keywordflow">case</span> 4: <span class="comment">/*greyscale with alpha*/</span></div>
<div class="line"><a id="l01718" name="l01718"></a><span class="lineno"> 1718</span>          <span class="keywordflow">for</span>(i = 0; i &lt; numpixels; i++)</div>
<div class="line"><a id="l01719" name="l01719"></a><span class="lineno"> 1719</span>          {</div>
<div class="line"><a id="l01720" name="l01720"></a><span class="lineno"> 1720</span>            <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 0] = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 1] = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 2] = in[4 * i]; <span class="comment">/*most significant byte*/</span></div>
<div class="line"><a id="l01721" name="l01721"></a><span class="lineno"> 1721</span>            <span class="keywordflow">if</span>(OUT_ALPHA) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 3] = in[4 * i + 2];</div>
<div class="line"><a id="l01722" name="l01722"></a><span class="lineno"> 1722</span>          }</div>
<div class="line"><a id="l01723" name="l01723"></a><span class="lineno"> 1723</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01724" name="l01724"></a><span class="lineno"> 1724</span>        <span class="keywordflow">case</span> 6: <span class="comment">/*RGB with alpha*/</span></div>
<div class="line"><a id="l01725" name="l01725"></a><span class="lineno"> 1725</span>          <span class="keywordflow">for</span>(i = 0; i &lt; numpixels; i++)</div>
<div class="line"><a id="l01726" name="l01726"></a><span class="lineno"> 1726</span>          {</div>
<div class="line"><a id="l01727" name="l01727"></a><span class="lineno"> 1727</span>            <span class="keywordflow">for</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a> = 0; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a> &lt; OUT_BYTES; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>++) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>] = in[8 * i + 2 * <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>];</div>
<div class="line"><a id="l01728" name="l01728"></a><span class="lineno"> 1728</span>          }</div>
<div class="line"><a id="l01729" name="l01729"></a><span class="lineno"> 1729</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01730" name="l01730"></a><span class="lineno"> 1730</span>        <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01731" name="l01731"></a><span class="lineno"> 1731</span>      }</div>
<div class="line"><a id="l01732" name="l01732"></a><span class="lineno"> 1732</span>    }</div>
<div class="line"><a id="l01733" name="l01733"></a><span class="lineno"> 1733</span>    <span class="keywordflow">else</span> <span class="comment">/*infoIn-&gt;bitDepth is less than 8 bit per channel*/</span></div>
<div class="line"><a id="l01734" name="l01734"></a><span class="lineno"> 1734</span>    {</div>
<div class="line"><a id="l01735" name="l01735"></a><span class="lineno"> 1735</span>      <span class="keywordflow">switch</span>(infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a>)</div>
<div class="line"><a id="l01736" name="l01736"></a><span class="lineno"> 1736</span>      {</div>
<div class="line"><a id="l01737" name="l01737"></a><span class="lineno"> 1737</span>        <span class="keywordflow">case</span> 0: <span class="comment">/*greyscale color*/</span></div>
<div class="line"><a id="l01738" name="l01738"></a><span class="lineno"> 1738</span>          <span class="keywordflow">for</span>(i = 0; i &lt; numpixels; i++)</div>
<div class="line"><a id="l01739" name="l01739"></a><span class="lineno"> 1739</span>          {</div>
<div class="line"><a id="l01740" name="l01740"></a><span class="lineno"> 1740</span>            <span class="keywordtype">unsigned</span> value = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a25ac892793826b6ab7542b32dda29739">readBitsFromReversedStream</a>(&amp;bp, in, infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">bitDepth</a>);</div>
<div class="line"><a id="l01741" name="l01741"></a><span class="lineno"> 1741</span>            <span class="keywordflow">if</span>(OUT_ALPHA) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 3] = 255;</div>
<div class="line"><a id="l01742" name="l01742"></a><span class="lineno"> 1742</span>            <span class="keywordflow">if</span>(OUT_ALPHA &amp;&amp; infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#aa0193ce13025c776a0dfb1e6d1bed14a">key_defined</a> &amp;&amp; value &amp;&amp; ((1U &lt;&lt; infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">bitDepth</a>) - 1U) == infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a5536a8859201cd11df789ec7ad8263df">key_r</a> &amp;&amp; ((1U &lt;&lt; infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">bitDepth</a>) - 1U)) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 3] = 0;</div>
<div class="line"><a id="l01743" name="l01743"></a><span class="lineno"> 1743</span>            value = (value * 255) / ((1 &lt;&lt; infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">bitDepth</a>) - 1); <span class="comment">/*scale value from 0 to 255*/</span></div>
<div class="line"><a id="l01744" name="l01744"></a><span class="lineno"> 1744</span>            <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 0] = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 1] = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 2] = (<span class="keywordtype">unsigned</span> char)(value);</div>
<div class="line"><a id="l01745" name="l01745"></a><span class="lineno"> 1745</span>          }</div>
<div class="line"><a id="l01746" name="l01746"></a><span class="lineno"> 1746</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01747" name="l01747"></a><span class="lineno"> 1747</span>        <span class="keywordflow">case</span> 3: <span class="comment">/*indexed color (palette)*/</span></div>
<div class="line"><a id="l01748" name="l01748"></a><span class="lineno"> 1748</span>          <span class="keywordflow">for</span>(i = 0; i &lt; numpixels; i++)</div>
<div class="line"><a id="l01749" name="l01749"></a><span class="lineno"> 1749</span>          {</div>
<div class="line"><a id="l01750" name="l01750"></a><span class="lineno"> 1750</span>            <span class="keywordtype">unsigned</span> value = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a25ac892793826b6ab7542b32dda29739">readBitsFromReversedStream</a>(&amp;bp, in, infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">bitDepth</a>);</div>
<div class="line"><a id="l01751" name="l01751"></a><span class="lineno"> 1751</span>            <span class="keywordflow">if</span>(OUT_ALPHA) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 3] = 255;</div>
<div class="line"><a id="l01752" name="l01752"></a><span class="lineno"> 1752</span>            <span class="keywordflow">if</span>(value &gt;= infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a49842a304ffd0abc8aa791030c5fa5dd">palettesize</a>) <span class="keywordflow">return</span> 47;</div>
<div class="line"><a id="l01753" name="l01753"></a><span class="lineno"> 1753</span>            <span class="keywordflow">for</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a> = 0; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a> &lt; OUT_BYTES; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>++) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>] = infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a3b3862dd05e3f9f0bd9e95741d49e266">palette</a>[4 * value + <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>]; <span class="comment">/*get rgb colors from the palette*/</span></div>
<div class="line"><a id="l01754" name="l01754"></a><span class="lineno"> 1754</span>          }</div>
<div class="line"><a id="l01755" name="l01755"></a><span class="lineno"> 1755</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01756" name="l01756"></a><span class="lineno"> 1756</span>        <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01757" name="l01757"></a><span class="lineno"> 1757</span>      }</div>
<div class="line"><a id="l01758" name="l01758"></a><span class="lineno"> 1758</span>    }</div>
<div class="line"><a id="l01759" name="l01759"></a><span class="lineno"> 1759</span>  }</div>
<div class="line"><a id="l01760" name="l01760"></a><span class="lineno"> 1760</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a1c20c80bee9fe3e28394f231a11fed9b">LodePNG_InfoColor_isGreyscaleType</a>(infoOut) &amp;&amp; infoOut-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">bitDepth</a> == 8) <span class="comment">/*conversion from greyscale to greyscale*/</span></div>
<div class="line"><a id="l01761" name="l01761"></a><span class="lineno"> 1761</span>  {</div>
<div class="line"><a id="l01762" name="l01762"></a><span class="lineno"> 1762</span>    <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a1c20c80bee9fe3e28394f231a11fed9b">LodePNG_InfoColor_isGreyscaleType</a>(infoIn)) <span class="keywordflow">return</span> 62;</div>
<div class="line"><a id="l01763" name="l01763"></a><span class="lineno"> 1763</span>    <span class="keywordflow">if</span>(infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">bitDepth</a> == 8)</div>
<div class="line"><a id="l01764" name="l01764"></a><span class="lineno"> 1764</span>    {</div>
<div class="line"><a id="l01765" name="l01765"></a><span class="lineno"> 1765</span>      <span class="keywordflow">switch</span>(infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a>)</div>
<div class="line"><a id="l01766" name="l01766"></a><span class="lineno"> 1766</span>      {</div>
<div class="line"><a id="l01767" name="l01767"></a><span class="lineno"> 1767</span>        <span class="keywordflow">case</span> 0: <span class="comment">/*greyscale color*/</span></div>
<div class="line"><a id="l01768" name="l01768"></a><span class="lineno"> 1768</span>          <span class="keywordflow">for</span>(i = 0; i &lt; numpixels; i++)</div>
<div class="line"><a id="l01769" name="l01769"></a><span class="lineno"> 1769</span>          {</div>
<div class="line"><a id="l01770" name="l01770"></a><span class="lineno"> 1770</span>            <span class="keywordflow">if</span>(OUT_ALPHA) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 1] = 255;</div>
<div class="line"><a id="l01771" name="l01771"></a><span class="lineno"> 1771</span>            <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i] = in[i];</div>
<div class="line"><a id="l01772" name="l01772"></a><span class="lineno"> 1772</span>            <span class="keywordflow">if</span>(OUT_ALPHA &amp;&amp; infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#aa0193ce13025c776a0dfb1e6d1bed14a">key_defined</a> &amp;&amp; in[i] == infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a5536a8859201cd11df789ec7ad8263df">key_r</a>) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 1] = 0;</div>
<div class="line"><a id="l01773" name="l01773"></a><span class="lineno"> 1773</span>          }</div>
<div class="line"><a id="l01774" name="l01774"></a><span class="lineno"> 1774</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01775" name="l01775"></a><span class="lineno"> 1775</span>        <span class="keywordflow">case</span> 4: <span class="comment">/*greyscale with alpha*/</span></div>
<div class="line"><a id="l01776" name="l01776"></a><span class="lineno"> 1776</span>          <span class="keywordflow">for</span>(i = 0; i &lt; numpixels; i++)</div>
<div class="line"><a id="l01777" name="l01777"></a><span class="lineno"> 1777</span>          {</div>
<div class="line"><a id="l01778" name="l01778"></a><span class="lineno"> 1778</span>            <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 0] = in[2 * i + 0];</div>
<div class="line"><a id="l01779" name="l01779"></a><span class="lineno"> 1779</span>            <span class="keywordflow">if</span>(OUT_ALPHA) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 1] = in[2 * i + 1];</div>
<div class="line"><a id="l01780" name="l01780"></a><span class="lineno"> 1780</span>          }</div>
<div class="line"><a id="l01781" name="l01781"></a><span class="lineno"> 1781</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01782" name="l01782"></a><span class="lineno"> 1782</span>        <span class="keywordflow">default</span>: <span class="keywordflow">return</span> 31;</div>
<div class="line"><a id="l01783" name="l01783"></a><span class="lineno"> 1783</span>      }</div>
<div class="line"><a id="l01784" name="l01784"></a><span class="lineno"> 1784</span>    }</div>
<div class="line"><a id="l01785" name="l01785"></a><span class="lineno"> 1785</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">bitDepth</a> == 16)</div>
<div class="line"><a id="l01786" name="l01786"></a><span class="lineno"> 1786</span>    {</div>
<div class="line"><a id="l01787" name="l01787"></a><span class="lineno"> 1787</span>      <span class="keywordflow">switch</span>(infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a>)</div>
<div class="line"><a id="l01788" name="l01788"></a><span class="lineno"> 1788</span>      {</div>
<div class="line"><a id="l01789" name="l01789"></a><span class="lineno"> 1789</span>        <span class="keywordflow">case</span> 0: <span class="comment">/*greyscale color*/</span></div>
<div class="line"><a id="l01790" name="l01790"></a><span class="lineno"> 1790</span>          <span class="keywordflow">for</span>(i = 0; i &lt; numpixels; i++)</div>
<div class="line"><a id="l01791" name="l01791"></a><span class="lineno"> 1791</span>          {</div>
<div class="line"><a id="l01792" name="l01792"></a><span class="lineno"> 1792</span>            <span class="keywordflow">if</span>(OUT_ALPHA) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 1] = 255;</div>
<div class="line"><a id="l01793" name="l01793"></a><span class="lineno"> 1793</span>            <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i] = in[2 * i];</div>
<div class="line"><a id="l01794" name="l01794"></a><span class="lineno"> 1794</span>            <span class="keywordflow">if</span>(OUT_ALPHA &amp;&amp; infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#aa0193ce13025c776a0dfb1e6d1bed14a">key_defined</a> &amp;&amp; 256U * in[i] + in[i + 1] == infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a5536a8859201cd11df789ec7ad8263df">key_r</a>) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 1] = 0;</div>
<div class="line"><a id="l01795" name="l01795"></a><span class="lineno"> 1795</span>          }</div>
<div class="line"><a id="l01796" name="l01796"></a><span class="lineno"> 1796</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01797" name="l01797"></a><span class="lineno"> 1797</span>        <span class="keywordflow">case</span> 4: <span class="comment">/*greyscale with alpha*/</span></div>
<div class="line"><a id="l01798" name="l01798"></a><span class="lineno"> 1798</span>          <span class="keywordflow">for</span>(i = 0; i &lt; numpixels; i++)</div>
<div class="line"><a id="l01799" name="l01799"></a><span class="lineno"> 1799</span>          {</div>
<div class="line"><a id="l01800" name="l01800"></a><span class="lineno"> 1800</span>            <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i] = in[4 * i]; <span class="comment">/*most significant byte*/</span></div>
<div class="line"><a id="l01801" name="l01801"></a><span class="lineno"> 1801</span>            <span class="keywordflow">if</span>(OUT_ALPHA) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 1] = in[4 * i + 2]; <span class="comment">/*most significant byte*/</span></div>
<div class="line"><a id="l01802" name="l01802"></a><span class="lineno"> 1802</span>          }</div>
<div class="line"><a id="l01803" name="l01803"></a><span class="lineno"> 1803</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01804" name="l01804"></a><span class="lineno"> 1804</span>        <span class="keywordflow">default</span>: <span class="keywordflow">return</span> 31;</div>
<div class="line"><a id="l01805" name="l01805"></a><span class="lineno"> 1805</span>      }</div>
<div class="line"><a id="l01806" name="l01806"></a><span class="lineno"> 1806</span>    }</div>
<div class="line"><a id="l01807" name="l01807"></a><span class="lineno"> 1807</span>    <span class="keywordflow">else</span> <span class="comment">/*infoIn-&gt;bitDepth is less than 8 bit per channel*/</span></div>
<div class="line"><a id="l01808" name="l01808"></a><span class="lineno"> 1808</span>    {</div>
<div class="line"><a id="l01809" name="l01809"></a><span class="lineno"> 1809</span>      <span class="keywordflow">if</span>(infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> != 0) <span class="keywordflow">return</span> 31; <span class="comment">/*colorType 0 is the only greyscale type with &lt; 8 bits per channel*/</span></div>
<div class="line"><a id="l01810" name="l01810"></a><span class="lineno"> 1810</span>      <span class="keywordflow">for</span>(i = 0; i &lt; numpixels; i++)</div>
<div class="line"><a id="l01811" name="l01811"></a><span class="lineno"> 1811</span>      {</div>
<div class="line"><a id="l01812" name="l01812"></a><span class="lineno"> 1812</span>        <span class="keywordtype">unsigned</span> value = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a25ac892793826b6ab7542b32dda29739">readBitsFromReversedStream</a>(&amp;bp, in, infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">bitDepth</a>);</div>
<div class="line"><a id="l01813" name="l01813"></a><span class="lineno"> 1813</span>        <span class="keywordflow">if</span>(OUT_ALPHA) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 1] = 255;</div>
<div class="line"><a id="l01814" name="l01814"></a><span class="lineno"> 1814</span>        <span class="keywordflow">if</span>(OUT_ALPHA &amp;&amp; infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#aa0193ce13025c776a0dfb1e6d1bed14a">key_defined</a> &amp;&amp; value &amp;&amp; ((1U &lt;&lt; infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">bitDepth</a>) - 1U) == infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a5536a8859201cd11df789ec7ad8263df">key_r</a> &amp;&amp; ((1U &lt;&lt; infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">bitDepth</a>) - 1U)) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i + 1] = 0;</div>
<div class="line"><a id="l01815" name="l01815"></a><span class="lineno"> 1815</span>        value = (value * 255) / ((1 &lt;&lt; infoIn-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">bitDepth</a>) - 1); <span class="comment">/*scale value from 0 to 255*/</span></div>
<div class="line"><a id="l01816" name="l01816"></a><span class="lineno"> 1816</span>        <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[OUT_BYTES * i] = (<span class="keywordtype">unsigned</span> char)(value);</div>
<div class="line"><a id="l01817" name="l01817"></a><span class="lineno"> 1817</span>      }</div>
<div class="line"><a id="l01818" name="l01818"></a><span class="lineno"> 1818</span>    }</div>
<div class="line"><a id="l01819" name="l01819"></a><span class="lineno"> 1819</span>  }</div>
<div class="line"><a id="l01820" name="l01820"></a><span class="lineno"> 1820</span>  <span class="keywordflow">else</span> <span class="keywordflow">return</span> 59;</div>
<div class="line"><a id="l01821" name="l01821"></a><span class="lineno"> 1821</span> </div>
<div class="line"><a id="l01822" name="l01822"></a><span class="lineno"> 1822</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01823" name="l01823"></a><span class="lineno"> 1823</span>}</div>
<div class="line"><a id="l01824" name="l01824"></a><span class="lineno"> 1824</span> </div>
<div class="line"><a id="l01825" name="l01825"></a><span class="lineno"> 1825</span><span class="comment">/*Path predictor, used by PNG filter type 4*/</span></div>
<div class="line"><a id="l01826" name="l01826"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#ad6cd8facac090f1da5e2095f647292c3"> 1826</a></span><span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad6cd8facac090f1da5e2095f647292c3">paethPredictor</a>(<span class="keywordtype">int</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ae1c02e9f36a12e377487affe87df4bb6">a</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#aadf2a4297af25f4a140ea29500e8d47d">b</a>, <span class="keywordtype">int</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>)</div>
<div class="line"><a id="l01827" name="l01827"></a><span class="lineno"> 1827</span>{</div>
<div class="line"><a id="l01828" name="l01828"></a><span class="lineno"> 1828</span>  <span class="keywordtype">int</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a> = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ae1c02e9f36a12e377487affe87df4bb6">a</a> + <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#aadf2a4297af25f4a140ea29500e8d47d">b</a> - <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>;</div>
<div class="line"><a id="l01829" name="l01829"></a><span class="lineno"> 1829</span>  <span class="keywordtype">int</span> pa = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a> &gt; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ae1c02e9f36a12e377487affe87df4bb6">a</a> ? <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a> - <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ae1c02e9f36a12e377487affe87df4bb6">a</a> : <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ae1c02e9f36a12e377487affe87df4bb6">a</a> - <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>;</div>
<div class="line"><a id="l01830" name="l01830"></a><span class="lineno"> 1830</span>  <span class="keywordtype">int</span> pb = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a> &gt; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#aadf2a4297af25f4a140ea29500e8d47d">b</a> ? <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a> - <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#aadf2a4297af25f4a140ea29500e8d47d">b</a> : <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#aadf2a4297af25f4a140ea29500e8d47d">b</a> - <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>;</div>
<div class="line"><a id="l01831" name="l01831"></a><span class="lineno"> 1831</span>  <span class="keywordtype">int</span> pc = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a> &gt; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a> ? <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a> - <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a> : <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a> - <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a>;</div>
<div class="line"><a id="l01832" name="l01832"></a><span class="lineno"> 1832</span> </div>
<div class="line"><a id="l01833" name="l01833"></a><span class="lineno"> 1833</span>  <span class="keywordflow">if</span>(pa &lt;= pb &amp;&amp; pa &lt;= pc) <span class="keywordflow">return</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ae1c02e9f36a12e377487affe87df4bb6">a</a>;</div>
<div class="line"><a id="l01834" name="l01834"></a><span class="lineno"> 1834</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(pb &lt;= pc) <span class="keywordflow">return</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#aadf2a4297af25f4a140ea29500e8d47d">b</a>;</div>
<div class="line"><a id="l01835" name="l01835"></a><span class="lineno"> 1835</span>  <span class="keywordflow">else</span> <span class="keywordflow">return</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a>;</div>
<div class="line"><a id="l01836" name="l01836"></a><span class="lineno"> 1836</span>}</div>
<div class="line"><a id="l01837" name="l01837"></a><span class="lineno"> 1837</span> </div>
<div class="line"><a id="l01838" name="l01838"></a><span class="lineno"> 1838</span><span class="comment">/*shared values used by multiple Adam7 related functions*/</span></div>
<div class="line"><a id="l01839" name="l01839"></a><span class="lineno"> 1839</span> </div>
<div class="line"><a id="l01840" name="l01840"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a85488c2cdadbed8c6ac4261a3922e186"> 1840</a></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a85488c2cdadbed8c6ac4261a3922e186">ADAM7_IX</a>[7] = { 0, 4, 0, 2, 0, 1, 0 }; <span class="comment">/*x start values*/</span></div>
<div class="line"><a id="l01841" name="l01841"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a851ee080587d6fe775d09e376947c880"> 1841</a></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a851ee080587d6fe775d09e376947c880">ADAM7_IY</a>[7] = { 0, 0, 4, 0, 2, 0, 1 }; <span class="comment">/*y start values*/</span></div>
<div class="line"><a id="l01842" name="l01842"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#af3ae20779df70d02c4a2d6195e72c976"> 1842</a></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#af3ae20779df70d02c4a2d6195e72c976">ADAM7_DX</a>[7] = { 8, 8, 4, 4, 2, 2, 1 }; <span class="comment">/*x delta values*/</span></div>
<div class="line"><a id="l01843" name="l01843"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a1e68ce500702fd59580e735e977b84f3"> 1843</a></span><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a1e68ce500702fd59580e735e977b84f3">ADAM7_DY</a>[7] = { 8, 8, 8, 4, 4, 2, 2 }; <span class="comment">/*y delta values*/</span></div>
<div class="line"><a id="l01844" name="l01844"></a><span class="lineno"> 1844</span> </div>
<div class="line"><a id="l01845" name="l01845"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a18aff167f1895955ac0f831555e9cff3"> 1845</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a18aff167f1895955ac0f831555e9cff3">Adam7_getpassvalues</a>(<span class="keywordtype">unsigned</span> passw[7], <span class="keywordtype">unsigned</span> passh[7], <span class="keywordtype">size_t</span> filter_passstart[8], <span class="keywordtype">size_t</span> padded_passstart[8], <span class="keywordtype">size_t</span> passstart[8], <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a>, <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a>, <span class="keywordtype">unsigned</span> bpp)</div>
<div class="line"><a id="l01846" name="l01846"></a><span class="lineno"> 1846</span>{</div>
<div class="line"><a id="l01847" name="l01847"></a><span class="lineno"> 1847</span>  <span class="comment">/*the passstart values have 8 values: the 8th one actually indicates the byte after the end of the 7th (= last) pass*/</span></div>
<div class="line"><a id="l01848" name="l01848"></a><span class="lineno"> 1848</span>  <span class="keywordtype">unsigned</span> i;</div>
<div class="line"><a id="l01849" name="l01849"></a><span class="lineno"> 1849</span> </div>
<div class="line"><a id="l01850" name="l01850"></a><span class="lineno"> 1850</span>  <span class="comment">/*calculate width and height in pixels of each pass*/</span></div>
<div class="line"><a id="l01851" name="l01851"></a><span class="lineno"> 1851</span>  <span class="keywordflow">for</span>(i = 0; i &lt; 7; i++)</div>
<div class="line"><a id="l01852" name="l01852"></a><span class="lineno"> 1852</span>  {</div>
<div class="line"><a id="l01853" name="l01853"></a><span class="lineno"> 1853</span>    passw[i] = (<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a> + <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#af3ae20779df70d02c4a2d6195e72c976">ADAM7_DX</a>[i] - <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a85488c2cdadbed8c6ac4261a3922e186">ADAM7_IX</a>[i] - 1) / <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#af3ae20779df70d02c4a2d6195e72c976">ADAM7_DX</a>[i];</div>
<div class="line"><a id="l01854" name="l01854"></a><span class="lineno"> 1854</span>    passh[i] = (<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a> + <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a1e68ce500702fd59580e735e977b84f3">ADAM7_DY</a>[i] - <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a851ee080587d6fe775d09e376947c880">ADAM7_IY</a>[i] - 1) / <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a1e68ce500702fd59580e735e977b84f3">ADAM7_DY</a>[i];</div>
<div class="line"><a id="l01855" name="l01855"></a><span class="lineno"> 1855</span>    <span class="keywordflow">if</span>(passw[i] == 0) passh[i] = 0;</div>
<div class="line"><a id="l01856" name="l01856"></a><span class="lineno"> 1856</span>    <span class="keywordflow">if</span>(passh[i] == 0) passw[i] = 0;</div>
<div class="line"><a id="l01857" name="l01857"></a><span class="lineno"> 1857</span>  }</div>
<div class="line"><a id="l01858" name="l01858"></a><span class="lineno"> 1858</span> </div>
<div class="line"><a id="l01859" name="l01859"></a><span class="lineno"> 1859</span>  filter_passstart[0] = padded_passstart[0] = passstart[0] = 0;</div>
<div class="line"><a id="l01860" name="l01860"></a><span class="lineno"> 1860</span>  <span class="keywordflow">for</span>(i = 0; i &lt; 7; i++)</div>
<div class="line"><a id="l01861" name="l01861"></a><span class="lineno"> 1861</span>  {</div>
<div class="line"><a id="l01862" name="l01862"></a><span class="lineno"> 1862</span>    filter_passstart[i + 1] = filter_passstart[i] + ((passw[i] &amp;&amp; passh[i]) ? passh[i] * (1 + (passw[i] * bpp + 7) / 8) : 0); <span class="comment">/*if passw[i] is 0, it&#39;s 0 bytes, not 1 (no filtertype-byte)*/</span></div>
<div class="line"><a id="l01863" name="l01863"></a><span class="lineno"> 1863</span>    padded_passstart[i + 1] = padded_passstart[i] + passh[i] * ((passw[i] * bpp + 7) / 8); <span class="comment">/*bits padded if needed to fill full byte at end of each scanline*/</span></div>
<div class="line"><a id="l01864" name="l01864"></a><span class="lineno"> 1864</span>    passstart[i + 1] = passstart[i] + (passh[i] * passw[i] * bpp + 7) / 8; <span class="comment">/*only padded at end of reduced image*/</span></div>
<div class="line"><a id="l01865" name="l01865"></a><span class="lineno"> 1865</span>  }</div>
<div class="line"><a id="l01866" name="l01866"></a><span class="lineno"> 1866</span>}</div>
<div class="line"><a id="l01867" name="l01867"></a><span class="lineno"> 1867</span> </div>
<div class="line"><a id="l01868" name="l01868"></a><span class="lineno"> 1868</span> </div>
<div class="line"><a id="l01869" name="l01869"></a><span class="lineno"> 1869</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01870" name="l01870"></a><span class="lineno"> 1870</span><span class="comment">/* / PNG Encoder                                                            / */</span></div>
<div class="line"><a id="l01871" name="l01871"></a><span class="lineno"> 1871</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l01872" name="l01872"></a><span class="lineno"> 1872</span> </div>
<div class="line"><a id="l01873" name="l01873"></a><span class="lineno"> 1873</span><span class="comment">/*chunkName must be string of 4 characters*/</span></div>
<div class="line"><a id="l01874" name="l01874"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#af19f183e437b63f5fca48f26807bfa4a"> 1874</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#af19f183e437b63f5fca48f26807bfa4a">addChunk</a>(<a class="code hl_struct" href="structucvector.html">ucvector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="keyword">const</span> <span class="keywordtype">char</span>* chunkName, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>, <span class="keywordtype">size_t</span> length)</div>
<div class="line"><a id="l01875" name="l01875"></a><span class="lineno"> 1875</span>{</div>
<div class="line"><a id="l01876" name="l01876"></a><span class="lineno"> 1876</span>  <span class="keywordtype">unsigned</span> error = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ab2054e40f6c26aed0a0e618035d66190">LodePNG_create_chunk</a>(&amp;<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>-&gt;data, &amp;<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>-&gt;size, (<span class="keywordtype">unsigned</span>)length, chunkName, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>);</div>
<div class="line"><a id="l01877" name="l01877"></a><span class="lineno"> 1877</span>  <span class="keywordflow">if</span>(error) <span class="keywordflow">return</span> error;</div>
<div class="line"><a id="l01878" name="l01878"></a><span class="lineno"> 1878</span>  <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>-&gt;allocsize = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>-&gt;size; <span class="comment">/*fix the allocsize again*/</span></div>
<div class="line"><a id="l01879" name="l01879"></a><span class="lineno"> 1879</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l01880" name="l01880"></a><span class="lineno"> 1880</span>}</div>
<div class="line"><a id="l01881" name="l01881"></a><span class="lineno"> 1881</span> </div>
<div class="line"><a id="l01882" name="l01882"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a3ef7410c8765fdbed5e61e206c1b68a9"> 1882</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a3ef7410c8765fdbed5e61e206c1b68a9">writeSignature</a>(<a class="code hl_struct" href="structucvector.html">ucvector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>)</div>
<div class="line"><a id="l01883" name="l01883"></a><span class="lineno"> 1883</span>{</div>
<div class="line"><a id="l01884" name="l01884"></a><span class="lineno"> 1884</span>  <span class="comment">/*8 bytes PNG signature*/</span></div>
<div class="line"><a id="l01885" name="l01885"></a><span class="lineno"> 1885</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, 137);</div>
<div class="line"><a id="l01886" name="l01886"></a><span class="lineno"> 1886</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, 80);</div>
<div class="line"><a id="l01887" name="l01887"></a><span class="lineno"> 1887</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, 78);</div>
<div class="line"><a id="l01888" name="l01888"></a><span class="lineno"> 1888</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, 71);</div>
<div class="line"><a id="l01889" name="l01889"></a><span class="lineno"> 1889</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, 13);</div>
<div class="line"><a id="l01890" name="l01890"></a><span class="lineno"> 1890</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, 10);</div>
<div class="line"><a id="l01891" name="l01891"></a><span class="lineno"> 1891</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, 26);</div>
<div class="line"><a id="l01892" name="l01892"></a><span class="lineno"> 1892</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, 10);</div>
<div class="line"><a id="l01893" name="l01893"></a><span class="lineno"> 1893</span>}</div>
<div class="line"><a id="l01894" name="l01894"></a><span class="lineno"> 1894</span> </div>
<div class="line"><a id="l01895" name="l01895"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a6d2c08601522a93dcfff80c45d1624dd"> 1895</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a6d2c08601522a93dcfff80c45d1624dd">addChunk_IHDR</a>(<a class="code hl_struct" href="structucvector.html">ucvector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a>, <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a>, <span class="keywordtype">unsigned</span> bitDepth, <span class="keywordtype">unsigned</span> colorType, <span class="keywordtype">unsigned</span> interlaceMethod)</div>
<div class="line"><a id="l01896" name="l01896"></a><span class="lineno"> 1896</span>{</div>
<div class="line"><a id="l01897" name="l01897"></a><span class="lineno"> 1897</span>  <span class="keywordtype">unsigned</span> error = 0;</div>
<div class="line"><a id="l01898" name="l01898"></a><span class="lineno"> 1898</span>  <a class="code hl_struct" href="structucvector.html">ucvector</a> header;</div>
<div class="line"><a id="l01899" name="l01899"></a><span class="lineno"> 1899</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a1b58c07819eec4ff7e903138c08eb502">ucvector_init</a>(&amp;header);</div>
<div class="line"><a id="l01900" name="l01900"></a><span class="lineno"> 1900</span> </div>
<div class="line"><a id="l01901" name="l01901"></a><span class="lineno"> 1901</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a916c52418acebce22bcc2ad10af2b3b7">LodePNG_add32bitInt</a>(&amp;header, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a>); <span class="comment">/*width*/</span></div>
<div class="line"><a id="l01902" name="l01902"></a><span class="lineno"> 1902</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a916c52418acebce22bcc2ad10af2b3b7">LodePNG_add32bitInt</a>(&amp;header, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a>); <span class="comment">/*height*/</span></div>
<div class="line"><a id="l01903" name="l01903"></a><span class="lineno"> 1903</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(&amp;header, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)bitDepth); <span class="comment">/*bit depth*/</span></div>
<div class="line"><a id="l01904" name="l01904"></a><span class="lineno"> 1904</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(&amp;header, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)colorType); <span class="comment">/*color type*/</span></div>
<div class="line"><a id="l01905" name="l01905"></a><span class="lineno"> 1905</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(&amp;header, 0); <span class="comment">/*compression method*/</span></div>
<div class="line"><a id="l01906" name="l01906"></a><span class="lineno"> 1906</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(&amp;header, 0); <span class="comment">/*filter method*/</span></div>
<div class="line"><a id="l01907" name="l01907"></a><span class="lineno"> 1907</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(&amp;header, interlaceMethod); <span class="comment">/*interlace method*/</span></div>
<div class="line"><a id="l01908" name="l01908"></a><span class="lineno"> 1908</span> </div>
<div class="line"><a id="l01909" name="l01909"></a><span class="lineno"> 1909</span>  error = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#af19f183e437b63f5fca48f26807bfa4a">addChunk</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="stringliteral">&quot;IHDR&quot;</span>, header.<a class="code hl_variable" href="structucvector.html#a803973058c172963314ff05217b57d60">data</a>, header.<a class="code hl_variable" href="structucvector.html#a27c99c34de0c5b3ca0c242d402c69499">size</a>);</div>
<div class="line"><a id="l01910" name="l01910"></a><span class="lineno"> 1910</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad689bf84470238e26b01524631d778ec">ucvector_cleanup</a>(&amp;header);</div>
<div class="line"><a id="l01911" name="l01911"></a><span class="lineno"> 1911</span> </div>
<div class="line"><a id="l01912" name="l01912"></a><span class="lineno"> 1912</span>  <span class="keywordflow">return</span> error;</div>
<div class="line"><a id="l01913" name="l01913"></a><span class="lineno"> 1913</span>}</div>
<div class="line"><a id="l01914" name="l01914"></a><span class="lineno"> 1914</span> </div>
<div class="line"><a id="l01915" name="l01915"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#ac47e572c85623e55bb4ca5b75767bad9"> 1915</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ac47e572c85623e55bb4ca5b75767bad9">addChunk_PLTE</a>(<a class="code hl_struct" href="structucvector.html">ucvector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="keyword">const</span> <a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* info)</div>
<div class="line"><a id="l01916" name="l01916"></a><span class="lineno"> 1916</span>{</div>
<div class="line"><a id="l01917" name="l01917"></a><span class="lineno"> 1917</span>  <span class="keywordtype">unsigned</span> error = 0;</div>
<div class="line"><a id="l01918" name="l01918"></a><span class="lineno"> 1918</span>  <span class="keywordtype">size_t</span> i;</div>
<div class="line"><a id="l01919" name="l01919"></a><span class="lineno"> 1919</span>  <a class="code hl_struct" href="structucvector.html">ucvector</a> PLTE;</div>
<div class="line"><a id="l01920" name="l01920"></a><span class="lineno"> 1920</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a1b58c07819eec4ff7e903138c08eb502">ucvector_init</a>(&amp;PLTE);</div>
<div class="line"><a id="l01921" name="l01921"></a><span class="lineno"> 1921</span>  <span class="keywordflow">for</span>(i = 0; i &lt; info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a49842a304ffd0abc8aa791030c5fa5dd">palettesize</a> * 4; i++) <span class="keywordflow">if</span>(i % 4 != 3) <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(&amp;PLTE, info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a3b3862dd05e3f9f0bd9e95741d49e266">palette</a>[i]); <span class="comment">/*add all channels except alpha channel*/</span></div>
<div class="line"><a id="l01922" name="l01922"></a><span class="lineno"> 1922</span>  error = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#af19f183e437b63f5fca48f26807bfa4a">addChunk</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="stringliteral">&quot;PLTE&quot;</span>, PLTE.<a class="code hl_variable" href="structucvector.html#a803973058c172963314ff05217b57d60">data</a>, PLTE.<a class="code hl_variable" href="structucvector.html#a27c99c34de0c5b3ca0c242d402c69499">size</a>);</div>
<div class="line"><a id="l01923" name="l01923"></a><span class="lineno"> 1923</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad689bf84470238e26b01524631d778ec">ucvector_cleanup</a>(&amp;PLTE);</div>
<div class="line"><a id="l01924" name="l01924"></a><span class="lineno"> 1924</span> </div>
<div class="line"><a id="l01925" name="l01925"></a><span class="lineno"> 1925</span>  <span class="keywordflow">return</span> error;</div>
<div class="line"><a id="l01926" name="l01926"></a><span class="lineno"> 1926</span>}</div>
<div class="line"><a id="l01927" name="l01927"></a><span class="lineno"> 1927</span> </div>
<div class="line"><a id="l01928" name="l01928"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#aeabf2a41d047b03ce98475fe940446d8"> 1928</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aeabf2a41d047b03ce98475fe940446d8">addChunk_tRNS</a>(<a class="code hl_struct" href="structucvector.html">ucvector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="keyword">const</span> <a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* info)</div>
<div class="line"><a id="l01929" name="l01929"></a><span class="lineno"> 1929</span>{</div>
<div class="line"><a id="l01930" name="l01930"></a><span class="lineno"> 1930</span>  <span class="keywordtype">unsigned</span> error = 0;</div>
<div class="line"><a id="l01931" name="l01931"></a><span class="lineno"> 1931</span>  <span class="keywordtype">size_t</span> i;</div>
<div class="line"><a id="l01932" name="l01932"></a><span class="lineno"> 1932</span>  <a class="code hl_struct" href="structucvector.html">ucvector</a> tRNS;</div>
<div class="line"><a id="l01933" name="l01933"></a><span class="lineno"> 1933</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a1b58c07819eec4ff7e903138c08eb502">ucvector_init</a>(&amp;tRNS);</div>
<div class="line"><a id="l01934" name="l01934"></a><span class="lineno"> 1934</span>  <span class="keywordflow">if</span>(info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> == 3)</div>
<div class="line"><a id="l01935" name="l01935"></a><span class="lineno"> 1935</span>  {</div>
<div class="line"><a id="l01936" name="l01936"></a><span class="lineno"> 1936</span>    <span class="keywordflow">for</span>(i = 0; i &lt; info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a49842a304ffd0abc8aa791030c5fa5dd">palettesize</a>; i++) <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(&amp;tRNS, info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a3b3862dd05e3f9f0bd9e95741d49e266">palette</a>[4 * i + 3]); <span class="comment">/*add only alpha channel*/</span></div>
<div class="line"><a id="l01937" name="l01937"></a><span class="lineno"> 1937</span>  }</div>
<div class="line"><a id="l01938" name="l01938"></a><span class="lineno"> 1938</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> == 0)</div>
<div class="line"><a id="l01939" name="l01939"></a><span class="lineno"> 1939</span>  {</div>
<div class="line"><a id="l01940" name="l01940"></a><span class="lineno"> 1940</span>    <span class="keywordflow">if</span>(info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#aa0193ce13025c776a0dfb1e6d1bed14a">key_defined</a>)</div>
<div class="line"><a id="l01941" name="l01941"></a><span class="lineno"> 1941</span>    {</div>
<div class="line"><a id="l01942" name="l01942"></a><span class="lineno"> 1942</span>      <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(&amp;tRNS, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a5536a8859201cd11df789ec7ad8263df">key_r</a> / 256));</div>
<div class="line"><a id="l01943" name="l01943"></a><span class="lineno"> 1943</span>      <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(&amp;tRNS, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a5536a8859201cd11df789ec7ad8263df">key_r</a> % 256));</div>
<div class="line"><a id="l01944" name="l01944"></a><span class="lineno"> 1944</span>    }</div>
<div class="line"><a id="l01945" name="l01945"></a><span class="lineno"> 1945</span>  }</div>
<div class="line"><a id="l01946" name="l01946"></a><span class="lineno"> 1946</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> == 2)</div>
<div class="line"><a id="l01947" name="l01947"></a><span class="lineno"> 1947</span>  {</div>
<div class="line"><a id="l01948" name="l01948"></a><span class="lineno"> 1948</span>    <span class="keywordflow">if</span>(info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#aa0193ce13025c776a0dfb1e6d1bed14a">key_defined</a>)</div>
<div class="line"><a id="l01949" name="l01949"></a><span class="lineno"> 1949</span>    {</div>
<div class="line"><a id="l01950" name="l01950"></a><span class="lineno"> 1950</span>      <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(&amp;tRNS, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a5536a8859201cd11df789ec7ad8263df">key_r</a> / 256));</div>
<div class="line"><a id="l01951" name="l01951"></a><span class="lineno"> 1951</span>      <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(&amp;tRNS, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a5536a8859201cd11df789ec7ad8263df">key_r</a> % 256));</div>
<div class="line"><a id="l01952" name="l01952"></a><span class="lineno"> 1952</span>      <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(&amp;tRNS, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a44bf4906335328972acebd6c8b83a073">key_g</a> / 256));</div>
<div class="line"><a id="l01953" name="l01953"></a><span class="lineno"> 1953</span>      <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(&amp;tRNS, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a44bf4906335328972acebd6c8b83a073">key_g</a> % 256));</div>
<div class="line"><a id="l01954" name="l01954"></a><span class="lineno"> 1954</span>      <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(&amp;tRNS, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9f99cc5b4366f1eed325d13b4f191560">key_b</a> / 256));</div>
<div class="line"><a id="l01955" name="l01955"></a><span class="lineno"> 1955</span>      <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a>(&amp;tRNS, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9f99cc5b4366f1eed325d13b4f191560">key_b</a> % 256));</div>
<div class="line"><a id="l01956" name="l01956"></a><span class="lineno"> 1956</span>    }</div>
<div class="line"><a id="l01957" name="l01957"></a><span class="lineno"> 1957</span>  }</div>
<div class="line"><a id="l01958" name="l01958"></a><span class="lineno"> 1958</span> </div>
<div class="line"><a id="l01959" name="l01959"></a><span class="lineno"> 1959</span>  error = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#af19f183e437b63f5fca48f26807bfa4a">addChunk</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="stringliteral">&quot;tRNS&quot;</span>, tRNS.<a class="code hl_variable" href="structucvector.html#a803973058c172963314ff05217b57d60">data</a>, tRNS.<a class="code hl_variable" href="structucvector.html#a27c99c34de0c5b3ca0c242d402c69499">size</a>);</div>
<div class="line"><a id="l01960" name="l01960"></a><span class="lineno"> 1960</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad689bf84470238e26b01524631d778ec">ucvector_cleanup</a>(&amp;tRNS);</div>
<div class="line"><a id="l01961" name="l01961"></a><span class="lineno"> 1961</span> </div>
<div class="line"><a id="l01962" name="l01962"></a><span class="lineno"> 1962</span>  <span class="keywordflow">return</span> error;</div>
<div class="line"><a id="l01963" name="l01963"></a><span class="lineno"> 1963</span>}</div>
<div class="line"><a id="l01964" name="l01964"></a><span class="lineno"> 1964</span> </div>
<div class="line"><a id="l01965" name="l01965"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a366b19b8d9a1b17cce6de1e984c95c59"> 1965</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a366b19b8d9a1b17cce6de1e984c95c59">addChunk_IDAT</a>(<a class="code hl_struct" href="structucvector.html">ucvector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>, <span class="keywordtype">size_t</span> datasize, <a class="code hl_struct" href="struct_lode_zlib___deflate_settings.html">LodeZlib_DeflateSettings</a>* zlibsettings)</div>
<div class="line"><a id="l01966" name="l01966"></a><span class="lineno"> 1966</span>{</div>
<div class="line"><a id="l01967" name="l01967"></a><span class="lineno"> 1967</span>  <a class="code hl_struct" href="structucvector.html">ucvector</a> zlibdata;</div>
<div class="line"><a id="l01968" name="l01968"></a><span class="lineno"> 1968</span>  <span class="keywordtype">unsigned</span> error = 0;</div>
<div class="line"><a id="l01969" name="l01969"></a><span class="lineno"> 1969</span> </div>
<div class="line"><a id="l01970" name="l01970"></a><span class="lineno"> 1970</span>  <span class="comment">/*compress with the Zlib compressor*/</span></div>
<div class="line"><a id="l01971" name="l01971"></a><span class="lineno"> 1971</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a1b58c07819eec4ff7e903138c08eb502">ucvector_init</a>(&amp;zlibdata);</div>
<div class="line"><a id="l01972" name="l01972"></a><span class="lineno"> 1972</span>  error = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a2ddf4171e45f147a48c3de7d8ee14f6f">LodePNG_compress</a>(&amp;zlibdata.<a class="code hl_variable" href="structucvector.html#a803973058c172963314ff05217b57d60">data</a>, &amp;zlibdata.<a class="code hl_variable" href="structucvector.html#a27c99c34de0c5b3ca0c242d402c69499">size</a>, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>, datasize, zlibsettings);</div>
<div class="line"><a id="l01973" name="l01973"></a><span class="lineno"> 1973</span>  <span class="keywordflow">if</span>(!error) error = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#af19f183e437b63f5fca48f26807bfa4a">addChunk</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="stringliteral">&quot;IDAT&quot;</span>, zlibdata.<a class="code hl_variable" href="structucvector.html#a803973058c172963314ff05217b57d60">data</a>, zlibdata.<a class="code hl_variable" href="structucvector.html#a27c99c34de0c5b3ca0c242d402c69499">size</a>);</div>
<div class="line"><a id="l01974" name="l01974"></a><span class="lineno"> 1974</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad689bf84470238e26b01524631d778ec">ucvector_cleanup</a>(&amp;zlibdata);</div>
<div class="line"><a id="l01975" name="l01975"></a><span class="lineno"> 1975</span> </div>
<div class="line"><a id="l01976" name="l01976"></a><span class="lineno"> 1976</span>  <span class="keywordflow">return</span> error;</div>
<div class="line"><a id="l01977" name="l01977"></a><span class="lineno"> 1977</span>}</div>
<div class="line"><a id="l01978" name="l01978"></a><span class="lineno"> 1978</span> </div>
<div class="line"><a id="l01979" name="l01979"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#aca4038c773ca0f7cdc7b324c3c3df167"> 1979</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aca4038c773ca0f7cdc7b324c3c3df167">addChunk_IEND</a>(<a class="code hl_struct" href="structucvector.html">ucvector</a>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>)</div>
<div class="line"><a id="l01980" name="l01980"></a><span class="lineno"> 1980</span>{</div>
<div class="line"><a id="l01981" name="l01981"></a><span class="lineno"> 1981</span>  <span class="keywordtype">unsigned</span> error = 0;</div>
<div class="line"><a id="l01982" name="l01982"></a><span class="lineno"> 1982</span>  error = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#af19f183e437b63f5fca48f26807bfa4a">addChunk</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="stringliteral">&quot;IEND&quot;</span>, 0, 0);</div>
<div class="line"><a id="l01983" name="l01983"></a><span class="lineno"> 1983</span>  <span class="keywordflow">return</span> error;</div>
<div class="line"><a id="l01984" name="l01984"></a><span class="lineno"> 1984</span>}</div>
<div class="line"><a id="l01985" name="l01985"></a><span class="lineno"> 1985</span> </div>
<div class="line"><a id="l01986" name="l01986"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a8ca5670df4a17d12d10c63d21330c947"> 1986</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a8ca5670df4a17d12d10c63d21330c947">filterScanline</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* scanline, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* prevline, <span class="keywordtype">size_t</span> length, <span class="keywordtype">size_t</span> bytewidth, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> filterType)</div>
<div class="line"><a id="l01987" name="l01987"></a><span class="lineno"> 1987</span>{</div>
<div class="line"><a id="l01988" name="l01988"></a><span class="lineno"> 1988</span>  <span class="keywordtype">size_t</span> i;</div>
<div class="line"><a id="l01989" name="l01989"></a><span class="lineno"> 1989</span>  <span class="keywordflow">switch</span>(filterType)</div>
<div class="line"><a id="l01990" name="l01990"></a><span class="lineno"> 1990</span>  {</div>
<div class="line"><a id="l01991" name="l01991"></a><span class="lineno"> 1991</span>    <span class="keywordflow">case</span> 0:</div>
<div class="line"><a id="l01992" name="l01992"></a><span class="lineno"> 1992</span>      <span class="keywordflow">for</span>(i = 0; i &lt; length; i++) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[i] = scanline[i];</div>
<div class="line"><a id="l01993" name="l01993"></a><span class="lineno"> 1993</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01994" name="l01994"></a><span class="lineno"> 1994</span>    <span class="keywordflow">case</span> 1:</div>
<div class="line"><a id="l01995" name="l01995"></a><span class="lineno"> 1995</span>      <span class="keywordflow">for</span>(i =         0; i &lt; bytewidth; i++) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[i] = scanline[i];</div>
<div class="line"><a id="l01996" name="l01996"></a><span class="lineno"> 1996</span>      <span class="keywordflow">for</span>(i = bytewidth; i &lt;    length; i++) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[i] = scanline[i] - scanline[i - bytewidth];</div>
<div class="line"><a id="l01997" name="l01997"></a><span class="lineno"> 1997</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01998" name="l01998"></a><span class="lineno"> 1998</span>    <span class="keywordflow">case</span> 2:</div>
<div class="line"><a id="l01999" name="l01999"></a><span class="lineno"> 1999</span>      <span class="keywordflow">if</span>(prevline) <span class="keywordflow">for</span>(i = 0; i &lt; length; i++) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[i] = scanline[i] - prevline[i];</div>
<div class="line"><a id="l02000" name="l02000"></a><span class="lineno"> 2000</span>      <span class="keywordflow">else</span>         <span class="keywordflow">for</span>(i = 0; i &lt; length; i++) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[i] = scanline[i];</div>
<div class="line"><a id="l02001" name="l02001"></a><span class="lineno"> 2001</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02002" name="l02002"></a><span class="lineno"> 2002</span>    <span class="keywordflow">case</span> 3:</div>
<div class="line"><a id="l02003" name="l02003"></a><span class="lineno"> 2003</span>      <span class="keywordflow">if</span>(prevline)</div>
<div class="line"><a id="l02004" name="l02004"></a><span class="lineno"> 2004</span>      {</div>
<div class="line"><a id="l02005" name="l02005"></a><span class="lineno"> 2005</span>        <span class="keywordflow">for</span>(i =         0; i &lt; bytewidth; i++) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[i] = scanline[i] - prevline[i] / 2;</div>
<div class="line"><a id="l02006" name="l02006"></a><span class="lineno"> 2006</span>        <span class="keywordflow">for</span>(i = bytewidth; i &lt;    length; i++) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[i] = scanline[i] - ((scanline[i - bytewidth] + prevline[i]) / 2);</div>
<div class="line"><a id="l02007" name="l02007"></a><span class="lineno"> 2007</span>      }</div>
<div class="line"><a id="l02008" name="l02008"></a><span class="lineno"> 2008</span>      <span class="keywordflow">else</span></div>
<div class="line"><a id="l02009" name="l02009"></a><span class="lineno"> 2009</span>      {</div>
<div class="line"><a id="l02010" name="l02010"></a><span class="lineno"> 2010</span>        <span class="keywordflow">for</span>(i =         0; i &lt; length; i++) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[i] = scanline[i];</div>
<div class="line"><a id="l02011" name="l02011"></a><span class="lineno"> 2011</span>        <span class="keywordflow">for</span>(i = bytewidth; i &lt; length; i++) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[i] = scanline[i] - scanline[i - bytewidth] / 2;</div>
<div class="line"><a id="l02012" name="l02012"></a><span class="lineno"> 2012</span>      }</div>
<div class="line"><a id="l02013" name="l02013"></a><span class="lineno"> 2013</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02014" name="l02014"></a><span class="lineno"> 2014</span>    <span class="keywordflow">case</span> 4:</div>
<div class="line"><a id="l02015" name="l02015"></a><span class="lineno"> 2015</span>      <span class="keywordflow">if</span>(prevline)</div>
<div class="line"><a id="l02016" name="l02016"></a><span class="lineno"> 2016</span>      {</div>
<div class="line"><a id="l02017" name="l02017"></a><span class="lineno"> 2017</span>        <span class="keywordflow">for</span>(i =         0; i &lt; bytewidth; i++) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[i] = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(scanline[i] - <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad6cd8facac090f1da5e2095f647292c3">paethPredictor</a>(0, prevline[i], 0));</div>
<div class="line"><a id="l02018" name="l02018"></a><span class="lineno"> 2018</span>        <span class="keywordflow">for</span>(i = bytewidth; i &lt;    length; i++) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[i] = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(scanline[i] - <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad6cd8facac090f1da5e2095f647292c3">paethPredictor</a>(scanline[i - bytewidth], prevline[i], prevline[i - bytewidth]));</div>
<div class="line"><a id="l02019" name="l02019"></a><span class="lineno"> 2019</span>      }</div>
<div class="line"><a id="l02020" name="l02020"></a><span class="lineno"> 2020</span>      <span class="keywordflow">else</span></div>
<div class="line"><a id="l02021" name="l02021"></a><span class="lineno"> 2021</span>      {</div>
<div class="line"><a id="l02022" name="l02022"></a><span class="lineno"> 2022</span>        <span class="keywordflow">for</span>(i =         0; i &lt; bytewidth; i++) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[i] = scanline[i];</div>
<div class="line"><a id="l02023" name="l02023"></a><span class="lineno"> 2023</span>        <span class="keywordflow">for</span>(i = bytewidth; i &lt;    length; i++) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[i] = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)(scanline[i] - <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad6cd8facac090f1da5e2095f647292c3">paethPredictor</a>(scanline[i - bytewidth], 0, 0));</div>
<div class="line"><a id="l02024" name="l02024"></a><span class="lineno"> 2024</span>      }</div>
<div class="line"><a id="l02025" name="l02025"></a><span class="lineno"> 2025</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02026" name="l02026"></a><span class="lineno"> 2026</span>  <span class="keywordflow">default</span>: <span class="keywordflow">return</span>; <span class="comment">/*nonexistent filter type given*/</span></div>
<div class="line"><a id="l02027" name="l02027"></a><span class="lineno"> 2027</span>  }</div>
<div class="line"><a id="l02028" name="l02028"></a><span class="lineno"> 2028</span>}</div>
<div class="line"><a id="l02029" name="l02029"></a><span class="lineno"> 2029</span> </div>
<div class="line"><a id="l02030" name="l02030"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#adc247413ddc1523b94f7207baacce739"> 2030</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#adc247413ddc1523b94f7207baacce739">filter</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* in, <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a>, <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a>, <span class="keyword">const</span> <a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* info)</div>
<div class="line"><a id="l02031" name="l02031"></a><span class="lineno"> 2031</span>{</div>
<div class="line"><a id="l02032" name="l02032"></a><span class="lineno"> 2032</span>  <span class="comment">/*</span></div>
<div class="line"><a id="l02033" name="l02033"></a><span class="lineno"> 2033</span><span class="comment">  For PNG filter method 0</span></div>
<div class="line"><a id="l02034" name="l02034"></a><span class="lineno"> 2034</span><span class="comment">  out must be a buffer with as size: h + (w * h * bpp + 7) / 8, because there are the scanlines with 1 extra byte per scanline</span></div>
<div class="line"><a id="l02035" name="l02035"></a><span class="lineno"> 2035</span><span class="comment"></span> </div>
<div class="line"><a id="l02036" name="l02036"></a><span class="lineno"> 2036</span><span class="comment">  There is a nice heuristic described here: http://www.cs.toronto.edu/~cosmin/pngtech/optipng.html. It says:</span></div>
<div class="line"><a id="l02037" name="l02037"></a><span class="lineno"> 2037</span><span class="comment">   *  If the image type is Palette, or the bit depth is smaller than 8, then do not filter the image (i.e. use fixed filtering, with the filter None).</span></div>
<div class="line"><a id="l02038" name="l02038"></a><span class="lineno"> 2038</span><span class="comment">   * (The other case) If the image type is Grayscale or RGB (with or without Alpha), and the bit depth is not smaller than 8, then use adaptive filtering heuristic as follows: independently for each row, apply all five filters and select the filter that produces the smallest sum of absolute values per row.</span></div>
<div class="line"><a id="l02039" name="l02039"></a><span class="lineno"> 2039</span><span class="comment"></span> </div>
<div class="line"><a id="l02040" name="l02040"></a><span class="lineno"> 2040</span><span class="comment">  Here the above method is used mostly. Note though that it appears to be better to use the adaptive filtering on the plasma 8-bit palette example, but that image isn&#39;t the best reference for palette images in general.</span></div>
<div class="line"><a id="l02041" name="l02041"></a><span class="lineno"> 2041</span><span class="comment">  */</span></div>
<div class="line"><a id="l02042" name="l02042"></a><span class="lineno"> 2042</span> </div>
<div class="line"><a id="l02043" name="l02043"></a><span class="lineno"> 2043</span>  <span class="keywordtype">unsigned</span> bpp = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a2ff4c2a69c357378cf11dfeca7383b31">LodePNG_InfoColor_getBpp</a>(info);</div>
<div class="line"><a id="l02044" name="l02044"></a><span class="lineno"> 2044</span>  <span class="keywordtype">size_t</span> linebytes = (<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a> * bpp + 7) / 8; <span class="comment">/*the width of a scanline in bytes, not including the filter type*/</span></div>
<div class="line"><a id="l02045" name="l02045"></a><span class="lineno"> 2045</span>  <span class="keywordtype">size_t</span> bytewidth = (bpp + 7) / 8; <span class="comment">/*bytewidth is used for filtering, is 1 when bpp &lt; 8, number of bytes per pixel otherwise*/</span></div>
<div class="line"><a id="l02046" name="l02046"></a><span class="lineno"> 2046</span>  <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* prevline = 0;</div>
<div class="line"><a id="l02047" name="l02047"></a><span class="lineno"> 2047</span>  <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a>;</div>
<div class="line"><a id="l02048" name="l02048"></a><span class="lineno"> 2048</span>  <span class="keywordtype">unsigned</span> heuristic;</div>
<div class="line"><a id="l02049" name="l02049"></a><span class="lineno"> 2049</span>  <span class="keywordtype">unsigned</span> error = 0;</div>
<div class="line"><a id="l02050" name="l02050"></a><span class="lineno"> 2050</span> </div>
<div class="line"><a id="l02051" name="l02051"></a><span class="lineno"> 2051</span>  <span class="keywordflow">if</span>(bpp == 0) <span class="keywordflow">return</span> 31; <span class="comment">/*invalid color type*/</span></div>
<div class="line"><a id="l02052" name="l02052"></a><span class="lineno"> 2052</span> </div>
<div class="line"><a id="l02053" name="l02053"></a><span class="lineno"> 2053</span>  <span class="comment">/*choose heuristic as described above*/</span></div>
<div class="line"><a id="l02054" name="l02054"></a><span class="lineno"> 2054</span>  <span class="keywordflow">if</span>(info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> == 3 || info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">bitDepth</a> &lt; 8) heuristic = 0;</div>
<div class="line"><a id="l02055" name="l02055"></a><span class="lineno"> 2055</span>  <span class="keywordflow">else</span> heuristic = 1;</div>
<div class="line"><a id="l02056" name="l02056"></a><span class="lineno"> 2056</span> </div>
<div class="line"><a id="l02057" name="l02057"></a><span class="lineno"> 2057</span>  <span class="keywordflow">if</span>(heuristic == 0) <span class="comment">/*None filtertype for everything*/</span></div>
<div class="line"><a id="l02058" name="l02058"></a><span class="lineno"> 2058</span>  {</div>
<div class="line"><a id="l02059" name="l02059"></a><span class="lineno"> 2059</span>    <span class="keywordflow">for</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a> = 0; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a> &lt; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a>; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a>++)</div>
<div class="line"><a id="l02060" name="l02060"></a><span class="lineno"> 2060</span>    {</div>
<div class="line"><a id="l02061" name="l02061"></a><span class="lineno"> 2061</span>      <span class="keywordtype">size_t</span> outindex = (1 + linebytes) * <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a>; <span class="comment">/*the extra filterbyte added to each row*/</span></div>
<div class="line"><a id="l02062" name="l02062"></a><span class="lineno"> 2062</span>      <span class="keywordtype">size_t</span> inindex = linebytes * <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a>;</div>
<div class="line"><a id="l02063" name="l02063"></a><span class="lineno"> 2063</span>      <span class="keyword">const</span> <span class="keywordtype">unsigned</span> TYPE = 0;</div>
<div class="line"><a id="l02064" name="l02064"></a><span class="lineno"> 2064</span>      <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[outindex] = TYPE; <span class="comment">/*filter type byte*/</span></div>
<div class="line"><a id="l02065" name="l02065"></a><span class="lineno"> 2065</span>      <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a8ca5670df4a17d12d10c63d21330c947">filterScanline</a>(&amp;<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[outindex + 1], &amp;in[inindex], prevline, linebytes, bytewidth, TYPE);</div>
<div class="line"><a id="l02066" name="l02066"></a><span class="lineno"> 2066</span>      prevline = &amp;in[inindex];</div>
<div class="line"><a id="l02067" name="l02067"></a><span class="lineno"> 2067</span>    }</div>
<div class="line"><a id="l02068" name="l02068"></a><span class="lineno"> 2068</span>  }</div>
<div class="line"><a id="l02069" name="l02069"></a><span class="lineno"> 2069</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(heuristic == 1) <span class="comment">/*adaptive filtering*/</span></div>
<div class="line"><a id="l02070" name="l02070"></a><span class="lineno"> 2070</span>  {</div>
<div class="line"><a id="l02071" name="l02071"></a><span class="lineno"> 2071</span>    <span class="keywordtype">size_t</span> sum[5];</div>
<div class="line"><a id="l02072" name="l02072"></a><span class="lineno"> 2072</span>    <a class="code hl_struct" href="structucvector.html">ucvector</a> attempt[5]; <span class="comment">/*five filtering attempts, one for each filter type*/</span></div>
<div class="line"><a id="l02073" name="l02073"></a><span class="lineno"> 2073</span>    <span class="keywordtype">size_t</span> smallest = 0;</div>
<div class="line"><a id="l02074" name="l02074"></a><span class="lineno"> 2074</span>    <span class="keywordtype">unsigned</span> type, bestType = 0;</div>
<div class="line"><a id="l02075" name="l02075"></a><span class="lineno"> 2075</span> </div>
<div class="line"><a id="l02076" name="l02076"></a><span class="lineno"> 2076</span>    <span class="keywordflow">for</span>(type = 0; type &lt; 5; type++) <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a1b58c07819eec4ff7e903138c08eb502">ucvector_init</a>(&amp;attempt[type]);</div>
<div class="line"><a id="l02077" name="l02077"></a><span class="lineno"> 2077</span>    <span class="keywordflow">for</span>(type = 0; type &lt; 5; type++)</div>
<div class="line"><a id="l02078" name="l02078"></a><span class="lineno"> 2078</span>    {</div>
<div class="line"><a id="l02079" name="l02079"></a><span class="lineno"> 2079</span>      <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ae4e2da90ae4abb858852f211eb28d622">ucvector_resize</a>(&amp;attempt[type], linebytes)) { error = 9949; <span class="keywordflow">break</span>; }</div>
<div class="line"><a id="l02080" name="l02080"></a><span class="lineno"> 2080</span>    }</div>
<div class="line"><a id="l02081" name="l02081"></a><span class="lineno"> 2081</span> </div>
<div class="line"><a id="l02082" name="l02082"></a><span class="lineno"> 2082</span>    <span class="keywordflow">if</span>(!error)</div>
<div class="line"><a id="l02083" name="l02083"></a><span class="lineno"> 2083</span>    {</div>
<div class="line"><a id="l02084" name="l02084"></a><span class="lineno"> 2084</span>      <span class="keywordflow">for</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a> = 0; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a> &lt; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a>; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a>++)</div>
<div class="line"><a id="l02085" name="l02085"></a><span class="lineno"> 2085</span>      {</div>
<div class="line"><a id="l02086" name="l02086"></a><span class="lineno"> 2086</span>        <span class="comment">/*try the 5 filter types*/</span></div>
<div class="line"><a id="l02087" name="l02087"></a><span class="lineno"> 2087</span>        <span class="keywordflow">for</span>(type = 0; type &lt; 5; type++)</div>
<div class="line"><a id="l02088" name="l02088"></a><span class="lineno"> 2088</span>        {</div>
<div class="line"><a id="l02089" name="l02089"></a><span class="lineno"> 2089</span>          <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a8ca5670df4a17d12d10c63d21330c947">filterScanline</a>(attempt[type].<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>, &amp;in[<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a> * linebytes], prevline, linebytes, bytewidth, type);</div>
<div class="line"><a id="l02090" name="l02090"></a><span class="lineno"> 2090</span> </div>
<div class="line"><a id="l02091" name="l02091"></a><span class="lineno"> 2091</span>          <span class="comment">/*calculate the sum of the result*/</span></div>
<div class="line"><a id="l02092" name="l02092"></a><span class="lineno"> 2092</span>          sum[type] = 0;</div>
<div class="line"><a id="l02093" name="l02093"></a><span class="lineno"> 2093</span>          <span class="keywordflow">for</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> = 0; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> &lt; attempt[type].<a class="code hl_variable" href="structucvector.html#a27c99c34de0c5b3ca0c242d402c69499">size</a>; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>+=3) sum[type] += attempt[type].<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>[<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>]; <span class="comment">/*note that not all pixels are checked to speed this up while still having probably the best choice*/</span></div>
<div class="line"><a id="l02094" name="l02094"></a><span class="lineno"> 2094</span> </div>
<div class="line"><a id="l02095" name="l02095"></a><span class="lineno"> 2095</span>          <span class="comment">/*check if this is smallest sum (or if type == 0 it&#39;s the first case so always store the values)*/</span></div>
<div class="line"><a id="l02096" name="l02096"></a><span class="lineno"> 2096</span>          <span class="keywordflow">if</span>(type == 0 || sum[type] &lt; smallest)</div>
<div class="line"><a id="l02097" name="l02097"></a><span class="lineno"> 2097</span>          {</div>
<div class="line"><a id="l02098" name="l02098"></a><span class="lineno"> 2098</span>            bestType = type;</div>
<div class="line"><a id="l02099" name="l02099"></a><span class="lineno"> 2099</span>            smallest = sum[type];</div>
<div class="line"><a id="l02100" name="l02100"></a><span class="lineno"> 2100</span>          }</div>
<div class="line"><a id="l02101" name="l02101"></a><span class="lineno"> 2101</span>        }</div>
<div class="line"><a id="l02102" name="l02102"></a><span class="lineno"> 2102</span> </div>
<div class="line"><a id="l02103" name="l02103"></a><span class="lineno"> 2103</span>        prevline = &amp;in[<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a> * linebytes];</div>
<div class="line"><a id="l02104" name="l02104"></a><span class="lineno"> 2104</span> </div>
<div class="line"><a id="l02105" name="l02105"></a><span class="lineno"> 2105</span>        <span class="comment">/*now fill the out values*/</span></div>
<div class="line"><a id="l02106" name="l02106"></a><span class="lineno"> 2106</span>        <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a> * (linebytes + 1)] = bestType; <span class="comment">/*the first byte of a scanline will be the filter type*/</span></div>
<div class="line"><a id="l02107" name="l02107"></a><span class="lineno"> 2107</span>        <span class="keywordflow">for</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> = 0; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> &lt; linebytes; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>++) <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a> * (linebytes + 1) + 1 + <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>] = attempt[bestType].<a class="code hl_variable" href="structucvector.html#a803973058c172963314ff05217b57d60">data</a>[<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>];</div>
<div class="line"><a id="l02108" name="l02108"></a><span class="lineno"> 2108</span>      }</div>
<div class="line"><a id="l02109" name="l02109"></a><span class="lineno"> 2109</span>    }</div>
<div class="line"><a id="l02110" name="l02110"></a><span class="lineno"> 2110</span> </div>
<div class="line"><a id="l02111" name="l02111"></a><span class="lineno"> 2111</span>    <span class="keywordflow">for</span>(type = 0; type &lt; 5; type++) <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad689bf84470238e26b01524631d778ec">ucvector_cleanup</a>(&amp;attempt[type]);</div>
<div class="line"><a id="l02112" name="l02112"></a><span class="lineno"> 2112</span>  }</div>
<div class="line"><a id="l02113" name="l02113"></a><span class="lineno"> 2113</span> </div>
<div class="line"><a id="l02114" name="l02114"></a><span class="lineno"> 2114</span>  <span class="keywordflow">return</span> error;</div>
<div class="line"><a id="l02115" name="l02115"></a><span class="lineno"> 2115</span>}</div>
<div class="line"><a id="l02116" name="l02116"></a><span class="lineno"> 2116</span> </div>
<div class="line"><a id="l02117" name="l02117"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a0ab19d681e279413b79074057ea80a3e"> 2117</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a0ab19d681e279413b79074057ea80a3e">addPaddingBits</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* in, <span class="keywordtype">size_t</span> olinebits, <span class="keywordtype">size_t</span> ilinebits, <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a>)</div>
<div class="line"><a id="l02118" name="l02118"></a><span class="lineno"> 2118</span>{</div>
<div class="line"><a id="l02119" name="l02119"></a><span class="lineno"> 2119</span>  <span class="comment">/*The opposite of the removePaddingBits function</span></div>
<div class="line"><a id="l02120" name="l02120"></a><span class="lineno"> 2120</span><span class="comment">  olinebits must be &gt;= ilinebits*/</span></div>
<div class="line"><a id="l02121" name="l02121"></a><span class="lineno"> 2121</span>  <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a>;</div>
<div class="line"><a id="l02122" name="l02122"></a><span class="lineno"> 2122</span>  <span class="keywordtype">size_t</span> diff = olinebits - ilinebits;</div>
<div class="line"><a id="l02123" name="l02123"></a><span class="lineno"> 2123</span>  <span class="keywordtype">size_t</span> obp = 0, ibp = 0; <span class="comment">/*bit pointers*/</span></div>
<div class="line"><a id="l02124" name="l02124"></a><span class="lineno"> 2124</span>  <span class="keywordflow">for</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a> = 0; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a> &lt; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a>; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a>++)</div>
<div class="line"><a id="l02125" name="l02125"></a><span class="lineno"> 2125</span>  {</div>
<div class="line"><a id="l02126" name="l02126"></a><span class="lineno"> 2126</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>;</div>
<div class="line"><a id="l02127" name="l02127"></a><span class="lineno"> 2127</span>    <span class="keywordflow">for</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> = 0; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> &lt; ilinebits; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>++)</div>
<div class="line"><a id="l02128" name="l02128"></a><span class="lineno"> 2128</span>    {</div>
<div class="line"><a id="l02129" name="l02129"></a><span class="lineno"> 2129</span>      <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> bit = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa65d1743dade2919f44301461bde054d">readBitFromReversedStream</a>(&amp;ibp, in);</div>
<div class="line"><a id="l02130" name="l02130"></a><span class="lineno"> 2130</span>      <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#afab63835fa156b812c454a4a96b7b28b">setBitOfReversedStream</a>(&amp;obp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, bit);</div>
<div class="line"><a id="l02131" name="l02131"></a><span class="lineno"> 2131</span>    }</div>
<div class="line"><a id="l02132" name="l02132"></a><span class="lineno"> 2132</span>    <span class="comment">/*obp += diff; --&gt; no, fill in some value in the padding bits too, to avoid &quot;Use of uninitialised value of size ###&quot; warning from valgrind*/</span></div>
<div class="line"><a id="l02133" name="l02133"></a><span class="lineno"> 2133</span>    <span class="keywordflow">for</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> = 0; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> &lt; diff; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>++) <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#afab63835fa156b812c454a4a96b7b28b">setBitOfReversedStream</a>(&amp;obp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, 0);</div>
<div class="line"><a id="l02134" name="l02134"></a><span class="lineno"> 2134</span>  }</div>
<div class="line"><a id="l02135" name="l02135"></a><span class="lineno"> 2135</span>}</div>
<div class="line"><a id="l02136" name="l02136"></a><span class="lineno"> 2136</span> </div>
<div class="line"><a id="l02137" name="l02137"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a86f1534dd35f6da700dcb226bbfe2c57"> 2137</a></span><span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a86f1534dd35f6da700dcb226bbfe2c57">Adam7_interlace</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* in, <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a>, <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a>, <span class="keywordtype">unsigned</span> bpp)</div>
<div class="line"><a id="l02138" name="l02138"></a><span class="lineno"> 2138</span>{</div>
<div class="line"><a id="l02139" name="l02139"></a><span class="lineno"> 2139</span>  <span class="comment">/*Note: this function works on image buffers WITHOUT padding bits at end of scanlines with non-multiple-of-8 bit amounts, only between reduced images is padding*/</span></div>
<div class="line"><a id="l02140" name="l02140"></a><span class="lineno"> 2140</span>  <span class="keywordtype">unsigned</span> passw[7], passh[7]; <span class="keywordtype">size_t</span> filter_passstart[8], padded_passstart[8], passstart[8];</div>
<div class="line"><a id="l02141" name="l02141"></a><span class="lineno"> 2141</span>  <span class="keywordtype">unsigned</span> i;</div>
<div class="line"><a id="l02142" name="l02142"></a><span class="lineno"> 2142</span> </div>
<div class="line"><a id="l02143" name="l02143"></a><span class="lineno"> 2143</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a18aff167f1895955ac0f831555e9cff3">Adam7_getpassvalues</a>(passw, passh, filter_passstart, padded_passstart, passstart, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a>, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a>, bpp);</div>
<div class="line"><a id="l02144" name="l02144"></a><span class="lineno"> 2144</span> </div>
<div class="line"><a id="l02145" name="l02145"></a><span class="lineno"> 2145</span>  <span class="keywordflow">if</span>(bpp &gt;= 8)</div>
<div class="line"><a id="l02146" name="l02146"></a><span class="lineno"> 2146</span>  {</div>
<div class="line"><a id="l02147" name="l02147"></a><span class="lineno"> 2147</span>    <span class="keywordflow">for</span>(i = 0; i &lt; 7; i++)</div>
<div class="line"><a id="l02148" name="l02148"></a><span class="lineno"> 2148</span>    {</div>
<div class="line"><a id="l02149" name="l02149"></a><span class="lineno"> 2149</span>      <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a>, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#aadf2a4297af25f4a140ea29500e8d47d">b</a>;</div>
<div class="line"><a id="l02150" name="l02150"></a><span class="lineno"> 2150</span>      <span class="keywordtype">size_t</span> bytewidth = bpp / 8;</div>
<div class="line"><a id="l02151" name="l02151"></a><span class="lineno"> 2151</span>      <span class="keywordflow">for</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a> = 0; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a> &lt; passh[i]; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a>++)</div>
<div class="line"><a id="l02152" name="l02152"></a><span class="lineno"> 2152</span>      <span class="keywordflow">for</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> = 0; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> &lt; passw[i]; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>++)</div>
<div class="line"><a id="l02153" name="l02153"></a><span class="lineno"> 2153</span>      {</div>
<div class="line"><a id="l02154" name="l02154"></a><span class="lineno"> 2154</span>        <span class="keywordtype">size_t</span> pixelinstart = ((<a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a851ee080587d6fe775d09e376947c880">ADAM7_IY</a>[i] + <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a> * <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a1e68ce500702fd59580e735e977b84f3">ADAM7_DY</a>[i]) * <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a> + <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a85488c2cdadbed8c6ac4261a3922e186">ADAM7_IX</a>[i] + <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> * <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#af3ae20779df70d02c4a2d6195e72c976">ADAM7_DX</a>[i]) * bytewidth;</div>
<div class="line"><a id="l02155" name="l02155"></a><span class="lineno"> 2155</span>        <span class="keywordtype">size_t</span> pixeloutstart = passstart[i] + (<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a> * passw[i] + <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>) * bytewidth;</div>
<div class="line"><a id="l02156" name="l02156"></a><span class="lineno"> 2156</span>        <span class="keywordflow">for</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#aadf2a4297af25f4a140ea29500e8d47d">b</a> = 0; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#aadf2a4297af25f4a140ea29500e8d47d">b</a> &lt; bytewidth; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#aadf2a4297af25f4a140ea29500e8d47d">b</a>++)</div>
<div class="line"><a id="l02157" name="l02157"></a><span class="lineno"> 2157</span>        {</div>
<div class="line"><a id="l02158" name="l02158"></a><span class="lineno"> 2158</span>          <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>[pixeloutstart + <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#aadf2a4297af25f4a140ea29500e8d47d">b</a>] = in[pixelinstart + <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#aadf2a4297af25f4a140ea29500e8d47d">b</a>];</div>
<div class="line"><a id="l02159" name="l02159"></a><span class="lineno"> 2159</span>        }</div>
<div class="line"><a id="l02160" name="l02160"></a><span class="lineno"> 2160</span>      }</div>
<div class="line"><a id="l02161" name="l02161"></a><span class="lineno"> 2161</span>    }</div>
<div class="line"><a id="l02162" name="l02162"></a><span class="lineno"> 2162</span>  }</div>
<div class="line"><a id="l02163" name="l02163"></a><span class="lineno"> 2163</span>  <span class="keywordflow">else</span> <span class="comment">/*bpp &lt; 8: Adam7 with pixels &lt; 8 bit is a bit trickier: with bit pointers*/</span></div>
<div class="line"><a id="l02164" name="l02164"></a><span class="lineno"> 2164</span>  {</div>
<div class="line"><a id="l02165" name="l02165"></a><span class="lineno"> 2165</span>    <span class="keywordflow">for</span>(i = 0; i &lt; 7; i++)</div>
<div class="line"><a id="l02166" name="l02166"></a><span class="lineno"> 2166</span>    {</div>
<div class="line"><a id="l02167" name="l02167"></a><span class="lineno"> 2167</span>      <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a>, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#aadf2a4297af25f4a140ea29500e8d47d">b</a>;</div>
<div class="line"><a id="l02168" name="l02168"></a><span class="lineno"> 2168</span>      <span class="keywordtype">unsigned</span> ilinebits = bpp * passw[i];</div>
<div class="line"><a id="l02169" name="l02169"></a><span class="lineno"> 2169</span>      <span class="keywordtype">unsigned</span> olinebits = bpp * <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a>;</div>
<div class="line"><a id="l02170" name="l02170"></a><span class="lineno"> 2170</span>      <span class="keywordtype">size_t</span> obp, ibp; <span class="comment">/*bit pointers (for out and in buffer)*/</span></div>
<div class="line"><a id="l02171" name="l02171"></a><span class="lineno"> 2171</span>      <span class="keywordflow">for</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a> = 0; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a> &lt; passh[i]; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a>++)</div>
<div class="line"><a id="l02172" name="l02172"></a><span class="lineno"> 2172</span>      <span class="keywordflow">for</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> = 0; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> &lt; passw[i]; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a>++)</div>
<div class="line"><a id="l02173" name="l02173"></a><span class="lineno"> 2173</span>      {</div>
<div class="line"><a id="l02174" name="l02174"></a><span class="lineno"> 2174</span>        ibp = (<a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a851ee080587d6fe775d09e376947c880">ADAM7_IY</a>[i] + <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a> * <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a1e68ce500702fd59580e735e977b84f3">ADAM7_DY</a>[i]) * olinebits + (<a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#a85488c2cdadbed8c6ac4261a3922e186">ADAM7_IX</a>[i] + <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> * <a class="code hl_variable" href="liblodepng_2lodepng_8cpp.html#af3ae20779df70d02c4a2d6195e72c976">ADAM7_DX</a>[i]) * bpp;</div>
<div class="line"><a id="l02175" name="l02175"></a><span class="lineno"> 2175</span>        obp = (8 * passstart[i]) + (<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a> * ilinebits + <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a> * bpp);</div>
<div class="line"><a id="l02176" name="l02176"></a><span class="lineno"> 2176</span>        <span class="keywordflow">for</span>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#aadf2a4297af25f4a140ea29500e8d47d">b</a> = 0; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#aadf2a4297af25f4a140ea29500e8d47d">b</a> &lt; bpp; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#aadf2a4297af25f4a140ea29500e8d47d">b</a>++)</div>
<div class="line"><a id="l02177" name="l02177"></a><span class="lineno"> 2177</span>        {</div>
<div class="line"><a id="l02178" name="l02178"></a><span class="lineno"> 2178</span>          <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> bit = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa65d1743dade2919f44301461bde054d">readBitFromReversedStream</a>(&amp;ibp, in);</div>
<div class="line"><a id="l02179" name="l02179"></a><span class="lineno"> 2179</span>          <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#afab63835fa156b812c454a4a96b7b28b">setBitOfReversedStream</a>(&amp;obp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, bit);</div>
<div class="line"><a id="l02180" name="l02180"></a><span class="lineno"> 2180</span>        }</div>
<div class="line"><a id="l02181" name="l02181"></a><span class="lineno"> 2181</span>      }</div>
<div class="line"><a id="l02182" name="l02182"></a><span class="lineno"> 2182</span>    }</div>
<div class="line"><a id="l02183" name="l02183"></a><span class="lineno"> 2183</span>  }</div>
<div class="line"><a id="l02184" name="l02184"></a><span class="lineno"> 2184</span>}</div>
<div class="line"><a id="l02185" name="l02185"></a><span class="lineno"> 2185</span> </div>
<div class="line"><a id="l02186" name="l02186"></a><span class="lineno"> 2186</span><span class="comment">/*out must be buffer big enough to contain uncompressed IDAT chunk data, and in must contain the full image*/</span></div>
<div class="line"><a id="l02187" name="l02187"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a18dd1f62212e629248128eec9ee2641d"> 2187</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a18dd1f62212e629248128eec9ee2641d">preProcessScanlines</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>** <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="keywordtype">size_t</span>* outsize, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* in, <span class="keyword">const</span> <a class="code hl_struct" href="struct_lode_p_n_g___info_png.html">LodePNG_InfoPng</a>* infoPng) <span class="comment">/*return value is error*/</span></div>
<div class="line"><a id="l02188" name="l02188"></a><span class="lineno"> 2188</span>{</div>
<div class="line"><a id="l02189" name="l02189"></a><span class="lineno"> 2189</span>  <span class="comment">/*</span></div>
<div class="line"><a id="l02190" name="l02190"></a><span class="lineno"> 2190</span><span class="comment">  This function converts the pure 2D image with the PNG&#39;s colortype, into filtered-padded-interlaced data. Steps:</span></div>
<div class="line"><a id="l02191" name="l02191"></a><span class="lineno"> 2191</span><span class="comment">  *) if no Adam7: 1) add padding bits (= possible extra bits per scanline if bpp &lt; 8) 2) filter</span></div>
<div class="line"><a id="l02192" name="l02192"></a><span class="lineno"> 2192</span><span class="comment">  *) if adam7: 1) Adam7_interlace 2) 7x add padding bits 3) 7x filter</span></div>
<div class="line"><a id="l02193" name="l02193"></a><span class="lineno"> 2193</span><span class="comment">  */</span></div>
<div class="line"><a id="l02194" name="l02194"></a><span class="lineno"> 2194</span>  <span class="keywordtype">unsigned</span> bpp = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a2ff4c2a69c357378cf11dfeca7383b31">LodePNG_InfoColor_getBpp</a>(&amp;infoPng-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>);</div>
<div class="line"><a id="l02195" name="l02195"></a><span class="lineno"> 2195</span>  <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a> = infoPng-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#a74be99b177b28f3178c02139c4b7f149">width</a>;</div>
<div class="line"><a id="l02196" name="l02196"></a><span class="lineno"> 2196</span>  <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a> = infoPng-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#a4b87ec9649e7177af7a5f5e08e5bc491">height</a>;</div>
<div class="line"><a id="l02197" name="l02197"></a><span class="lineno"> 2197</span>  <span class="keywordtype">unsigned</span> error = 0;</div>
<div class="line"><a id="l02198" name="l02198"></a><span class="lineno"> 2198</span> </div>
<div class="line"><a id="l02199" name="l02199"></a><span class="lineno"> 2199</span>  <span class="keywordflow">if</span>(infoPng-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#ad261cbe064eb69a92638e880d99347ca">interlaceMethod</a> == 0)</div>
<div class="line"><a id="l02200" name="l02200"></a><span class="lineno"> 2200</span>  {</div>
<div class="line"><a id="l02201" name="l02201"></a><span class="lineno"> 2201</span>    *outsize = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a> + (<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a> * ((<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a> * bpp + 7) / 8)); <span class="comment">/*image size plus an extra byte per scanline + possible padding bits*/</span></div>
<div class="line"><a id="l02202" name="l02202"></a><span class="lineno"> 2202</span>    *<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)malloc(*outsize);</div>
<div class="line"><a id="l02203" name="l02203"></a><span class="lineno"> 2203</span>    <span class="keywordflow">if</span>(!(*<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>) &amp;&amp; (*outsize)) error = 9950;</div>
<div class="line"><a id="l02204" name="l02204"></a><span class="lineno"> 2204</span> </div>
<div class="line"><a id="l02205" name="l02205"></a><span class="lineno"> 2205</span>    <span class="keywordflow">if</span>(!error)</div>
<div class="line"><a id="l02206" name="l02206"></a><span class="lineno"> 2206</span>    {</div>
<div class="line"><a id="l02207" name="l02207"></a><span class="lineno"> 2207</span>      <span class="keywordflow">if</span>(bpp &lt; 8 &amp;&amp; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a> * bpp != ((<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a> * bpp + 7) / 8) * 8) <span class="comment">/*non multiple of 8 bits per scanline, padding bits needed per scanline*/</span></div>
<div class="line"><a id="l02208" name="l02208"></a><span class="lineno"> 2208</span>      {</div>
<div class="line"><a id="l02209" name="l02209"></a><span class="lineno"> 2209</span>        <a class="code hl_struct" href="structucvector.html">ucvector</a> padded;</div>
<div class="line"><a id="l02210" name="l02210"></a><span class="lineno"> 2210</span>        <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a1b58c07819eec4ff7e903138c08eb502">ucvector_init</a>(&amp;padded);</div>
<div class="line"><a id="l02211" name="l02211"></a><span class="lineno"> 2211</span>        <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ae4e2da90ae4abb858852f211eb28d622">ucvector_resize</a>(&amp;padded, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a> * ((<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a> * bpp + 7) / 8))) error = 9951;</div>
<div class="line"><a id="l02212" name="l02212"></a><span class="lineno"> 2212</span>        <span class="keywordflow">if</span>(!error)</div>
<div class="line"><a id="l02213" name="l02213"></a><span class="lineno"> 2213</span>        {</div>
<div class="line"><a id="l02214" name="l02214"></a><span class="lineno"> 2214</span>          <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a0ab19d681e279413b79074057ea80a3e">addPaddingBits</a>(padded.<a class="code hl_variable" href="structucvector.html#a803973058c172963314ff05217b57d60">data</a>, in, ((<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a> * bpp + 7) / 8) * 8, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a> * bpp, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a>);</div>
<div class="line"><a id="l02215" name="l02215"></a><span class="lineno"> 2215</span>          error = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#adc247413ddc1523b94f7207baacce739">filter</a>(*<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, padded.<a class="code hl_variable" href="structucvector.html#a803973058c172963314ff05217b57d60">data</a>, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a>, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a>, &amp;infoPng-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>);</div>
<div class="line"><a id="l02216" name="l02216"></a><span class="lineno"> 2216</span>        }</div>
<div class="line"><a id="l02217" name="l02217"></a><span class="lineno"> 2217</span>        <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad689bf84470238e26b01524631d778ec">ucvector_cleanup</a>(&amp;padded);</div>
<div class="line"><a id="l02218" name="l02218"></a><span class="lineno"> 2218</span>      }</div>
<div class="line"><a id="l02219" name="l02219"></a><span class="lineno"> 2219</span>      <span class="keywordflow">else</span> error = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#adc247413ddc1523b94f7207baacce739">filter</a>(*<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, in, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a>, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a>, &amp;infoPng-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>); <span class="comment">/*we can immediately filter into the out buffer, no other steps needed*/</span></div>
<div class="line"><a id="l02220" name="l02220"></a><span class="lineno"> 2220</span>    }</div>
<div class="line"><a id="l02221" name="l02221"></a><span class="lineno"> 2221</span>  }</div>
<div class="line"><a id="l02222" name="l02222"></a><span class="lineno"> 2222</span>  <span class="keywordflow">else</span> <span class="comment">/*interlaceMethod is 1 (Adam7)*/</span></div>
<div class="line"><a id="l02223" name="l02223"></a><span class="lineno"> 2223</span>  {</div>
<div class="line"><a id="l02224" name="l02224"></a><span class="lineno"> 2224</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* adam7 = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)malloc((<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a> * <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a> * bpp + 7) / 8);</div>
<div class="line"><a id="l02225" name="l02225"></a><span class="lineno"> 2225</span>    <span class="keywordflow">if</span>(!adam7 &amp;&amp; ((<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a> * <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a> * bpp + 7) / 8)) error = 9952; <span class="comment">/*malloc failed*/</span></div>
<div class="line"><a id="l02226" name="l02226"></a><span class="lineno"> 2226</span> </div>
<div class="line"><a id="l02227" name="l02227"></a><span class="lineno"> 2227</span>    <span class="keywordflow">while</span>(!error) <span class="comment">/*not a real while loop, used to break out to cleanup to avoid a goto*/</span></div>
<div class="line"><a id="l02228" name="l02228"></a><span class="lineno"> 2228</span>    {</div>
<div class="line"><a id="l02229" name="l02229"></a><span class="lineno"> 2229</span>      <span class="keywordtype">unsigned</span> passw[7], passh[7]; <span class="keywordtype">size_t</span> filter_passstart[8], padded_passstart[8], passstart[8];</div>
<div class="line"><a id="l02230" name="l02230"></a><span class="lineno"> 2230</span>      <span class="keywordtype">unsigned</span> i;</div>
<div class="line"><a id="l02231" name="l02231"></a><span class="lineno"> 2231</span> </div>
<div class="line"><a id="l02232" name="l02232"></a><span class="lineno"> 2232</span>      <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a18aff167f1895955ac0f831555e9cff3">Adam7_getpassvalues</a>(passw, passh, filter_passstart, padded_passstart, passstart, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a>, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a>, bpp);</div>
<div class="line"><a id="l02233" name="l02233"></a><span class="lineno"> 2233</span> </div>
<div class="line"><a id="l02234" name="l02234"></a><span class="lineno"> 2234</span>      *outsize = filter_passstart[7]; <span class="comment">/*image size plus an extra byte per scanline + possible padding bits*/</span></div>
<div class="line"><a id="l02235" name="l02235"></a><span class="lineno"> 2235</span>      *<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)malloc(*outsize);</div>
<div class="line"><a id="l02236" name="l02236"></a><span class="lineno"> 2236</span>      <span class="keywordflow">if</span>(!(*<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>) &amp;&amp; (*outsize)) { error = 9953; <span class="keywordflow">break</span>; }</div>
<div class="line"><a id="l02237" name="l02237"></a><span class="lineno"> 2237</span> </div>
<div class="line"><a id="l02238" name="l02238"></a><span class="lineno"> 2238</span>      <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a86f1534dd35f6da700dcb226bbfe2c57">Adam7_interlace</a>(adam7, in, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a>, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a>, bpp);</div>
<div class="line"><a id="l02239" name="l02239"></a><span class="lineno"> 2239</span> </div>
<div class="line"><a id="l02240" name="l02240"></a><span class="lineno"> 2240</span>      <span class="keywordflow">for</span>(i = 0; i &lt; 7; i++)</div>
<div class="line"><a id="l02241" name="l02241"></a><span class="lineno"> 2241</span>      {</div>
<div class="line"><a id="l02242" name="l02242"></a><span class="lineno"> 2242</span>        <span class="keywordflow">if</span>(bpp &lt; 8)</div>
<div class="line"><a id="l02243" name="l02243"></a><span class="lineno"> 2243</span>        {</div>
<div class="line"><a id="l02244" name="l02244"></a><span class="lineno"> 2244</span>          <a class="code hl_struct" href="structucvector.html">ucvector</a> padded;</div>
<div class="line"><a id="l02245" name="l02245"></a><span class="lineno"> 2245</span>          <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a1b58c07819eec4ff7e903138c08eb502">ucvector_init</a>(&amp;padded);</div>
<div class="line"><a id="l02246" name="l02246"></a><span class="lineno"> 2246</span>          <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ae4e2da90ae4abb858852f211eb28d622">ucvector_resize</a>(&amp;padded, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a> * ((<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a> * bpp + 7) / 8))) error = 9954;</div>
<div class="line"><a id="l02247" name="l02247"></a><span class="lineno"> 2247</span>          <span class="keywordflow">if</span>(!error)</div>
<div class="line"><a id="l02248" name="l02248"></a><span class="lineno"> 2248</span>          {</div>
<div class="line"><a id="l02249" name="l02249"></a><span class="lineno"> 2249</span>            <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a0ab19d681e279413b79074057ea80a3e">addPaddingBits</a>(&amp;padded.<a class="code hl_variable" href="structucvector.html#a803973058c172963314ff05217b57d60">data</a>[padded_passstart[i]], &amp;adam7[passstart[i]], ((passw[i] * bpp + 7) / 8) * 8, passw[i] * bpp, passh[i]);</div>
<div class="line"><a id="l02250" name="l02250"></a><span class="lineno"> 2250</span>            error = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#adc247413ddc1523b94f7207baacce739">filter</a>(&amp;(*<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>)[filter_passstart[i]], &amp;padded.<a class="code hl_variable" href="structucvector.html#a803973058c172963314ff05217b57d60">data</a>[padded_passstart[i]], passw[i], passh[i], &amp;infoPng-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>);</div>
<div class="line"><a id="l02251" name="l02251"></a><span class="lineno"> 2251</span>          }</div>
<div class="line"><a id="l02252" name="l02252"></a><span class="lineno"> 2252</span> </div>
<div class="line"><a id="l02253" name="l02253"></a><span class="lineno"> 2253</span>          <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ad689bf84470238e26b01524631d778ec">ucvector_cleanup</a>(&amp;padded);</div>
<div class="line"><a id="l02254" name="l02254"></a><span class="lineno"> 2254</span>        }</div>
<div class="line"><a id="l02255" name="l02255"></a><span class="lineno"> 2255</span>        <span class="keywordflow">else</span></div>
<div class="line"><a id="l02256" name="l02256"></a><span class="lineno"> 2256</span>        {</div>
<div class="line"><a id="l02257" name="l02257"></a><span class="lineno"> 2257</span>          error = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#adc247413ddc1523b94f7207baacce739">filter</a>(&amp;(*<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>)[filter_passstart[i]], &amp;adam7[padded_passstart[i]], passw[i], passh[i], &amp;infoPng-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>);</div>
<div class="line"><a id="l02258" name="l02258"></a><span class="lineno"> 2258</span>        }</div>
<div class="line"><a id="l02259" name="l02259"></a><span class="lineno"> 2259</span>      }</div>
<div class="line"><a id="l02260" name="l02260"></a><span class="lineno"> 2260</span> </div>
<div class="line"><a id="l02261" name="l02261"></a><span class="lineno"> 2261</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02262" name="l02262"></a><span class="lineno"> 2262</span>    }</div>
<div class="line"><a id="l02263" name="l02263"></a><span class="lineno"> 2263</span> </div>
<div class="line"><a id="l02264" name="l02264"></a><span class="lineno"> 2264</span>    free(adam7);</div>
<div class="line"><a id="l02265" name="l02265"></a><span class="lineno"> 2265</span>  }</div>
<div class="line"><a id="l02266" name="l02266"></a><span class="lineno"> 2266</span> </div>
<div class="line"><a id="l02267" name="l02267"></a><span class="lineno"> 2267</span>  <span class="keywordflow">return</span> error;</div>
<div class="line"><a id="l02268" name="l02268"></a><span class="lineno"> 2268</span>}</div>
<div class="line"><a id="l02269" name="l02269"></a><span class="lineno"> 2269</span> </div>
<div class="line"><a id="l02270" name="l02270"></a><span class="lineno"> 2270</span><span class="comment">/*palette must have 4 * palettesize bytes allocated*/</span></div>
<div class="line"><a id="l02271" name="l02271"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#ae752ee94f1a6acf5103584bdf2882fb5"> 2271</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ae752ee94f1a6acf5103584bdf2882fb5">isPaletteFullyOpaque</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="build_2doxygen_2src_2image_8cpp.html#acfe43b36ff6b37d0df7b60495d7b5ea7">palette</a>, <span class="keywordtype">size_t</span> palettesize) <span class="comment">/*palette given in format RGBARGBARGBARGBA...*/</span></div>
<div class="line"><a id="l02272" name="l02272"></a><span class="lineno"> 2272</span>{</div>
<div class="line"><a id="l02273" name="l02273"></a><span class="lineno"> 2273</span>  <span class="keywordtype">size_t</span> i;</div>
<div class="line"><a id="l02274" name="l02274"></a><span class="lineno"> 2274</span>  <span class="keywordflow">for</span>(i = 0; i &lt; palettesize; i++)</div>
<div class="line"><a id="l02275" name="l02275"></a><span class="lineno"> 2275</span>  {</div>
<div class="line"><a id="l02276" name="l02276"></a><span class="lineno"> 2276</span>    <span class="keywordflow">if</span>(<a class="code hl_variable" href="build_2doxygen_2src_2image_8cpp.html#acfe43b36ff6b37d0df7b60495d7b5ea7">palette</a>[4 * i + 3] != 255) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l02277" name="l02277"></a><span class="lineno"> 2277</span>  }</div>
<div class="line"><a id="l02278" name="l02278"></a><span class="lineno"> 2278</span>  <span class="keywordflow">return</span> 1;</div>
<div class="line"><a id="l02279" name="l02279"></a><span class="lineno"> 2279</span>}</div>
<div class="line"><a id="l02280" name="l02280"></a><span class="lineno"> 2280</span> </div>
<div class="line"><a id="l02281" name="l02281"></a><span class="lineno"> 2281</span><span class="comment">/*this function checks if the input image given by the user has no transparent pixels*/</span></div>
<div class="line"><a id="l02282" name="l02282"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a2f88c6042dadfbca407902809012a408"> 2282</a></span><span class="keyword">static</span> <span class="keywordtype">unsigned</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a2f88c6042dadfbca407902809012a408">isFullyOpaque</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* image, <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a>, <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a>, <span class="keyword">const</span> <a class="code hl_struct" href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a>* info)</div>
<div class="line"><a id="l02283" name="l02283"></a><span class="lineno"> 2283</span>{</div>
<div class="line"><a id="l02284" name="l02284"></a><span class="lineno"> 2284</span>  <span class="comment">/*TODO: When the user specified a color key for the input image, then this function must also check for pixels that are the same as the color key and treat those as transparent.*/</span></div>
<div class="line"><a id="l02285" name="l02285"></a><span class="lineno"> 2285</span> </div>
<div class="line"><a id="l02286" name="l02286"></a><span class="lineno"> 2286</span>  <span class="keywordtype">unsigned</span> i, numpixels = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a> * <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a>;</div>
<div class="line"><a id="l02287" name="l02287"></a><span class="lineno"> 2287</span>  <span class="keywordflow">if</span>(info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> == 6)</div>
<div class="line"><a id="l02288" name="l02288"></a><span class="lineno"> 2288</span>  {</div>
<div class="line"><a id="l02289" name="l02289"></a><span class="lineno"> 2289</span>    <span class="keywordflow">if</span>(info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">bitDepth</a> == 8)</div>
<div class="line"><a id="l02290" name="l02290"></a><span class="lineno"> 2290</span>    {</div>
<div class="line"><a id="l02291" name="l02291"></a><span class="lineno"> 2291</span>      <span class="keywordflow">for</span>(i = 0; i &lt; numpixels; i++) <span class="keywordflow">if</span>(image[i * 4 + 3] != 255) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l02292" name="l02292"></a><span class="lineno"> 2292</span>    }</div>
<div class="line"><a id="l02293" name="l02293"></a><span class="lineno"> 2293</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l02294" name="l02294"></a><span class="lineno"> 2294</span>    {</div>
<div class="line"><a id="l02295" name="l02295"></a><span class="lineno"> 2295</span>      <span class="keywordflow">for</span>(i = 0; i &lt; numpixels; i++) <span class="keywordflow">if</span>(image[i * 8 + 6] != 255 || image[i * 8 + 7] != 255) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l02296" name="l02296"></a><span class="lineno"> 2296</span>    }</div>
<div class="line"><a id="l02297" name="l02297"></a><span class="lineno"> 2297</span>    <span class="keywordflow">return</span> 1; <span class="comment">/*no single pixel with alpha channel other than 255 found*/</span></div>
<div class="line"><a id="l02298" name="l02298"></a><span class="lineno"> 2298</span>  }</div>
<div class="line"><a id="l02299" name="l02299"></a><span class="lineno"> 2299</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> == 4)</div>
<div class="line"><a id="l02300" name="l02300"></a><span class="lineno"> 2300</span>  {</div>
<div class="line"><a id="l02301" name="l02301"></a><span class="lineno"> 2301</span>    <span class="keywordflow">if</span>(info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">bitDepth</a> == 8)</div>
<div class="line"><a id="l02302" name="l02302"></a><span class="lineno"> 2302</span>    {</div>
<div class="line"><a id="l02303" name="l02303"></a><span class="lineno"> 2303</span>      <span class="keywordflow">for</span>(i = 0; i &lt; numpixels; i++) <span class="keywordflow">if</span>(image[i * 2 + 1] != 255) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l02304" name="l02304"></a><span class="lineno"> 2304</span>    }</div>
<div class="line"><a id="l02305" name="l02305"></a><span class="lineno"> 2305</span>    <span class="keywordflow">else</span></div>
<div class="line"><a id="l02306" name="l02306"></a><span class="lineno"> 2306</span>    {</div>
<div class="line"><a id="l02307" name="l02307"></a><span class="lineno"> 2307</span>      <span class="keywordflow">for</span>(i = 0; i &lt; numpixels; i++) <span class="keywordflow">if</span>(image[i * 4 + 2] != 255 || image[i * 4 + 3] != 255) <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l02308" name="l02308"></a><span class="lineno"> 2308</span>    }</div>
<div class="line"><a id="l02309" name="l02309"></a><span class="lineno"> 2309</span>    <span class="keywordflow">return</span> 1; <span class="comment">/*no single pixel with alpha channel other than 255 found*/</span></div>
<div class="line"><a id="l02310" name="l02310"></a><span class="lineno"> 2310</span>  }</div>
<div class="line"><a id="l02311" name="l02311"></a><span class="lineno"> 2311</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> == 3)</div>
<div class="line"><a id="l02312" name="l02312"></a><span class="lineno"> 2312</span>  {</div>
<div class="line"><a id="l02313" name="l02313"></a><span class="lineno"> 2313</span>    <span class="comment">/*when there&#39;s a palette, we could check every pixel for translucency, but much quicker is to just check the palette*/</span></div>
<div class="line"><a id="l02314" name="l02314"></a><span class="lineno"> 2314</span>    <span class="keywordflow">return</span>(<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ae752ee94f1a6acf5103584bdf2882fb5">isPaletteFullyOpaque</a>(info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a3b3862dd05e3f9f0bd9e95741d49e266">palette</a>, info-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a49842a304ffd0abc8aa791030c5fa5dd">palettesize</a>));</div>
<div class="line"><a id="l02315" name="l02315"></a><span class="lineno"> 2315</span>  }</div>
<div class="line"><a id="l02316" name="l02316"></a><span class="lineno"> 2316</span> </div>
<div class="line"><a id="l02317" name="l02317"></a><span class="lineno"> 2317</span>  <span class="keywordflow">return</span> 0; <span class="comment">/*color type that isn&#39;t supported by this function yet, so assume there is transparency to be safe*/</span></div>
<div class="line"><a id="l02318" name="l02318"></a><span class="lineno"> 2318</span>}</div>
<div class="line"><a id="l02319" name="l02319"></a><span class="lineno"> 2319</span> </div>
<div class="line"><a id="l02320" name="l02320"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#aeb8588ff6ad7dae8c5322b1520aa5687"> 2320</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#aeb8588ff6ad7dae8c5322b1520aa5687">LodePNG_encode</a>(<a class="code hl_struct" href="struct_lode_p_n_g___encoder.html">LodePNG_Encoder</a>* encoder, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>** <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a>, <span class="keywordtype">size_t</span>* outsize, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* image, <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a>, <span class="keywordtype">unsigned</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a>)</div>
<div class="line"><a id="l02321" name="l02321"></a><span class="lineno"> 2321</span>{</div>
<div class="line"><a id="l02322" name="l02322"></a><span class="lineno"> 2322</span>  <a class="code hl_struct" href="struct_lode_p_n_g___info_png.html">LodePNG_InfoPng</a> info;</div>
<div class="line"><a id="l02323" name="l02323"></a><span class="lineno"> 2323</span>  <a class="code hl_struct" href="structucvector.html">ucvector</a> outv;</div>
<div class="line"><a id="l02324" name="l02324"></a><span class="lineno"> 2324</span>  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a> = 0; <span class="comment">/*uncompressed version of the IDAT chunk data*/</span></div>
<div class="line"><a id="l02325" name="l02325"></a><span class="lineno"> 2325</span>  <span class="keywordtype">size_t</span> datasize = 0;</div>
<div class="line"><a id="l02326" name="l02326"></a><span class="lineno"> 2326</span> </div>
<div class="line"><a id="l02327" name="l02327"></a><span class="lineno"> 2327</span>  <span class="comment">/*provide some proper output values if error will happen*/</span></div>
<div class="line"><a id="l02328" name="l02328"></a><span class="lineno"> 2328</span>  *<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a> = 0;</div>
<div class="line"><a id="l02329" name="l02329"></a><span class="lineno"> 2329</span>  *outsize = 0;</div>
<div class="line"><a id="l02330" name="l02330"></a><span class="lineno"> 2330</span>  encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a18e658a08db22dd34fc26c138f3eb2df">error</a> = 0;</div>
<div class="line"><a id="l02331" name="l02331"></a><span class="lineno"> 2331</span> </div>
<div class="line"><a id="l02332" name="l02332"></a><span class="lineno"> 2332</span>  info = encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a5c4bc6d9be898fbcc14b5d762d69457e">infoPng</a>; <span class="comment">/*UNSAFE copy to avoid having to cleanup! but we will only change primitive parameters, and not invoke the cleanup function nor touch the palette&#39;s buffer so we use it safely*/</span></div>
<div class="line"><a id="l02333" name="l02333"></a><span class="lineno"> 2333</span>  info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#a74be99b177b28f3178c02139c4b7f149">width</a> = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a>;</div>
<div class="line"><a id="l02334" name="l02334"></a><span class="lineno"> 2334</span>  info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#a4b87ec9649e7177af7a5f5e08e5bc491">height</a> = <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a>;</div>
<div class="line"><a id="l02335" name="l02335"></a><span class="lineno"> 2335</span> </div>
<div class="line"><a id="l02336" name="l02336"></a><span class="lineno"> 2336</span>  <span class="keywordflow">if</span>(encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#ae36ceb21b9d1007491f4edbb2be12bab">settings</a>.<a class="code hl_variable" href="struct_lode_p_n_g___encode_settings.html#a5074182840fae2ac4399ca9fa6660b41">autoLeaveOutAlphaChannel</a> &amp;&amp; <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a2f88c6042dadfbca407902809012a408">isFullyOpaque</a>(image, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a>, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a>, &amp;encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#af37ca9b0bcecd5d1d68756fd293ab998">infoRaw</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_raw.html#ae9fa1c020358980be41f861ab71589fb">color</a>))</div>
<div class="line"><a id="l02337" name="l02337"></a><span class="lineno"> 2337</span>  {</div>
<div class="line"><a id="l02338" name="l02338"></a><span class="lineno"> 2338</span>    <span class="comment">/*go to a color type without alpha channel*/</span></div>
<div class="line"><a id="l02339" name="l02339"></a><span class="lineno"> 2339</span>    <span class="keywordflow">if</span>(info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> == 6) info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> = 2;</div>
<div class="line"><a id="l02340" name="l02340"></a><span class="lineno"> 2340</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> == 4) info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> = 0;</div>
<div class="line"><a id="l02341" name="l02341"></a><span class="lineno"> 2341</span>  }</div>
<div class="line"><a id="l02342" name="l02342"></a><span class="lineno"> 2342</span> </div>
<div class="line"><a id="l02343" name="l02343"></a><span class="lineno"> 2343</span>  <span class="keywordflow">if</span>(encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#ae36ceb21b9d1007491f4edbb2be12bab">settings</a>.<a class="code hl_variable" href="struct_lode_p_n_g___encode_settings.html#addba4b351da6bace64c02a264be74f53">zlibsettings</a>.<a class="code hl_variable" href="struct_lode_zlib___deflate_settings.html#ab4db0ff77376a9a8b9af7f85cafc6028">windowSize</a> &gt; 32768) { encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a18e658a08db22dd34fc26c138f3eb2df">error</a> = 60; <span class="keywordflow">return</span>; } <span class="comment">/*error: windowsize larger than allowed*/</span></div>
<div class="line"><a id="l02344" name="l02344"></a><span class="lineno"> 2344</span>  <span class="keywordflow">if</span>(encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#ae36ceb21b9d1007491f4edbb2be12bab">settings</a>.<a class="code hl_variable" href="struct_lode_p_n_g___encode_settings.html#addba4b351da6bace64c02a264be74f53">zlibsettings</a>.<a class="code hl_variable" href="struct_lode_zlib___deflate_settings.html#a9a016a3b62b8efae335eb585f7f40cfd">btype</a> &gt; 2) { encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a18e658a08db22dd34fc26c138f3eb2df">error</a> = 61; <span class="keywordflow">return</span>; } <span class="comment">/*error: nonexistent btype*/</span></div>
<div class="line"><a id="l02345" name="l02345"></a><span class="lineno"> 2345</span>  <span class="keywordflow">if</span>(encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a5c4bc6d9be898fbcc14b5d762d69457e">infoPng</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#ad261cbe064eb69a92638e880d99347ca">interlaceMethod</a> &gt; 1) { encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a18e658a08db22dd34fc26c138f3eb2df">error</a> = 71; <span class="keywordflow">return</span>; } <span class="comment">/*error: nonexistent interlace mode*/</span></div>
<div class="line"><a id="l02346" name="l02346"></a><span class="lineno"> 2346</span>  <span class="keywordflow">if</span>((encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a18e658a08db22dd34fc26c138f3eb2df">error</a> = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a83a90dcbc8adcba8293158785d264bb8">checkColorValidity</a>(info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a>, info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">bitDepth</a>))) <span class="keywordflow">return</span>; <span class="comment">/*error: nonexistent color type given*/</span></div>
<div class="line"><a id="l02347" name="l02347"></a><span class="lineno"> 2347</span>  <span class="keywordflow">if</span>((encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a18e658a08db22dd34fc26c138f3eb2df">error</a> = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a83a90dcbc8adcba8293158785d264bb8">checkColorValidity</a>(encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#af37ca9b0bcecd5d1d68756fd293ab998">infoRaw</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_raw.html#ae9fa1c020358980be41f861ab71589fb">color</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a>, encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#af37ca9b0bcecd5d1d68756fd293ab998">infoRaw</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_raw.html#ae9fa1c020358980be41f861ab71589fb">color</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">bitDepth</a>))) <span class="keywordflow">return</span>; <span class="comment">/*error: nonexistent color type given*/</span></div>
<div class="line"><a id="l02348" name="l02348"></a><span class="lineno"> 2348</span> </div>
<div class="line"><a id="l02349" name="l02349"></a><span class="lineno"> 2349</span>  <span class="keywordflow">if</span>(!<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#afa9f9dc4d70561a39c15ccac3459e3de">LodePNG_InfoColor_equal</a>(&amp;encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#af37ca9b0bcecd5d1d68756fd293ab998">infoRaw</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_raw.html#ae9fa1c020358980be41f861ab71589fb">color</a>, &amp;info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>))</div>
<div class="line"><a id="l02350" name="l02350"></a><span class="lineno"> 2350</span>  {</div>
<div class="line"><a id="l02351" name="l02351"></a><span class="lineno"> 2351</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* converted;</div>
<div class="line"><a id="l02352" name="l02352"></a><span class="lineno"> 2352</span>    <span class="keywordtype">size_t</span> <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a> = (<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a> * <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a> * <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a2ff4c2a69c357378cf11dfeca7383b31">LodePNG_InfoColor_getBpp</a>(&amp;info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>) + 7) / 8;</div>
<div class="line"><a id="l02353" name="l02353"></a><span class="lineno"> 2353</span> </div>
<div class="line"><a id="l02354" name="l02354"></a><span class="lineno"> 2354</span>    <span class="keywordflow">if</span>((info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> != 6 &amp;&amp; info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> != 2) || (info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">bitDepth</a> != 8)) { encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a18e658a08db22dd34fc26c138f3eb2df">error</a> = 59; <span class="keywordflow">return</span>; } <span class="comment">/*for the output image, only these types are supported*/</span></div>
<div class="line"><a id="l02355" name="l02355"></a><span class="lineno"> 2355</span>    converted = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)malloc(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>);</div>
<div class="line"><a id="l02356" name="l02356"></a><span class="lineno"> 2356</span>    <span class="keywordflow">if</span>(!converted &amp;&amp; <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a>) encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a18e658a08db22dd34fc26c138f3eb2df">error</a> = 9955; <span class="comment">/*error: malloc failed*/</span></div>
<div class="line"><a id="l02357" name="l02357"></a><span class="lineno"> 2357</span>    <span class="keywordflow">if</span>(!encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a18e658a08db22dd34fc26c138f3eb2df">error</a>) encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a18e658a08db22dd34fc26c138f3eb2df">error</a> = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aeb70a14a3e3d525bddd824f5aa6bffb8">LodePNG_convert</a>(converted, image, &amp;info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>, &amp;encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#af37ca9b0bcecd5d1d68756fd293ab998">infoRaw</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_raw.html#ae9fa1c020358980be41f861ab71589fb">color</a>, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a>, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a>);</div>
<div class="line"><a id="l02358" name="l02358"></a><span class="lineno"> 2358</span>    <span class="keywordflow">if</span>(!encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a18e658a08db22dd34fc26c138f3eb2df">error</a>) <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a18dd1f62212e629248128eec9ee2641d">preProcessScanlines</a>(&amp;<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>, &amp;datasize, converted, &amp;info);<span class="comment">/*filter(data.data, converted.data, w, h, LodePNG_InfoColor_getBpp(&amp;info.color));*/</span></div>
<div class="line"><a id="l02359" name="l02359"></a><span class="lineno"> 2359</span>    free(converted);</div>
<div class="line"><a id="l02360" name="l02360"></a><span class="lineno"> 2360</span>  }</div>
<div class="line"><a id="l02361" name="l02361"></a><span class="lineno"> 2361</span>  <span class="keywordflow">else</span> <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a18dd1f62212e629248128eec9ee2641d">preProcessScanlines</a>(&amp;<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>, &amp;datasize, image, &amp;info);<span class="comment">/*filter(data.data, image, w, h, LodePNG_InfoColor_getBpp(&amp;info.color));*/</span></div>
<div class="line"><a id="l02362" name="l02362"></a><span class="lineno"> 2362</span> </div>
<div class="line"><a id="l02363" name="l02363"></a><span class="lineno"> 2363</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a1b58c07819eec4ff7e903138c08eb502">ucvector_init</a>(&amp;outv);</div>
<div class="line"><a id="l02364" name="l02364"></a><span class="lineno"> 2364</span>  <span class="keywordflow">while</span>(!encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a18e658a08db22dd34fc26c138f3eb2df">error</a>) <span class="comment">/*not really a while loop, this is only used to break out if an error happens to avoid goto&#39;s to do the ucvector cleanup*/</span></div>
<div class="line"><a id="l02365" name="l02365"></a><span class="lineno"> 2365</span>  {</div>
<div class="line"><a id="l02366" name="l02366"></a><span class="lineno"> 2366</span>    <span class="comment">/*write signature and chunks*/</span></div>
<div class="line"><a id="l02367" name="l02367"></a><span class="lineno"> 2367</span>    <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a3ef7410c8765fdbed5e61e206c1b68a9">writeSignature</a>(&amp;outv);</div>
<div class="line"><a id="l02368" name="l02368"></a><span class="lineno"> 2368</span>    <span class="comment">/*IHDR*/</span></div>
<div class="line"><a id="l02369" name="l02369"></a><span class="lineno"> 2369</span>    <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a6d2c08601522a93dcfff80c45d1624dd">addChunk_IHDR</a>(&amp;outv, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a>, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a>, info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">bitDepth</a>, info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a>, info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#ad261cbe064eb69a92638e880d99347ca">interlaceMethod</a>);</div>
<div class="line"><a id="l02370" name="l02370"></a><span class="lineno"> 2370</span>    <span class="comment">/*PLTE*/</span></div>
<div class="line"><a id="l02371" name="l02371"></a><span class="lineno"> 2371</span>    <span class="keywordflow">if</span>(info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> == 3)</div>
<div class="line"><a id="l02372" name="l02372"></a><span class="lineno"> 2372</span>    {</div>
<div class="line"><a id="l02373" name="l02373"></a><span class="lineno"> 2373</span>      <span class="keywordflow">if</span>(info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a49842a304ffd0abc8aa791030c5fa5dd">palettesize</a> == 0 || info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a49842a304ffd0abc8aa791030c5fa5dd">palettesize</a> &gt; 256) { encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a18e658a08db22dd34fc26c138f3eb2df">error</a> = 68; <span class="keywordflow">break</span>; }</div>
<div class="line"><a id="l02374" name="l02374"></a><span class="lineno"> 2374</span>      <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ac47e572c85623e55bb4ca5b75767bad9">addChunk_PLTE</a>(&amp;outv, &amp;info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>);</div>
<div class="line"><a id="l02375" name="l02375"></a><span class="lineno"> 2375</span>    }</div>
<div class="line"><a id="l02376" name="l02376"></a><span class="lineno"> 2376</span>    <span class="keywordflow">if</span>(encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#ae36ceb21b9d1007491f4edbb2be12bab">settings</a>.<a class="code hl_variable" href="struct_lode_p_n_g___encode_settings.html#a44de1047cd9f3bfd55bf8c5313620065">force_palette</a> &amp;&amp; (info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> == 2 || info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> == 6))</div>
<div class="line"><a id="l02377" name="l02377"></a><span class="lineno"> 2377</span>    {</div>
<div class="line"><a id="l02378" name="l02378"></a><span class="lineno"> 2378</span>      <span class="keywordflow">if</span>(info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a49842a304ffd0abc8aa791030c5fa5dd">palettesize</a> == 0 || info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a49842a304ffd0abc8aa791030c5fa5dd">palettesize</a> &gt; 256) { encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a18e658a08db22dd34fc26c138f3eb2df">error</a> = 68; <span class="keywordflow">break</span>; }</div>
<div class="line"><a id="l02379" name="l02379"></a><span class="lineno"> 2379</span>      <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ac47e572c85623e55bb4ca5b75767bad9">addChunk_PLTE</a>(&amp;outv, &amp;info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>);</div>
<div class="line"><a id="l02380" name="l02380"></a><span class="lineno"> 2380</span>    }</div>
<div class="line"><a id="l02381" name="l02381"></a><span class="lineno"> 2381</span>    <span class="comment">/*tRNS*/</span></div>
<div class="line"><a id="l02382" name="l02382"></a><span class="lineno"> 2382</span>    <span class="keywordflow">if</span>(info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> == 3 &amp;&amp; !<a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ae752ee94f1a6acf5103584bdf2882fb5">isPaletteFullyOpaque</a>(info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a3b3862dd05e3f9f0bd9e95741d49e266">palette</a>, info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a49842a304ffd0abc8aa791030c5fa5dd">palettesize</a>)) <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aeabf2a41d047b03ce98475fe940446d8">addChunk_tRNS</a>(&amp;outv, &amp;info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>);</div>
<div class="line"><a id="l02383" name="l02383"></a><span class="lineno"> 2383</span>    <span class="keywordflow">if</span>((info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> == 0 || info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">colorType</a> == 2) &amp;&amp; info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>.<a class="code hl_variable" href="struct_lode_p_n_g___info_color.html#aa0193ce13025c776a0dfb1e6d1bed14a">key_defined</a>) <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aeabf2a41d047b03ce98475fe940446d8">addChunk_tRNS</a>(&amp;outv, &amp;info.<a class="code hl_variable" href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">color</a>);</div>
<div class="line"><a id="l02384" name="l02384"></a><span class="lineno"> 2384</span>    <span class="comment">/*IDAT (multiple IDAT chunks must be consecutive)*/</span></div>
<div class="line"><a id="l02385" name="l02385"></a><span class="lineno"> 2385</span>    encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a18e658a08db22dd34fc26c138f3eb2df">error</a> = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a366b19b8d9a1b17cce6de1e984c95c59">addChunk_IDAT</a>(&amp;outv, <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>, datasize, &amp;encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#ae36ceb21b9d1007491f4edbb2be12bab">settings</a>.<a class="code hl_variable" href="struct_lode_p_n_g___encode_settings.html#addba4b351da6bace64c02a264be74f53">zlibsettings</a>);</div>
<div class="line"><a id="l02386" name="l02386"></a><span class="lineno"> 2386</span>    <span class="keywordflow">if</span>(encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a18e658a08db22dd34fc26c138f3eb2df">error</a>) <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l02387" name="l02387"></a><span class="lineno"> 2387</span>    <span class="comment">/*IEND*/</span></div>
<div class="line"><a id="l02388" name="l02388"></a><span class="lineno"> 2388</span>    <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aca4038c773ca0f7cdc7b324c3c3df167">addChunk_IEND</a>(&amp;outv);</div>
<div class="line"><a id="l02389" name="l02389"></a><span class="lineno"> 2389</span> </div>
<div class="line"><a id="l02390" name="l02390"></a><span class="lineno"> 2390</span>    <span class="keywordflow">break</span>; <span class="comment">/*this isn&#39;t really a while loop; no error happened so break out now!*/</span></div>
<div class="line"><a id="l02391" name="l02391"></a><span class="lineno"> 2391</span>  }</div>
<div class="line"><a id="l02392" name="l02392"></a><span class="lineno"> 2392</span> </div>
<div class="line"><a id="l02393" name="l02393"></a><span class="lineno"> 2393</span>  free(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a>);</div>
<div class="line"><a id="l02394" name="l02394"></a><span class="lineno"> 2394</span>  <span class="comment">/*instead of cleaning the vector up, give it to the output*/</span></div>
<div class="line"><a id="l02395" name="l02395"></a><span class="lineno"> 2395</span>  *<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a> = outv.<a class="code hl_variable" href="structucvector.html#a803973058c172963314ff05217b57d60">data</a>;</div>
<div class="line"><a id="l02396" name="l02396"></a><span class="lineno"> 2396</span>  *outsize = outv.<a class="code hl_variable" href="structucvector.html#a27c99c34de0c5b3ca0c242d402c69499">size</a>;</div>
<div class="line"><a id="l02397" name="l02397"></a><span class="lineno"> 2397</span>}</div>
<div class="line"><a id="l02398" name="l02398"></a><span class="lineno"> 2398</span> </div>
<div class="line"><a id="l02399" name="l02399"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a3cd7cc1583795fd14b7fe1179e005ab1"> 2399</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#a3cd7cc1583795fd14b7fe1179e005ab1">LodePNG_EncodeSettings_init</a>(<a class="code hl_struct" href="struct_lode_p_n_g___encode_settings.html">LodePNG_EncodeSettings</a>* settings)</div>
<div class="line"><a id="l02400" name="l02400"></a><span class="lineno"> 2400</span>{</div>
<div class="line"><a id="l02401" name="l02401"></a><span class="lineno"> 2401</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa3c00d6565b6bf50aa7e68516941da40">LodeZlib_DeflateSettings_init</a>(&amp;settings-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encode_settings.html#addba4b351da6bace64c02a264be74f53">zlibsettings</a>);</div>
<div class="line"><a id="l02402" name="l02402"></a><span class="lineno"> 2402</span>  settings-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encode_settings.html#a5074182840fae2ac4399ca9fa6660b41">autoLeaveOutAlphaChannel</a> = 1;</div>
<div class="line"><a id="l02403" name="l02403"></a><span class="lineno"> 2403</span>  settings-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encode_settings.html#a44de1047cd9f3bfd55bf8c5313620065">force_palette</a> = 0;</div>
<div class="line"><a id="l02404" name="l02404"></a><span class="lineno"> 2404</span>}</div>
<div class="line"><a id="l02405" name="l02405"></a><span class="lineno"> 2405</span> </div>
<div class="line"><a id="l02406" name="l02406"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a187956c5e5784f77f5b17181310be304"> 2406</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#a187956c5e5784f77f5b17181310be304">LodePNG_Encoder_init</a>(<a class="code hl_struct" href="struct_lode_p_n_g___encoder.html">LodePNG_Encoder</a>* encoder)</div>
<div class="line"><a id="l02407" name="l02407"></a><span class="lineno"> 2407</span>{</div>
<div class="line"><a id="l02408" name="l02408"></a><span class="lineno"> 2408</span>  <a class="code hl_function" href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#a3cd7cc1583795fd14b7fe1179e005ab1">LodePNG_EncodeSettings_init</a>(&amp;encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#ae36ceb21b9d1007491f4edbb2be12bab">settings</a>);</div>
<div class="line"><a id="l02409" name="l02409"></a><span class="lineno"> 2409</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ab7971f0b72f02afb5ce07151fc59d78d">LodePNG_InfoPng_init</a>(&amp;encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a5c4bc6d9be898fbcc14b5d762d69457e">infoPng</a>);</div>
<div class="line"><a id="l02410" name="l02410"></a><span class="lineno"> 2410</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a1aac734c511454ca4d3d05144695d7b4">LodePNG_InfoRaw_init</a>(&amp;encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#af37ca9b0bcecd5d1d68756fd293ab998">infoRaw</a>);</div>
<div class="line"><a id="l02411" name="l02411"></a><span class="lineno"> 2411</span>  encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a18e658a08db22dd34fc26c138f3eb2df">error</a> = 1;</div>
<div class="line"><a id="l02412" name="l02412"></a><span class="lineno"> 2412</span>}</div>
<div class="line"><a id="l02413" name="l02413"></a><span class="lineno"> 2413</span> </div>
<div class="line"><a id="l02414" name="l02414"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a7269f380122edb94715d5e2e87eab835"> 2414</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#a7269f380122edb94715d5e2e87eab835">LodePNG_Encoder_cleanup</a>(<a class="code hl_struct" href="struct_lode_p_n_g___encoder.html">LodePNG_Encoder</a>* encoder)</div>
<div class="line"><a id="l02415" name="l02415"></a><span class="lineno"> 2415</span>{</div>
<div class="line"><a id="l02416" name="l02416"></a><span class="lineno"> 2416</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a2236a6b7f7bc1c047658a40f24db2658">LodePNG_InfoPng_cleanup</a>(&amp;encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a5c4bc6d9be898fbcc14b5d762d69457e">infoPng</a>);</div>
<div class="line"><a id="l02417" name="l02417"></a><span class="lineno"> 2417</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aa460b4664eff1376c02a8d15ce6843ca">LodePNG_InfoRaw_cleanup</a>(&amp;encoder-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#af37ca9b0bcecd5d1d68756fd293ab998">infoRaw</a>);</div>
<div class="line"><a id="l02418" name="l02418"></a><span class="lineno"> 2418</span>}</div>
<div class="line"><a id="l02419" name="l02419"></a><span class="lineno"> 2419</span> </div>
<div class="line"><a id="l02420" name="l02420"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a0c0160b2f998d5966324922a153ee557"> 2420</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#a0c0160b2f998d5966324922a153ee557">LodePNG_Encoder_copy</a>(<a class="code hl_struct" href="struct_lode_p_n_g___encoder.html">LodePNG_Encoder</a>* dest, <span class="keyword">const</span> <a class="code hl_struct" href="struct_lode_p_n_g___encoder.html">LodePNG_Encoder</a>* source)</div>
<div class="line"><a id="l02421" name="l02421"></a><span class="lineno"> 2421</span>{</div>
<div class="line"><a id="l02422" name="l02422"></a><span class="lineno"> 2422</span>  <a class="code hl_function" href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#a7269f380122edb94715d5e2e87eab835">LodePNG_Encoder_cleanup</a>(dest);</div>
<div class="line"><a id="l02423" name="l02423"></a><span class="lineno"> 2423</span>  *dest = *source;</div>
<div class="line"><a id="l02424" name="l02424"></a><span class="lineno"> 2424</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#ab7971f0b72f02afb5ce07151fc59d78d">LodePNG_InfoPng_init</a>(&amp;dest-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a5c4bc6d9be898fbcc14b5d762d69457e">infoPng</a>);</div>
<div class="line"><a id="l02425" name="l02425"></a><span class="lineno"> 2425</span>  <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a1aac734c511454ca4d3d05144695d7b4">LodePNG_InfoRaw_init</a>(&amp;dest-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#af37ca9b0bcecd5d1d68756fd293ab998">infoRaw</a>);</div>
<div class="line"><a id="l02426" name="l02426"></a><span class="lineno"> 2426</span>  dest-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a18e658a08db22dd34fc26c138f3eb2df">error</a> = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#aab31a4b50678870f58d9b4fb90570dc6">LodePNG_InfoPng_copy</a>(&amp;dest-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a5c4bc6d9be898fbcc14b5d762d69457e">infoPng</a>, &amp;source-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a5c4bc6d9be898fbcc14b5d762d69457e">infoPng</a>); <span class="keywordflow">if</span>(dest-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a18e658a08db22dd34fc26c138f3eb2df">error</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02427" name="l02427"></a><span class="lineno"> 2427</span>  dest-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a18e658a08db22dd34fc26c138f3eb2df">error</a> = <a class="code hl_function" href="liblodepng_2lodepng_8cpp.html#a7c7a74518cbbfeade8e271556152b683">LodePNG_InfoRaw_copy</a>(&amp;dest-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#af37ca9b0bcecd5d1d68756fd293ab998">infoRaw</a>, &amp;source-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#af37ca9b0bcecd5d1d68756fd293ab998">infoRaw</a>); <span class="keywordflow">if</span>(dest-&gt;<a class="code hl_variable" href="struct_lode_p_n_g___encoder.html#a18e658a08db22dd34fc26c138f3eb2df">error</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l02428" name="l02428"></a><span class="lineno"> 2428</span>}</div>
<div class="line"><a id="l02429" name="l02429"></a><span class="lineno"> 2429</span> </div>
<div class="line"><a id="l02430" name="l02430"></a><span class="lineno"> 2430</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l02431" name="l02431"></a><span class="lineno"> 2431</span><span class="comment">/* / File IO                                                                / */</span></div>
<div class="line"><a id="l02432" name="l02432"></a><span class="lineno"> 2432</span><span class="comment">/* ////////////////////////////////////////////////////////////////////////// */</span></div>
<div class="line"><a id="l02433" name="l02433"></a><span class="lineno"> 2433</span> </div>
<div class="line"><a id="l02434" name="l02434"></a><span class="lineno"> 2434</span><span class="comment">/*write given buffer to the file, overwriting the file, it doesn&#39;t append to it.*/</span></div>
<div class="line"><a id="l02435" name="l02435"></a><span class="lineno"><a class="line" href="liblodepng_2lodepng_8cpp.html#a35604ddb7255afb1526979ca40815987"> 2435</a></span><span class="keywordtype">unsigned</span> <a class="code hl_function" href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#a35604ddb7255afb1526979ca40815987">LodePNG_saveFile</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* buffer, <span class="keywordtype">size_t</span> buffersize, <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a>)</div>
<div class="line"><a id="l02436" name="l02436"></a><span class="lineno"> 2436</span>{</div>
<div class="line"><a id="l02437" name="l02437"></a><span class="lineno"> 2437</span>  FILE* <a class="code hl_variable" href="namespacecaseconvert.html#ad3d65a3e98ad183dea4b1904045afa08">file</a> = <a class="code hl_function" href="namespace_portable.html#a4dbb08c3de409bd1a73be3da6d93ac57">fopen</a>(<a class="code hl_variable" href="build_2doxygen_2libmscgen_2gd_8h.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a>,<span class="stringliteral">&quot;wb&quot;</span>);</div>
<div class="line"><a id="l02438" name="l02438"></a><span class="lineno"> 2438</span>  <span class="keywordflow">if</span>(!<a class="code hl_variable" href="namespacecaseconvert.html#ad3d65a3e98ad183dea4b1904045afa08">file</a>) <span class="keywordflow">return</span> 79;</div>
<div class="line"><a id="l02439" name="l02439"></a><span class="lineno"> 2439</span>  fwrite((<span class="keywordtype">char</span>*)buffer , 1 , buffersize, <a class="code hl_variable" href="namespacecaseconvert.html#ad3d65a3e98ad183dea4b1904045afa08">file</a>);</div>
<div class="line"><a id="l02440" name="l02440"></a><span class="lineno"> 2440</span>  <a class="code hl_function" href="namespace_portable.html#af099fa6239b4961887192d8eadfd2a44">fclose</a>(<a class="code hl_variable" href="namespacecaseconvert.html#ad3d65a3e98ad183dea4b1904045afa08">file</a>);</div>
<div class="line"><a id="l02441" name="l02441"></a><span class="lineno"> 2441</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l02442" name="l02442"></a><span class="lineno"> 2442</span>}</div>
<div class="line"><a id="l02443" name="l02443"></a><span class="lineno"> 2443</span> </div>
<div class="ttc" id="abuild_2doxygen_2liblodepng_2lodepng_8cpp_html_a0c0160b2f998d5966324922a153ee557"><div class="ttname"><a href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#a0c0160b2f998d5966324922a153ee557">LodePNG_Encoder_copy</a></div><div class="ttdeci">void LodePNG_Encoder_copy(LodePNG_Encoder *dest, const LodePNG_Encoder *source)</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l02420">lodepng.cpp:2420</a></div></div>
<div class="ttc" id="abuild_2doxygen_2liblodepng_2lodepng_8cpp_html_a114d783ee4ee8e014094926912e2670d"><div class="ttname"><a href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#a114d783ee4ee8e014094926912e2670d">ucvector</a></div><div class="ttdeci">struct ucvector ucvector</div></div>
<div class="ttc" id="abuild_2doxygen_2liblodepng_2lodepng_8cpp_html_a187956c5e5784f77f5b17181310be304"><div class="ttname"><a href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#a187956c5e5784f77f5b17181310be304">LodePNG_Encoder_init</a></div><div class="ttdeci">void LodePNG_Encoder_init(LodePNG_Encoder *encoder)</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l02406">lodepng.cpp:2406</a></div></div>
<div class="ttc" id="abuild_2doxygen_2liblodepng_2lodepng_8cpp_html_a35604ddb7255afb1526979ca40815987"><div class="ttname"><a href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#a35604ddb7255afb1526979ca40815987">LodePNG_saveFile</a></div><div class="ttdeci">unsigned LodePNG_saveFile(const unsigned char *buffer, size_t buffersize, const char *filename)</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l02435">lodepng.cpp:2435</a></div></div>
<div class="ttc" id="abuild_2doxygen_2liblodepng_2lodepng_8cpp_html_a3bcdfe56aa79c67e8f745020ecd3bbf8"><div class="ttname"><a href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#a3bcdfe56aa79c67e8f745020ecd3bbf8">HuffmanTree</a></div><div class="ttdeci">struct HuffmanTree HuffmanTree</div></div>
<div class="ttc" id="abuild_2doxygen_2liblodepng_2lodepng_8cpp_html_a3cd7cc1583795fd14b7fe1179e005ab1"><div class="ttname"><a href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#a3cd7cc1583795fd14b7fe1179e005ab1">LodePNG_EncodeSettings_init</a></div><div class="ttdeci">void LodePNG_EncodeSettings_init(LodePNG_EncodeSettings *settings)</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l02399">lodepng.cpp:2399</a></div></div>
<div class="ttc" id="abuild_2doxygen_2liblodepng_2lodepng_8cpp_html_a62f97d8b9eda73d358f817e41bee30c2"><div class="ttname"><a href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#a62f97d8b9eda73d358f817e41bee30c2">Coin</a></div><div class="ttdeci">struct Coin Coin</div></div>
<div class="ttc" id="abuild_2doxygen_2liblodepng_2lodepng_8cpp_html_a7269f380122edb94715d5e2e87eab835"><div class="ttname"><a href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#a7269f380122edb94715d5e2e87eab835">LodePNG_Encoder_cleanup</a></div><div class="ttdeci">void LodePNG_Encoder_cleanup(LodePNG_Encoder *encoder)</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l02414">lodepng.cpp:2414</a></div></div>
<div class="ttc" id="abuild_2doxygen_2liblodepng_2lodepng_8cpp_html_a7e6939196e23839d48c18dedd705c323"><div class="ttname"><a href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#a7e6939196e23839d48c18dedd705c323">uivector</a></div><div class="ttdeci">struct uivector uivector</div></div>
<div class="ttc" id="abuild_2doxygen_2liblodepng_2lodepng_8cpp_html_ab88e597da4e7744daa475f555ffc4cc4"><div class="ttname"><a href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#ab88e597da4e7744daa475f555ffc4cc4">LodeFlate_deflate</a></div><div class="ttdeci">unsigned LodeFlate_deflate(ucvector *out, const unsigned char *data, size_t datasize, const LodeZlib_DeflateSettings *settings)</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l01209">lodepng.cpp:1209</a></div></div>
<div class="ttc" id="abuild_2doxygen_2liblodepng_2lodepng_8cpp_html_ac8c5476186a019b60cc8fd4cc6ea41a1"><div class="ttname"><a href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#ac8c5476186a019b60cc8fd4cc6ea41a1">vector</a></div><div class="ttdeci">struct vector vector</div></div>
<div class="ttc" id="abuild_2doxygen_2liblodepng_2lodepng_8cpp_html_aeb8588ff6ad7dae8c5322b1520aa5687"><div class="ttname"><a href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#aeb8588ff6ad7dae8c5322b1520aa5687">LodePNG_encode</a></div><div class="ttdeci">void LodePNG_encode(LodePNG_Encoder *encoder, unsigned char **out, size_t *outsize, const unsigned char *image, unsigned w, unsigned h)</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l02320">lodepng.cpp:2320</a></div></div>
<div class="ttc" id="abuild_2doxygen_2liblodepng_2lodepng_8cpp_html_af062c1db1f9e18f47aa2d9a86651dea3"><div class="ttname"><a href="build_2doxygen_2liblodepng_2lodepng_8cpp.html#af062c1db1f9e18f47aa2d9a86651dea3">LodePNG_InfoColor_addPalette</a></div><div class="ttdeci">unsigned LodePNG_InfoColor_addPalette(LodePNG_InfoColor *info, unsigned char r, unsigned char g, unsigned char b, unsigned char a)</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l01543">lodepng.cpp:1543</a></div></div>
<div class="ttc" id="abuild_2doxygen_2libmscgen_2gd_8h_html_a0133765daeaba536cb40f54e1eaa43c9"><div class="ttname"><a href="build_2doxygen_2libmscgen_2gd_8h.html#a0133765daeaba536cb40f54e1eaa43c9">w</a></div><div class="ttdeci">int int int w</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2libmscgen_2gd_8h_source.html#l00664">gd.h:664</a></div></div>
<div class="ttc" id="abuild_2doxygen_2libmscgen_2gd_8h_html_a16304bc747437a168e633f9186eed1bf"><div class="ttname"><a href="build_2doxygen_2libmscgen_2gd_8h.html#a16304bc747437a168e633f9186eed1bf">g</a></div><div class="ttdeci">int int g</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2libmscgen_2gd_8h_source.html#l00885">gd.h:885</a></div></div>
<div class="ttc" id="abuild_2doxygen_2libmscgen_2gd_8h_html_a1e79fade784ffb450b103ad42e120fa0"><div class="ttname"><a href="build_2doxygen_2libmscgen_2gd_8h.html#a1e79fade784ffb450b103ad42e120fa0">size</a></div><div class="ttdeci">int * size</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2libmscgen_2gd_8h_source.html#l01021">gd.h:1021</a></div></div>
<div class="ttc" id="abuild_2doxygen_2libmscgen_2gd_8h_html_a48bc11919b2752df9d14ce89557cfb25"><div class="ttname"><a href="build_2doxygen_2libmscgen_2gd_8h.html#a48bc11919b2752df9d14ce89557cfb25">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2libmscgen_2gd_8h_source.html#l01016">gd.h:1016</a></div></div>
<div class="ttc" id="abuild_2doxygen_2libmscgen_2gd_8h_html_a4e1e0e72dd773439e333c84dd762a9c3"><div class="ttname"><a href="build_2doxygen_2libmscgen_2gd_8h.html#a4e1e0e72dd773439e333c84dd762a9c3">c</a></div><div class="ttdeci">gdFontPtr int int int c</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2libmscgen_2gd_8h_source.html#l00713">gd.h:713</a></div></div>
<div class="ttc" id="abuild_2doxygen_2libmscgen_2gd_8h_html_a6150e0515f7202e2fb518f7206ed97dc"><div class="ttname"><a href="build_2doxygen_2libmscgen_2gd_8h.html#a6150e0515f7202e2fb518f7206ed97dc">x</a></div><div class="ttdeci">int x</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2libmscgen_2gd_8h_source.html#l00688">gd.h:688</a></div></div>
<div class="ttc" id="abuild_2doxygen_2libmscgen_2gd_8h_html_a7efa5e9c7494c7d4586359300221aa5d"><div class="ttname"><a href="build_2doxygen_2libmscgen_2gd_8h.html#a7efa5e9c7494c7d4586359300221aa5d">filename</a></div><div class="ttdeci">const char * filename</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2libmscgen_2gd_8h_source.html#l01038">gd.h:1038</a></div></div>
<div class="ttc" id="abuild_2doxygen_2libmscgen_2gd_8h_html_a8128625c9e3fd04c27b82957732d8781"><div class="ttname"><a href="build_2doxygen_2libmscgen_2gd_8h.html#a8128625c9e3fd04c27b82957732d8781">weight</a></div><div class="ttdeci">float weight</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2libmscgen_2gd_8h_source.html#l01254">gd.h:1254</a></div></div>
<div class="ttc" id="abuild_2doxygen_2libmscgen_2gd_8h_html_a8ef4377a30bce9268290ef06c7f501f8"><div class="ttname"><a href="build_2doxygen_2libmscgen_2gd_8h.html#a8ef4377a30bce9268290ef06c7f501f8">n</a></div><div class="ttdeci">gdPointPtr int n</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2libmscgen_2gd_8h_source.html#l00879">gd.h:879</a></div></div>
<div class="ttc" id="abuild_2doxygen_2libmscgen_2gd_8h_html_aadf2a4297af25f4a140ea29500e8d47d"><div class="ttname"><a href="build_2doxygen_2libmscgen_2gd_8h.html#aadf2a4297af25f4a140ea29500e8d47d">b</a></div><div class="ttdeci">int int int b</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2libmscgen_2gd_8h_source.html#l00885">gd.h:885</a></div></div>
<div class="ttc" id="abuild_2doxygen_2libmscgen_2gd_8h_html_ab5a2e47807ddbc8459ae782c1274e78b"><div class="ttname"><a href="build_2doxygen_2libmscgen_2gd_8h.html#ab5a2e47807ddbc8459ae782c1274e78b">p</a></div><div class="ttdeci">gdPointPtr p</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2libmscgen_2gd_8h_source.html#l00879">gd.h:879</a></div></div>
<div class="ttc" id="abuild_2doxygen_2libmscgen_2gd_8h_html_ac5c5967f62e5c3601479be651a8ed76c"><div class="ttname"><a href="build_2doxygen_2libmscgen_2gd_8h.html#ac5c5967f62e5c3601479be651a8ed76c">data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2libmscgen_2gd_8h_source.html#l00587">gd.h:587</a></div></div>
<div class="ttc" id="abuild_2doxygen_2libmscgen_2gd_8h_html_acab531abaa74a7e664e3986f2522b33a"><div class="ttname"><a href="build_2doxygen_2libmscgen_2gd_8h.html#acab531abaa74a7e664e3986f2522b33a">r</a></div><div class="ttdeci">int r</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2libmscgen_2gd_8h_source.html#l00885">gd.h:885</a></div></div>
<div class="ttc" id="abuild_2doxygen_2libmscgen_2gd_8h_html_acfbdb216bf2d5701c935da2190f4629a"><div class="ttname"><a href="build_2doxygen_2libmscgen_2gd_8h.html#acfbdb216bf2d5701c935da2190f4629a">h</a></div><div class="ttdeci">int int int int h</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2libmscgen_2gd_8h_source.html#l00665">gd.h:665</a></div></div>
<div class="ttc" id="abuild_2doxygen_2libmscgen_2gd_8h_html_ae1c02e9f36a12e377487affe87df4bb6"><div class="ttname"><a href="build_2doxygen_2libmscgen_2gd_8h.html#ae1c02e9f36a12e377487affe87df4bb6">a</a></div><div class="ttdeci">int int int int a</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2libmscgen_2gd_8h_source.html#l00887">gd.h:887</a></div></div>
<div class="ttc" id="abuild_2doxygen_2libmscgen_2gd_8h_html_ae8293bdb39668d0bafde58b6c1d836f0"><div class="ttname"><a href="build_2doxygen_2libmscgen_2gd_8h.html#ae8293bdb39668d0bafde58b6c1d836f0">offset</a></div><div class="ttdeci">float float float offset</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2libmscgen_2gd_8h_source.html#l01260">gd.h:1260</a></div></div>
<div class="ttc" id="abuild_2doxygen_2libmscgen_2gd_8h_html_af1202c02b14870c18fb3a1da73e9e7c7"><div class="ttname"><a href="build_2doxygen_2libmscgen_2gd_8h.html#af1202c02b14870c18fb3a1da73e9e7c7">y</a></div><div class="ttdeci">int int y</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2libmscgen_2gd_8h_source.html#l00688">gd.h:688</a></div></div>
<div class="ttc" id="abuild_2doxygen_2libmscgen_2gd_8h_html_afed088663f8704004425cdae2120b9b3"><div class="ttname"><a href="build_2doxygen_2libmscgen_2gd_8h.html#afed088663f8704004425cdae2120b9b3">len</a></div><div class="ttdeci">int len</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2libmscgen_2gd_8h_source.html#l01013">gd.h:1013</a></div></div>
<div class="ttc" id="abuild_2doxygen_2src_2image_8cpp_html_acfe43b36ff6b37d0df7b60495d7b5ea7"><div class="ttname"><a href="build_2doxygen_2src_2image_8cpp.html#acfe43b36ff6b37d0df7b60495d7b5ea7">palette</a></div><div class="ttdeci">static Color palette[]</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2src_2image_8cpp_source.html#l00155">image.cpp:155</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a07b9ef40ecc9b70aefa3e1bcad7f231f"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a07b9ef40ecc9b70aefa3e1bcad7f231f">vector_cleanupd</a></div><div class="ttdeci">static void vector_cleanupd(vector *p, void dtor(void *))</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00138">lodepng.cpp:138</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a0ab19d681e279413b79074057ea80a3e"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a0ab19d681e279413b79074057ea80a3e">addPaddingBits</a></div><div class="ttdeci">static void addPaddingBits(unsigned char *out, const unsigned char *in, size_t olinebits, size_t ilinebits, unsigned h)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l02117">lodepng.cpp:2117</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a0b12e062127bf0b511165c7a14ca9a87"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a0b12e062127bf0b511165c7a14ca9a87">HuffmanTree_getLength</a></div><div class="ttdeci">static unsigned HuffmanTree_getLength(const HuffmanTree *tree, unsigned index)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00612">lodepng.cpp:612</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a0b9c1a546cc75a5baa798087bbcbf63e"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a0b9c1a546cc75a5baa798087bbcbf63e">getBpp</a></div><div class="ttdeci">static unsigned getBpp(unsigned colorType, unsigned bitDepth)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01515">lodepng.cpp:1515</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a0e9475f6ae57e9fb5456af8d80822d48"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a0e9475f6ae57e9fb5456af8d80822d48">HuffmanTree_fillInCoins</a></div><div class="ttdeci">static unsigned HuffmanTree_fillInCoins(vector *coins, const unsigned *frequencies, unsigned numcodes, size_t sum)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00508">lodepng.cpp:508</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a10e6c6183aba33ac05dd184cd0898796"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a10e6c6183aba33ac05dd184cd0898796">HuffmanTree_makeFromFrequencies</a></div><div class="ttdeci">static unsigned HuffmanTree_makeFromFrequencies(HuffmanTree *tree, const unsigned *frequencies, size_t numcodes, unsigned maxbitlen)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00525">lodepng.cpp:525</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a18aff167f1895955ac0f831555e9cff3"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a18aff167f1895955ac0f831555e9cff3">Adam7_getpassvalues</a></div><div class="ttdeci">static void Adam7_getpassvalues(unsigned passw[7], unsigned passh[7], size_t filter_passstart[8], size_t padded_passstart[8], size_t passstart[8], unsigned w, unsigned h, unsigned bpp)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01845">lodepng.cpp:1845</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a18dd1f62212e629248128eec9ee2641d"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a18dd1f62212e629248128eec9ee2641d">preProcessScanlines</a></div><div class="ttdeci">static unsigned preProcessScanlines(unsigned char **out, size_t *outsize, const unsigned char *in, const LodePNG_InfoPng *infoPng)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l02187">lodepng.cpp:2187</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a1aac734c511454ca4d3d05144695d7b4"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a1aac734c511454ca4d3d05144695d7b4">LodePNG_InfoRaw_init</a></div><div class="ttdeci">static void LodePNG_InfoRaw_init(LodePNG_InfoRaw *info)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01609">lodepng.cpp:1609</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a1b58c07819eec4ff7e903138c08eb502"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a1b58c07819eec4ff7e903138c08eb502">ucvector_init</a></div><div class="ttdeci">static void ucvector_init(ucvector *p)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00272">lodepng.cpp:272</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a1be657e325355087ebe176d187d2c0a5"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a1be657e325355087ebe176d187d2c0a5">searchCodeIndex</a></div><div class="ttdeci">static size_t searchCodeIndex(const unsigned *array, size_t array_size, size_t value)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00667">lodepng.cpp:667</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a1c20c80bee9fe3e28394f231a11fed9b"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a1c20c80bee9fe3e28394f231a11fed9b">LodePNG_InfoColor_isGreyscaleType</a></div><div class="ttdeci">static unsigned LodePNG_InfoColor_isGreyscaleType(const LodePNG_InfoColor *info)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01564">lodepng.cpp:1564</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a1e68ce500702fd59580e735e977b84f3"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a1e68ce500702fd59580e735e977b84f3">ADAM7_DY</a></div><div class="ttdeci">static const unsigned ADAM7_DY[7]</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01843">lodepng.cpp:1843</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a1e940c5656ead8ab9309511b00467eb1"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a1e940c5656ead8ab9309511b00467eb1">generateFixedTree</a></div><div class="ttdeci">static unsigned generateFixedTree(HuffmanTree *tree)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00615">lodepng.cpp:615</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a2236a6b7f7bc1c047658a40f24db2658"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a2236a6b7f7bc1c047658a40f24db2658">LodePNG_InfoPng_cleanup</a></div><div class="ttdeci">static void LodePNG_InfoPng_cleanup(LodePNG_InfoPng *info)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01583">lodepng.cpp:1583</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a22ed04d49e008cb4295a8b366c4f2f3b"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a22ed04d49e008cb4295a8b366c4f2f3b">NUM_CODE_LENGTH_CODES</a></div><div class="ttdeci">#define NUM_CODE_LENGTH_CODES</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00324">lodepng.cpp:324</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a25ac892793826b6ab7542b32dda29739"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a25ac892793826b6ab7542b32dda29739">readBitsFromReversedStream</a></div><div class="ttdeci">static unsigned readBitsFromReversedStream(size_t *bitpointer, const unsigned char *bitstream, size_t nbits)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01402">lodepng.cpp:1402</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a2a7f7638619c00f79a4be22bcf5fadba"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a2a7f7638619c00f79a4be22bcf5fadba">MAX_SUPPORTED_DEFLATE_LENGTH</a></div><div class="ttdeci">static const size_t MAX_SUPPORTED_DEFLATE_LENGTH</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00658">lodepng.cpp:658</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a2cccd3f6527c3d46165ee92b393c89e6"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a2cccd3f6527c3d46165ee92b393c89e6">vector_swap</a></div><div class="ttdeci">static void vector_swap(vector *p, vector *q)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00151">lodepng.cpp:151</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a2ceb381bbb52c2fc72946047b58ea11d"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a2ceb381bbb52c2fc72946047b58ea11d">uivector_resizev</a></div><div class="ttdeci">static unsigned uivector_resizev(uivector *p, size_t size, unsigned value)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00199">lodepng.cpp:199</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a2ddf4171e45f147a48c3de7d8ee14f6f"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a2ddf4171e45f147a48c3de7d8ee14f6f">LodePNG_compress</a></div><div class="ttdeci">static unsigned LodePNG_compress(unsigned char **out, size_t *outsize, const unsigned char *in, size_t insize, const LodeZlib_DeflateSettings *settings)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01340">lodepng.cpp:1340</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a2f88c6042dadfbca407902809012a408"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a2f88c6042dadfbca407902809012a408">isFullyOpaque</a></div><div class="ttdeci">static unsigned isFullyOpaque(const unsigned char *image, unsigned w, unsigned h, const LodePNG_InfoColor *info)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l02282">lodepng.cpp:2282</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a2ff4c2a69c357378cf11dfeca7383b31"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a2ff4c2a69c357378cf11dfeca7383b31">LodePNG_InfoColor_getBpp</a></div><div class="ttdeci">static unsigned LodePNG_InfoColor_getBpp(const LodePNG_InfoColor *info)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01563">lodepng.cpp:1563</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a314deb71ac32a18bd09502d2f44936e9"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a314deb71ac32a18bd09502d2f44936e9">uivector_swap</a></div><div class="ttdeci">static void uivector_swap(uivector *p, uivector *q)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00228">lodepng.cpp:228</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a3228e11a4562c70c9fb78931eb6eb44a"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a3228e11a4562c70c9fb78931eb6eb44a">HuffmanTree_cleanup</a></div><div class="ttdeci">static void HuffmanTree_cleanup(HuffmanTree *tree)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00422">lodepng.cpp:422</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a32cdbaf42f584367de1efcf037b7af06"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a32cdbaf42f584367de1efcf037b7af06">Coin_cleanup</a></div><div class="ttdeci">static void Coin_cleanup(void *c)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00351">lodepng.cpp:351</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a348bbe51fbdd2881e2caabe468611a26"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a348bbe51fbdd2881e2caabe468611a26">uivector_resize</a></div><div class="ttdeci">static unsigned uivector_resize(uivector *p, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00181">lodepng.cpp:181</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a366b19b8d9a1b17cce6de1e984c95c59"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a366b19b8d9a1b17cce6de1e984c95c59">addChunk_IDAT</a></div><div class="ttdeci">static unsigned addChunk_IDAT(ucvector *out, const unsigned char *data, size_t datasize, LodeZlib_DeflateSettings *zlibsettings)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01965">lodepng.cpp:1965</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a36f7494abb7d8fa1ed4c00495ccc69b9"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a36f7494abb7d8fa1ed4c00495ccc69b9">LENGTHEXTRA</a></div><div class="ttdeci">static const unsigned LENGTHEXTRA[29]</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00328">lodepng.cpp:329</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a37cb427b175e04defdc48569b76a375c"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a37cb427b175e04defdc48569b76a375c">HuffmanTree_init</a></div><div class="ttdeci">static void HuffmanTree_init(HuffmanTree *tree)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00415">lodepng.cpp:415</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a3cc9fa693ee76a403ef35370fea7f0f9"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a3cc9fa693ee76a403ef35370fea7f0f9">deflateDynamic</a></div><div class="ttdeci">static unsigned deflateDynamic(ucvector *out, const unsigned char *data, size_t datasize, const LodeZlib_DeflateSettings *settings)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00994">lodepng.cpp:994</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a3ef7410c8765fdbed5e61e206c1b68a9"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a3ef7410c8765fdbed5e61e206c1b68a9">writeSignature</a></div><div class="ttdeci">static void writeSignature(ucvector *out)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01882">lodepng.cpp:1882</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a419dd192a4197c45bd6613d62fb29a0a"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a419dd192a4197c45bd6613d62fb29a0a">LodeZlib_compress</a></div><div class="ttdeci">static unsigned LodeZlib_compress(unsigned char **out, size_t *outsize, const unsigned char *in, size_t insize, const LodeZlib_DeflateSettings *settings)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01269">lodepng.cpp:1269</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a4a219535105aecc94ba9d4bccfbb66b8"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a4a219535105aecc94ba9d4bccfbb66b8">HuffmanTree_getCode</a></div><div class="ttdeci">static unsigned HuffmanTree_getCode(const HuffmanTree *tree, unsigned index)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00611">lodepng.cpp:611</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a4bcc3094b5e09464f3aa13130801a831"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a4bcc3094b5e09464f3aa13130801a831">uivector_copy</a></div><div class="ttdeci">static unsigned uivector_copy(uivector *p, const uivector *q)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00220">lodepng.cpp:220</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a4d700260c21794995cbc67d6dd00ce44"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a4d700260c21794995cbc67d6dd00ce44">addBitToStream</a></div><div class="ttdeci">static void addBitToStream(size_t *bitpointer, ucvector *bitstream, unsigned char bit)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00296">lodepng.cpp:296</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a529a3f16b5cab45e0940809399e07c6f"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a529a3f16b5cab45e0940809399e07c6f">Crc32_make_crc_table</a></div><div class="ttdeci">static void Crc32_make_crc_table(void)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01353">lodepng.cpp:1353</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a56486ddd00ee16b5c21e98b8987b4e16"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a56486ddd00ee16b5c21e98b8987b4e16">LodePNG_InfoColor_clearPalette</a></div><div class="ttdeci">static void LodePNG_InfoColor_clearPalette(LodePNG_InfoColor *info)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01537">lodepng.cpp:1537</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a577f65d65db51767f90c7b4beba030f5"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a577f65d65db51767f90c7b4beba030f5">LodePNG_chunk_length</a></div><div class="ttdeci">static unsigned LodePNG_chunk_length(const unsigned char *chunk)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01441">lodepng.cpp:1441</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a58616079535e14a89a469632d078d336"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a58616079535e14a89a469632d078d336">uivector_cleanup</a></div><div class="ttdeci">static void uivector_cleanup(void *p)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00174">lodepng.cpp:174</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a58feace6a0d109fc6bb2161504a3011e"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a58feace6a0d109fc6bb2161504a3011e">NUM_DEFLATE_CODE_SYMBOLS</a></div><div class="ttdeci">#define NUM_DEFLATE_CODE_SYMBOLS</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00322">lodepng.cpp:322</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a5b48becc8f2653ba2bb90858d38fc9ec"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a5b48becc8f2653ba2bb90858d38fc9ec">NUM_DISTANCE_SYMBOLS</a></div><div class="ttdeci">#define NUM_DISTANCE_SYMBOLS</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00323">lodepng.cpp:323</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a5cfb7c89e9f18896101fddb10786cbc2"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a5cfb7c89e9f18896101fddb10786cbc2">uivector_push_back</a></div><div class="ttdeci">static unsigned uivector_push_back(uivector *p, unsigned c)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00213">lodepng.cpp:213</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a6090accee58d525f8ed01bcb3a779080"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a6090accee58d525f8ed01bcb3a779080">LodePNG_read32bitInt</a></div><div class="ttdeci">static unsigned LodePNG_read32bitInt(const unsigned char *buffer)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01418">lodepng.cpp:1418</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a657ae1f7880a7e5fc2293e8f46d77983"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a657ae1f7880a7e5fc2293e8f46d77983">vector_get</a></div><div class="ttdeci">static void * vector_get(vector *p, size_t index)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00160">lodepng.cpp:160</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a66240228e12afb19529ad1dff8469f58"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a66240228e12afb19529ad1dff8469f58">LodeZlib_add32bitInt</a></div><div class="ttdeci">static void LodeZlib_add32bitInt(ucvector *buffer, unsigned value)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01257">lodepng.cpp:1257</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a6b8e3bf04ec5a378eabb8851728421dd"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a6b8e3bf04ec5a378eabb8851728421dd">update_adler32</a></div><div class="ttdeci">static unsigned update_adler32(unsigned adler, const unsigned char *data, unsigned len)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01224">lodepng.cpp:1224</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a6d1485ec2eeff62cfae05addb41e7baf"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a6d1485ec2eeff62cfae05addb41e7baf">LodePNG_InfoColor_copy</a></div><div class="ttdeci">static unsigned LodePNG_InfoColor_copy(LodePNG_InfoColor *dest, const LodePNG_InfoColor *source)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01598">lodepng.cpp:1598</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a6d2c08601522a93dcfff80c45d1624dd"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a6d2c08601522a93dcfff80c45d1624dd">addChunk_IHDR</a></div><div class="ttdeci">static unsigned addChunk_IHDR(ucvector *out, unsigned w, unsigned h, unsigned bitDepth, unsigned colorType, unsigned interlaceMethod)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01895">lodepng.cpp:1895</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a6dd288bb82383b61cb04855b6a38680a"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a6dd288bb82383b61cb04855b6a38680a">HuffmanTree_makeFromLengths2</a></div><div class="ttdeci">static unsigned HuffmanTree_makeFromLengths2(HuffmanTree *tree)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00467">lodepng.cpp:467</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a6e921f21ce796d21b10a5602708356c9"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a6e921f21ce796d21b10a5602708356c9">LENGTHBASE</a></div><div class="ttdeci">static const unsigned LENGTHBASE[29]</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00326">lodepng.cpp:327</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a758e000aa92967d5916db08e815e6b1f"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a758e000aa92967d5916db08e815e6b1f">deflateNoCompression</a></div><div class="ttdeci">static unsigned deflateNoCompression(ucvector *out, const unsigned char *data, size_t datasize)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00931">lodepng.cpp:931</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a78336e0107c8a22c68a85afe6d7c2af6"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a78336e0107c8a22c68a85afe6d7c2af6">CLCL</a></div><div class="ttdeci">static const unsigned CLCL[NUM_CODE_LENGTH_CODES]</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00334">lodepng.cpp:335</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a78e71630babf8893f976287a9a8aa65b"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a78e71630babf8893f976287a9a8aa65b">generateDistanceTree</a></div><div class="ttdeci">static unsigned generateDistanceTree(HuffmanTree *tree)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00637">lodepng.cpp:637</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a7c7a74518cbbfeade8e271556152b683"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a7c7a74518cbbfeade8e271556152b683">LodePNG_InfoRaw_copy</a></div><div class="ttdeci">static unsigned LodePNG_InfoRaw_copy(LodePNG_InfoRaw *dest, const LodePNG_InfoRaw *source)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01619">lodepng.cpp:1619</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a8220b4fba74162202ac5294bde504252"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a8220b4fba74162202ac5294bde504252">addHuffmanSymbol</a></div><div class="ttdeci">static void addHuffmanSymbol(size_t *bp, ucvector *compressed, unsigned code, unsigned bitlen)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00661">lodepng.cpp:661</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a83a90dcbc8adcba8293158785d264bb8"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a83a90dcbc8adcba8293158785d264bb8">checkColorValidity</a></div><div class="ttdeci">static unsigned checkColorValidity(unsigned colorType, unsigned bd)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01488">lodepng.cpp:1488</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a851ee080587d6fe775d09e376947c880"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a851ee080587d6fe775d09e376947c880">ADAM7_IY</a></div><div class="ttdeci">static const unsigned ADAM7_IY[7]</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01841">lodepng.cpp:1841</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a85488c2cdadbed8c6ac4261a3922e186"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a85488c2cdadbed8c6ac4261a3922e186">ADAM7_IX</a></div><div class="ttdeci">static const unsigned ADAM7_IX[7]</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01840">lodepng.cpp:1840</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a8568c3c7e48c2e58919f60ffcbe0d90c"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a8568c3c7e48c2e58919f60ffcbe0d90c">LodePNG_chunk_generate_crc</a></div><div class="ttdeci">static void LodePNG_chunk_generate_crc(unsigned char *chunk)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01446">lodepng.cpp:1446</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a86f1534dd35f6da700dcb226bbfe2c57"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a86f1534dd35f6da700dcb226bbfe2c57">Adam7_interlace</a></div><div class="ttdeci">static void Adam7_interlace(unsigned char *out, const unsigned char *in, unsigned w, unsigned h, unsigned bpp)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l02137">lodepng.cpp:2137</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a877b6a70493cb0b29f719ea48a26eadb"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a877b6a70493cb0b29f719ea48a26eadb">ucvector_push_back</a></div><div class="ttdeci">static unsigned ucvector_push_back(ucvector *p, unsigned char c)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00285">lodepng.cpp:285</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a8ca5670df4a17d12d10c63d21330c947"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a8ca5670df4a17d12d10c63d21330c947">filterScanline</a></div><div class="ttdeci">static void filterScanline(unsigned char *out, const unsigned char *scanline, const unsigned char *prevline, size_t length, size_t bytewidth, unsigned char filterType)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01986">lodepng.cpp:1986</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a916c52418acebce22bcc2ad10af2b3b7"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a916c52418acebce22bcc2ad10af2b3b7">LodePNG_add32bitInt</a></div><div class="ttdeci">static void LodePNG_add32bitInt(ucvector *buffer, unsigned value)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01431">lodepng.cpp:1431</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a9255de3deb6a57a77c17f95f4609af08"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a9255de3deb6a57a77c17f95f4609af08">getNumColorChannels</a></div><div class="ttdeci">static unsigned getNumColorChannels(unsigned colorType)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01502">lodepng.cpp:1502</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a956b1e6db2786d2aca4cca539a8f1a97"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a956b1e6db2786d2aca4cca539a8f1a97">LodePNG_InfoColor_cleanup</a></div><div class="ttdeci">static void LodePNG_InfoColor_cleanup(LodePNG_InfoColor *info)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01532">lodepng.cpp:1532</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a96367b6d4f2b41539c3584448dea5a80"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a96367b6d4f2b41539c3584448dea5a80">encodeLZ77</a></div><div class="ttdeci">#define encodeLZ77</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00706">lodepng.cpp:706</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_a965dbd8125f0471f3e0d8206b4c91f22"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#a965dbd8125f0471f3e0d8206b4c91f22">ucvector_init_buffer</a></div><div class="ttdeci">static void ucvector_init_buffer(ucvector *p, unsigned char *buffer, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00279">lodepng.cpp:279</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_aa03164e774d0dea9886ccdbb3f591f49"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#aa03164e774d0dea9886ccdbb3f591f49">uivector_init</a></div><div class="ttdeci">static void uivector_init(uivector *p)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00207">lodepng.cpp:207</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_aa132b9bc406016bf1f55268c009502ef"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#aa132b9bc406016bf1f55268c009502ef">Coin_init</a></div><div class="ttdeci">static void Coin_init(Coin *c)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00346">lodepng.cpp:346</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_aa3c00d6565b6bf50aa7e68516941da40"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#aa3c00d6565b6bf50aa7e68516941da40">LodeZlib_DeflateSettings_init</a></div><div class="ttdeci">static void LodeZlib_DeflateSettings_init(LodeZlib_DeflateSettings *settings)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01309">lodepng.cpp:1309</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_aa3df75b8dd02addb3ab313a22bc85cd9"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#aa3df75b8dd02addb3ab313a22bc85cd9">Crc32_update_crc</a></div><div class="ttdeci">static unsigned Crc32_update_crc(const unsigned char *buf, unsigned int crc, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01372">lodepng.cpp:1372</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_aa460b4664eff1376c02a8d15ce6843ca"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#aa460b4664eff1376c02a8d15ce6843ca">LodePNG_InfoRaw_cleanup</a></div><div class="ttdeci">static void LodePNG_InfoRaw_cleanup(LodePNG_InfoRaw *info)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01614">lodepng.cpp:1614</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_aa5fd927979200cad69af4283995db589"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#aa5fd927979200cad69af4283995db589">Coin_sort</a></div><div class="ttdeci">static void Coin_sort(Coin *data, size_t amount)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00369">lodepng.cpp:369</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_aa65d1743dade2919f44301461bde054d"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#aa65d1743dade2919f44301461bde054d">readBitFromReversedStream</a></div><div class="ttdeci">static unsigned char readBitFromReversedStream(size_t *bitpointer, const unsigned char *bitstream)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01395">lodepng.cpp:1395</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_aa6fa04a4423160f5119c6f4e0247556c"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#aa6fa04a4423160f5119c6f4e0247556c">vector_cleanup</a></div><div class="ttdeci">static void vector_cleanup(void *p)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00131">lodepng.cpp:131</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_aab31a4b50678870f58d9b4fb90570dc6"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#aab31a4b50678870f58d9b4fb90570dc6">LodePNG_InfoPng_copy</a></div><div class="ttdeci">static unsigned LodePNG_InfoPng_copy(LodePNG_InfoPng *dest, const LodePNG_InfoPng *source)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01588">lodepng.cpp:1588</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_aac2094ad000d8ec77a7dfe2e221ce551"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#aac2094ad000d8ec77a7dfe2e221ce551">Crc32_crc</a></div><div class="ttdeci">static unsigned Crc32_crc(const unsigned char *buf, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01386">lodepng.cpp:1386</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_aad409090a7949e79b1db4c3a34431712"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#aad409090a7949e79b1db4c3a34431712">addLengthDistance</a></div><div class="ttdeci">static void addLengthDistance(uivector *values, size_t length, size_t distance)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00686">lodepng.cpp:686</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_aadc61a27e58bef1cc7722ea172bf58fd"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#aadc61a27e58bef1cc7722ea172bf58fd">HuffmanTree_make2DTree</a></div><div class="ttdeci">static unsigned HuffmanTree_make2DTree(HuffmanTree *tree)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00430">lodepng.cpp:430</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_aaea176486e1e119fd7b742f8c7049104"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#aaea176486e1e119fd7b742f8c7049104">LodePNG_set32bitInt</a></div><div class="ttdeci">static void LodePNG_set32bitInt(unsigned char *buffer, unsigned value)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01423">lodepng.cpp:1423</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_aaee6011b88c8b394ccd9e868b01cafa6"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#aaee6011b88c8b394ccd9e868b01cafa6">addBitsToStream</a></div><div class="ttdeci">static void addBitsToStream(size_t *bitpointer, ucvector *bitstream, unsigned value, size_t nbits)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00303">lodepng.cpp:303</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_aaff8570a8cd87fb288946c4465077c8d"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#aaff8570a8cd87fb288946c4465077c8d">adler32</a></div><div class="ttdeci">static unsigned adler32(const unsigned char *data, unsigned len)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01248">lodepng.cpp:1248</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_ab2054e40f6c26aed0a0e618035d66190"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#ab2054e40f6c26aed0a0e618035d66190">LodePNG_create_chunk</a></div><div class="ttdeci">static unsigned LodePNG_create_chunk(unsigned char **out, size_t *outlength, unsigned length, const char *type, const unsigned char *data)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01453">lodepng.cpp:1453</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_ab7971f0b72f02afb5ce07151fc59d78d"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#ab7971f0b72f02afb5ce07151fc59d78d">LodePNG_InfoPng_init</a></div><div class="ttdeci">static void LodePNG_InfoPng_init(LodePNG_InfoPng *info)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01574">lodepng.cpp:1574</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_aba97231d47c3cb5538a30bb0cd4be7e9"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#aba97231d47c3cb5538a30bb0cd4be7e9">HuffmanTree_makeFromLengths</a></div><div class="ttdeci">static unsigned HuffmanTree_makeFromLengths(HuffmanTree *tree, const unsigned *bitlen, size_t numcodes, unsigned maxbitlen)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00498">lodepng.cpp:498</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_abffce52f6c998970053d50ea867e4277"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#abffce52f6c998970053d50ea867e4277">encodeLZ77_brute</a></div><div class="ttdeci">static unsigned encodeLZ77_brute(uivector *out, const unsigned char *in, size_t size, unsigned windowSize)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00708">lodepng.cpp:708</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_ac47e572c85623e55bb4ca5b75767bad9"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#ac47e572c85623e55bb4ca5b75767bad9">addChunk_PLTE</a></div><div class="ttdeci">static unsigned addChunk_PLTE(ucvector *out, const LodePNG_InfoColor *info)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01915">lodepng.cpp:1915</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_ac961612365e0c5c5633e7b88d8ade52f"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#ac961612365e0c5c5633e7b88d8ade52f">Crc32_crc_table_computed</a></div><div class="ttdeci">static unsigned Crc32_crc_table_computed</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01349">lodepng.cpp:1349</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_aca4038c773ca0f7cdc7b324c3c3df167"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#aca4038c773ca0f7cdc7b324c3c3df167">addChunk_IEND</a></div><div class="ttdeci">static unsigned addChunk_IEND(ucvector *out)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01979">lodepng.cpp:1979</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_aca8bfab1ea1377cbd8172773f56ab4d3"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#aca8bfab1ea1377cbd8172773f56ab4d3">Crc32_crc_table</a></div><div class="ttdeci">static unsigned Crc32_crc_table[256]</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01350">lodepng.cpp:1350</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_acaf561f0c4e23840e58b49221ed4a39d"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#acaf561f0c4e23840e58b49221ed4a39d">DISTANCEBASE</a></div><div class="ttdeci">static const unsigned DISTANCEBASE[30]</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00330">lodepng.cpp:331</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_acfb12caea990f92b3aed7c199f615213"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#acfb12caea990f92b3aed7c199f615213">FIRST_LENGTH_CODE_INDEX</a></div><div class="ttdeci">#define FIRST_LENGTH_CODE_INDEX</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00320">lodepng.cpp:320</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_ad0c66f68896932ea51424b30210432ce"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#ad0c66f68896932ea51424b30210432ce">vector_init</a></div><div class="ttdeci">static void vector_init(vector *p, unsigned typesize)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00144">lodepng.cpp:144</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_ad20eccb1816580176496c3723e6178c3"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#ad20eccb1816580176496c3723e6178c3">deflateFixed</a></div><div class="ttdeci">static unsigned deflateFixed(ucvector *out, const unsigned char *data, size_t datasize, const LodeZlib_DeflateSettings *settings)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01169">lodepng.cpp:1169</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_ad45000e15d57d532451035d170b5d455"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#ad45000e15d57d532451035d170b5d455">LodePNG_InfoColor_init</a></div><div class="ttdeci">static void LodePNG_InfoColor_init(LodePNG_InfoColor *info)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01522">lodepng.cpp:1522</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_ad4cfbadddc654077c28010b5062ca49e"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#ad4cfbadddc654077c28010b5062ca49e">addCoins</a></div><div class="ttdeci">static void addCoins(Coin *c1, const Coin *c2)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00362">lodepng.cpp:362</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_ad4fe7843fd0159f6b632aa41826132ec"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#ad4fe7843fd0159f6b632aa41826132ec">writeLZ77data</a></div><div class="ttdeci">static void writeLZ77data(size_t *bp, ucvector *out, const uivector *lz77_encoded, const HuffmanTree *codes, const HuffmanTree *codesD)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00968">lodepng.cpp:968</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_ad689bf84470238e26b01524631d778ec"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#ad689bf84470238e26b01524631d778ec">ucvector_cleanup</a></div><div class="ttdeci">static void ucvector_cleanup(void *p)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00246">lodepng.cpp:246</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_ad6cd8facac090f1da5e2095f647292c3"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#ad6cd8facac090f1da5e2095f647292c3">paethPredictor</a></div><div class="ttdeci">static int paethPredictor(int a, int b, int c)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01826">lodepng.cpp:1826</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_ad70e0171915f500751363be0537b9c76"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#ad70e0171915f500751363be0537b9c76">vector_resize</a></div><div class="ttdeci">static unsigned vector_resize(vector *p, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00106">lodepng.cpp:106</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_adc247413ddc1523b94f7207baacce739"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#adc247413ddc1523b94f7207baacce739">filter</a></div><div class="ttdeci">static unsigned filter(unsigned char *out, const unsigned char *in, unsigned w, unsigned h, const LodePNG_InfoColor *info)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l02030">lodepng.cpp:2030</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_adf95b6706a8d434cd386d310e50d4db7"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#adf95b6706a8d434cd386d310e50d4db7">Coin_copy</a></div><div class="ttdeci">static void Coin_copy(Coin *c1, const Coin *c2)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00356">lodepng.cpp:356</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_ae2b6129cf7ecfc3c6bc1c15c0bf2eed0"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#ae2b6129cf7ecfc3c6bc1c15c0bf2eed0">DISTANCEEXTRA</a></div><div class="ttdeci">static const unsigned DISTANCEEXTRA[30]</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00332">lodepng.cpp:333</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_ae4e2da90ae4abb858852f211eb28d622"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#ae4e2da90ae4abb858852f211eb28d622">ucvector_resize</a></div><div class="ttdeci">static unsigned ucvector_resize(ucvector *p, size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00253">lodepng.cpp:253</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_ae752ee94f1a6acf5103584bdf2882fb5"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#ae752ee94f1a6acf5103584bdf2882fb5">isPaletteFullyOpaque</a></div><div class="ttdeci">static unsigned isPaletteFullyOpaque(const unsigned char *palette, size_t palettesize)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l02271">lodepng.cpp:2271</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_aeabf2a41d047b03ce98475fe940446d8"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#aeabf2a41d047b03ce98475fe940446d8">addChunk_tRNS</a></div><div class="ttdeci">static unsigned addChunk_tRNS(ucvector *out, const LodePNG_InfoColor *info)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01928">lodepng.cpp:1928</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_aeb70a14a3e3d525bddd824f5aa6bffb8"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#aeb70a14a3e3d525bddd824f5aa6bffb8">LodePNG_convert</a></div><div class="ttdeci">static unsigned LodePNG_convert(unsigned char *out, const unsigned char *in, LodePNG_InfoColor *infoOut, LodePNG_InfoColor *infoIn, unsigned w, unsigned h)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01636">lodepng.cpp:1636</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_aef353b91f13641f94a9028ac84fb330c"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#aef353b91f13641f94a9028ac84fb330c">addBitsToStreamReversed</a></div><div class="ttdeci">static void addBitsToStreamReversed(size_t *bitpointer, ucvector *bitstream, unsigned value, size_t nbits)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00309">lodepng.cpp:309</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_af19f183e437b63f5fca48f26807bfa4a"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#af19f183e437b63f5fca48f26807bfa4a">addChunk</a></div><div class="ttdeci">static unsigned addChunk(ucvector *out, const char *chunkName, const unsigned char *data, size_t length)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01874">lodepng.cpp:1874</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_af2722296a74620c6b9761b58ac58881d"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#af2722296a74620c6b9761b58ac58881d">LodePNG_InfoColor_isAlphaType</a></div><div class="ttdeci">static unsigned LodePNG_InfoColor_isAlphaType(const LodePNG_InfoColor *info)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01565">lodepng.cpp:1565</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_af3ae20779df70d02c4a2d6195e72c976"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#af3ae20779df70d02c4a2d6195e72c976">ADAM7_DX</a></div><div class="ttdeci">static const unsigned ADAM7_DX[7]</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01842">lodepng.cpp:1842</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_afa9f9dc4d70561a39c15ccac3459e3de"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#afa9f9dc4d70561a39c15ccac3459e3de">LodePNG_InfoColor_equal</a></div><div class="ttdeci">static unsigned LodePNG_InfoColor_equal(const LodePNG_InfoColor *info1, const LodePNG_InfoColor *info2)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01567">lodepng.cpp:1567</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_afab63835fa156b812c454a4a96b7b28b"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#afab63835fa156b812c454a4a96b7b28b">setBitOfReversedStream</a></div><div class="ttdeci">static void setBitOfReversedStream(size_t *bitpointer, unsigned char *bitstream, unsigned char bit)</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l01410">lodepng.cpp:1410</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8cpp_html_afc61ae1883ecf63df39e0159cb9e2707"><div class="ttname"><a href="liblodepng_2lodepng_8cpp.html#afc61ae1883ecf63df39e0159cb9e2707">vector_resized</a></div><div class="ttdeci">static unsigned vector_resized(vector *p, size_t size, void dtor(void *))</div><div class="ttdef"><b>Definition:</b> <a href="liblodepng_2lodepng_8cpp_source.html#l00124">lodepng.cpp:124</a></div></div>
<div class="ttc" id="aliblodepng_2lodepng_8h_html"><div class="ttname"><a href="liblodepng_2lodepng_8h.html">lodepng.h</a></div></div>
<div class="ttc" id="anamespace_portable_html_a4dbb08c3de409bd1a73be3da6d93ac57"><div class="ttname"><a href="namespace_portable.html#a4dbb08c3de409bd1a73be3da6d93ac57">Portable::fopen</a></div><div class="ttdeci">FILE * fopen(const QCString &amp;fileName, const QCString &amp;mode)</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2src_2portable_8cpp_source.html#l00316">portable.cpp:316</a></div></div>
<div class="ttc" id="anamespace_portable_html_af099fa6239b4961887192d8eadfd2a44"><div class="ttname"><a href="namespace_portable.html#af099fa6239b4961887192d8eadfd2a44">Portable::fclose</a></div><div class="ttdeci">int fclose(FILE *f)</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2src_2portable_8cpp_source.html#l00336">portable.cpp:336</a></div></div>
<div class="ttc" id="anamespacecaseconvert_html_ad3d65a3e98ad183dea4b1904045afa08"><div class="ttname"><a href="namespacecaseconvert.html#ad3d65a3e98ad183dea4b1904045afa08">caseconvert.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2src_2caseconvert_8py_source.html#l00026">caseconvert.py:26</a></div></div>
<div class="ttc" id="anamespacetestsqlite3_html_aaf1f002c93e5808e18b0a59e3b1691d9"><div class="ttname"><a href="namespacetestsqlite3.html#aaf1f002c93e5808e18b0a59e3b1691d9">testsqlite3.val</a></div><div class="ttdeci">list val</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2testing_2testsqlite3_8py_source.html#l00013">testsqlite3.py:13</a></div></div>
<div class="ttc" id="astruct_coin_html"><div class="ttname"><a href="struct_coin.html">Coin</a></div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l00340">lodepng.cpp:341</a></div></div>
<div class="ttc" id="astruct_coin_html_a0427f9a678a9ce031a254f40f06b3669"><div class="ttname"><a href="struct_coin.html#a0427f9a678a9ce031a254f40f06b3669">Coin::weight</a></div><div class="ttdeci">float weight</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l00343">lodepng.cpp:343</a></div></div>
<div class="ttc" id="astruct_coin_html_a1d6bc1176bb9fcbd9ca8c781c92ef432"><div class="ttname"><a href="struct_coin.html#a1d6bc1176bb9fcbd9ca8c781c92ef432">Coin::symbols</a></div><div class="ttdeci">uivector symbols</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l00342">lodepng.cpp:342</a></div></div>
<div class="ttc" id="astruct_huffman_tree_html"><div class="ttname"><a href="struct_huffman_tree.html">HuffmanTree</a></div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l00393">lodepng.cpp:394</a></div></div>
<div class="ttc" id="astruct_huffman_tree_html_a0bb5fd80eb9ec029f66cf30641b98363"><div class="ttname"><a href="struct_huffman_tree.html#a0bb5fd80eb9ec029f66cf30641b98363">HuffmanTree::tree1d</a></div><div class="ttdeci">uivector tree1d</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l00396">lodepng.cpp:396</a></div></div>
<div class="ttc" id="astruct_huffman_tree_html_a24afa4a1079f6ee1c9829b9b5aa5fe89"><div class="ttname"><a href="struct_huffman_tree.html#a24afa4a1079f6ee1c9829b9b5aa5fe89">HuffmanTree::tree2d</a></div><div class="ttdeci">uivector tree2d</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l00395">lodepng.cpp:395</a></div></div>
<div class="ttc" id="astruct_huffman_tree_html_a293790e0f67d8fdf9df5a2914af39251"><div class="ttname"><a href="struct_huffman_tree.html#a293790e0f67d8fdf9df5a2914af39251">HuffmanTree::lengths</a></div><div class="ttdeci">uivector lengths</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l00397">lodepng.cpp:397</a></div></div>
<div class="ttc" id="astruct_huffman_tree_html_a608df5a24f60d1077a5cde19d5149e1f"><div class="ttname"><a href="struct_huffman_tree.html#a608df5a24f60d1077a5cde19d5149e1f">HuffmanTree::numcodes</a></div><div class="ttdeci">unsigned numcodes</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l00399">lodepng.cpp:399</a></div></div>
<div class="ttc" id="astruct_huffman_tree_html_adf034ca9ce62a4ebfffaaeaba4378a26"><div class="ttname"><a href="struct_huffman_tree.html#adf034ca9ce62a4ebfffaaeaba4378a26">HuffmanTree::maxbitlen</a></div><div class="ttdeci">unsigned maxbitlen</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l00398">lodepng.cpp:398</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___encode_settings_html"><div class="ttname"><a href="struct_lode_p_n_g___encode_settings.html">LodePNG_EncodeSettings</a></div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00092">lodepng.h:93</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___encode_settings_html_a44de1047cd9f3bfd55bf8c5313620065"><div class="ttname"><a href="struct_lode_p_n_g___encode_settings.html#a44de1047cd9f3bfd55bf8c5313620065">LodePNG_EncodeSettings::force_palette</a></div><div class="ttdeci">unsigned force_palette</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00097">lodepng.h:97</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___encode_settings_html_a5074182840fae2ac4399ca9fa6660b41"><div class="ttname"><a href="struct_lode_p_n_g___encode_settings.html#a5074182840fae2ac4399ca9fa6660b41">LodePNG_EncodeSettings::autoLeaveOutAlphaChannel</a></div><div class="ttdeci">unsigned autoLeaveOutAlphaChannel</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00096">lodepng.h:96</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___encode_settings_html_addba4b351da6bace64c02a264be74f53"><div class="ttname"><a href="struct_lode_p_n_g___encode_settings.html#addba4b351da6bace64c02a264be74f53">LodePNG_EncodeSettings::zlibsettings</a></div><div class="ttdeci">LodeZlib_DeflateSettings zlibsettings</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00094">lodepng.h:94</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___encoder_html"><div class="ttname"><a href="struct_lode_p_n_g___encoder.html">LodePNG_Encoder</a></div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00102">lodepng.h:103</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___encoder_html_a18e658a08db22dd34fc26c138f3eb2df"><div class="ttname"><a href="struct_lode_p_n_g___encoder.html#a18e658a08db22dd34fc26c138f3eb2df">LodePNG_Encoder::error</a></div><div class="ttdeci">unsigned error</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00107">lodepng.h:107</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___encoder_html_a5c4bc6d9be898fbcc14b5d762d69457e"><div class="ttname"><a href="struct_lode_p_n_g___encoder.html#a5c4bc6d9be898fbcc14b5d762d69457e">LodePNG_Encoder::infoPng</a></div><div class="ttdeci">LodePNG_InfoPng infoPng</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00105">lodepng.h:105</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___encoder_html_ae36ceb21b9d1007491f4edbb2be12bab"><div class="ttname"><a href="struct_lode_p_n_g___encoder.html#ae36ceb21b9d1007491f4edbb2be12bab">LodePNG_Encoder::settings</a></div><div class="ttdeci">LodePNG_EncodeSettings settings</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00104">lodepng.h:104</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___encoder_html_af37ca9b0bcecd5d1d68756fd293ab998"><div class="ttname"><a href="struct_lode_p_n_g___encoder.html#af37ca9b0bcecd5d1d68756fd293ab998">LodePNG_Encoder::infoRaw</a></div><div class="ttdeci">LodePNG_InfoRaw infoRaw</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00106">lodepng.h:106</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___info_color_html"><div class="ttname"><a href="struct_lode_p_n_g___info_color.html">LodePNG_InfoColor</a></div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00057">lodepng.h:58</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___info_color_html_a3b3862dd05e3f9f0bd9e95741d49e266"><div class="ttname"><a href="struct_lode_p_n_g___info_color.html#a3b3862dd05e3f9f0bd9e95741d49e266">LodePNG_InfoColor::palette</a></div><div class="ttdeci">unsigned char * palette</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00064">lodepng.h:64</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___info_color_html_a44bf4906335328972acebd6c8b83a073"><div class="ttname"><a href="struct_lode_p_n_g___info_color.html#a44bf4906335328972acebd6c8b83a073">LodePNG_InfoColor::key_g</a></div><div class="ttdeci">unsigned key_g</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00070">lodepng.h:70</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___info_color_html_a49842a304ffd0abc8aa791030c5fa5dd"><div class="ttname"><a href="struct_lode_p_n_g___info_color.html#a49842a304ffd0abc8aa791030c5fa5dd">LodePNG_InfoColor::palettesize</a></div><div class="ttdeci">size_t palettesize</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00065">lodepng.h:65</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___info_color_html_a4ed18d179c5078137a18e742b1c41a00"><div class="ttname"><a href="struct_lode_p_n_g___info_color.html#a4ed18d179c5078137a18e742b1c41a00">LodePNG_InfoColor::colorType</a></div><div class="ttdeci">unsigned colorType</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00060">lodepng.h:60</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___info_color_html_a5536a8859201cd11df789ec7ad8263df"><div class="ttname"><a href="struct_lode_p_n_g___info_color.html#a5536a8859201cd11df789ec7ad8263df">LodePNG_InfoColor::key_r</a></div><div class="ttdeci">unsigned key_r</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00069">lodepng.h:69</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___info_color_html_a9d538965a46d59bbdea744da8b290591"><div class="ttname"><a href="struct_lode_p_n_g___info_color.html#a9d538965a46d59bbdea744da8b290591">LodePNG_InfoColor::bitDepth</a></div><div class="ttdeci">unsigned bitDepth</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00061">lodepng.h:61</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___info_color_html_a9f99cc5b4366f1eed325d13b4f191560"><div class="ttname"><a href="struct_lode_p_n_g___info_color.html#a9f99cc5b4366f1eed325d13b4f191560">LodePNG_InfoColor::key_b</a></div><div class="ttdeci">unsigned key_b</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00071">lodepng.h:71</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___info_color_html_aa0193ce13025c776a0dfb1e6d1bed14a"><div class="ttname"><a href="struct_lode_p_n_g___info_color.html#aa0193ce13025c776a0dfb1e6d1bed14a">LodePNG_InfoColor::key_defined</a></div><div class="ttdeci">unsigned key_defined</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00068">lodepng.h:68</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___info_png_html"><div class="ttname"><a href="struct_lode_p_n_g___info_png.html">LodePNG_InfoPng</a></div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00074">lodepng.h:75</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___info_png_html_a101ffbacd7026dad4ab062e984cecf17"><div class="ttname"><a href="struct_lode_p_n_g___info_png.html#a101ffbacd7026dad4ab062e984cecf17">LodePNG_InfoPng::filterMethod</a></div><div class="ttdeci">unsigned filterMethod</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00080">lodepng.h:80</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___info_png_html_a177065a8eeb66398a89ed93e7c2b2f50"><div class="ttname"><a href="struct_lode_p_n_g___info_png.html#a177065a8eeb66398a89ed93e7c2b2f50">LodePNG_InfoPng::compressionMethod</a></div><div class="ttdeci">unsigned compressionMethod</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00079">lodepng.h:79</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___info_png_html_a4b87ec9649e7177af7a5f5e08e5bc491"><div class="ttname"><a href="struct_lode_p_n_g___info_png.html#a4b87ec9649e7177af7a5f5e08e5bc491">LodePNG_InfoPng::height</a></div><div class="ttdeci">unsigned height</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00078">lodepng.h:78</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___info_png_html_a74be99b177b28f3178c02139c4b7f149"><div class="ttname"><a href="struct_lode_p_n_g___info_png.html#a74be99b177b28f3178c02139c4b7f149">LodePNG_InfoPng::width</a></div><div class="ttdeci">unsigned width</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00077">lodepng.h:77</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___info_png_html_acce58518f72f42ba94db4c1cfd69336b"><div class="ttname"><a href="struct_lode_p_n_g___info_png.html#acce58518f72f42ba94db4c1cfd69336b">LodePNG_InfoPng::color</a></div><div class="ttdeci">LodePNG_InfoColor color</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00082">lodepng.h:82</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___info_png_html_ad261cbe064eb69a92638e880d99347ca"><div class="ttname"><a href="struct_lode_p_n_g___info_png.html#ad261cbe064eb69a92638e880d99347ca">LodePNG_InfoPng::interlaceMethod</a></div><div class="ttdeci">unsigned interlaceMethod</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00081">lodepng.h:81</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___info_raw_html"><div class="ttname"><a href="struct_lode_p_n_g___info_raw.html">LodePNG_InfoRaw</a></div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00085">lodepng.h:86</a></div></div>
<div class="ttc" id="astruct_lode_p_n_g___info_raw_html_ae9fa1c020358980be41f861ab71589fb"><div class="ttname"><a href="struct_lode_p_n_g___info_raw.html#ae9fa1c020358980be41f861ab71589fb">LodePNG_InfoRaw::color</a></div><div class="ttdeci">LodePNG_InfoColor color</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00087">lodepng.h:87</a></div></div>
<div class="ttc" id="astruct_lode_zlib___deflate_settings_html"><div class="ttname"><a href="struct_lode_zlib___deflate_settings.html">LodeZlib_DeflateSettings</a></div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00044">lodepng.h:45</a></div></div>
<div class="ttc" id="astruct_lode_zlib___deflate_settings_html_a71f933aad07b4d940716c7873c771c95"><div class="ttname"><a href="struct_lode_zlib___deflate_settings.html#a71f933aad07b4d940716c7873c771c95">LodeZlib_DeflateSettings::useLZ77</a></div><div class="ttdeci">unsigned useLZ77</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00048">lodepng.h:48</a></div></div>
<div class="ttc" id="astruct_lode_zlib___deflate_settings_html_a9a016a3b62b8efae335eb585f7f40cfd"><div class="ttname"><a href="struct_lode_zlib___deflate_settings.html#a9a016a3b62b8efae335eb585f7f40cfd">LodeZlib_DeflateSettings::btype</a></div><div class="ttdeci">unsigned btype</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00047">lodepng.h:47</a></div></div>
<div class="ttc" id="astruct_lode_zlib___deflate_settings_html_ab4db0ff77376a9a8b9af7f85cafc6028"><div class="ttname"><a href="struct_lode_zlib___deflate_settings.html#ab4db0ff77376a9a8b9af7f85cafc6028">LodeZlib_DeflateSettings::windowSize</a></div><div class="ttdeci">unsigned windowSize</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8h_source.html#l00049">lodepng.h:49</a></div></div>
<div class="ttc" id="astructucvector_html"><div class="ttname"><a href="structucvector.html">ucvector</a></div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l00239">lodepng.cpp:240</a></div></div>
<div class="ttc" id="astructucvector_html_a235168baac13f0c78bd3e309dc170f90"><div class="ttname"><a href="structucvector.html#a235168baac13f0c78bd3e309dc170f90">ucvector::allocsize</a></div><div class="ttdeci">size_t allocsize</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l00243">lodepng.cpp:243</a></div></div>
<div class="ttc" id="astructucvector_html_a27c99c34de0c5b3ca0c242d402c69499"><div class="ttname"><a href="structucvector.html#a27c99c34de0c5b3ca0c242d402c69499">ucvector::size</a></div><div class="ttdeci">size_t size</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l00242">lodepng.cpp:242</a></div></div>
<div class="ttc" id="astructucvector_html_a803973058c172963314ff05217b57d60"><div class="ttname"><a href="structucvector.html#a803973058c172963314ff05217b57d60">ucvector::data</a></div><div class="ttdeci">unsigned char * data</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l00241">lodepng.cpp:241</a></div></div>
<div class="ttc" id="astructuivector_html"><div class="ttname"><a href="structuivector.html">uivector</a></div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l00167">lodepng.cpp:168</a></div></div>
<div class="ttc" id="astructuivector_html_aa999025945f0c93d0461192475ae2720"><div class="ttname"><a href="structuivector.html#aa999025945f0c93d0461192475ae2720">uivector::size</a></div><div class="ttdeci">size_t size</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l00170">lodepng.cpp:170</a></div></div>
<div class="ttc" id="astructuivector_html_aac0395a9ad397ae7a28219561ab49ffa"><div class="ttname"><a href="structuivector.html#aac0395a9ad397ae7a28219561ab49ffa">uivector::allocsize</a></div><div class="ttdeci">size_t allocsize</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l00171">lodepng.cpp:171</a></div></div>
<div class="ttc" id="astructuivector_html_acd3d4713699ac529df6f3b0188c5f4d4"><div class="ttname"><a href="structuivector.html#acd3d4713699ac529df6f3b0188c5f4d4">uivector::data</a></div><div class="ttdeci">unsigned * data</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l00169">lodepng.cpp:169</a></div></div>
<div class="ttc" id="astructvector_html"><div class="ttname"><a href="structvector.html">vector</a></div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l00098">lodepng.cpp:99</a></div></div>
<div class="ttc" id="astructvector_html_a4200005b6949608d6a533db1a0d299c8"><div class="ttname"><a href="structvector.html#a4200005b6949608d6a533db1a0d299c8">vector::size</a></div><div class="ttdeci">size_t size</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l00101">lodepng.cpp:101</a></div></div>
<div class="ttc" id="astructvector_html_a52795ebc16dc899ccb6c1f9f6238921a"><div class="ttname"><a href="structvector.html#a52795ebc16dc899ccb6c1f9f6238921a">vector::allocsize</a></div><div class="ttdeci">size_t allocsize</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l00102">lodepng.cpp:102</a></div></div>
<div class="ttc" id="astructvector_html_a5bb4e553d7baae17ad571450ec31fd20"><div class="ttname"><a href="structvector.html#a5bb4e553d7baae17ad571450ec31fd20">vector::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l00100">lodepng.cpp:100</a></div></div>
<div class="ttc" id="astructvector_html_aab0b37e2650659a664f4c993e6309d42"><div class="ttname"><a href="structvector.html#aab0b37e2650659a664f4c993e6309d42">vector::typesize</a></div><div class="ttdeci">unsigned typesize</div><div class="ttdef"><b>Definition:</b> <a href="build_2doxygen_2liblodepng_2lodepng_8cpp_source.html#l00103">lodepng.cpp:103</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
