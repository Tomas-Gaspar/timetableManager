\hypertarget{class_thread_pool}{}\doxysection{Thread\+Pool Class Reference}
\label{class_thread_pool}\index{ThreadPool@{ThreadPool}}


{\ttfamily \#include $<$threadpool.\+h$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_thread_pool_a786db3b3e0aac5ca3e43c37025ab22b0}{Thread\+Pool}} (std\+::size\+\_\+t N=1)
\begin{DoxyCompactList}\small\item\em start \mbox{\hyperlink{namespace_n}{N}} threads in the thread pool. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_thread_pool_a44d3d2ab618970605e684efc216655eb}{$\sim$\+Thread\+Pool}} ()
\begin{DoxyCompactList}\small\item\em deletes the thread pool by finishing all threads \end{DoxyCompactList}\item 
{\footnotesize template$<$class F , class R  = std\+::result\+\_\+of\+\_\+t$<$\+F\&()$>$$>$ }\\std\+::future$<$ R $>$ \mbox{\hyperlink{class_thread_pool_abfd71afcc32aef51c03968c99dbc0e00}{queue}} (F \&\&\mbox{\hyperlink{libmscgen_2gd_8h_a26bd95fde4dbe225dd861231581fc268}{f}})
\item 
void \mbox{\hyperlink{class_thread_pool_a1fc76489de6e11c259ccf8f072fe135d}{finish}} ()
\item 
\mbox{\hyperlink{class_thread_pool_a786db3b3e0aac5ca3e43c37025ab22b0}{Thread\+Pool}} (std\+::size\+\_\+t N=1)
\begin{DoxyCompactList}\small\item\em start \mbox{\hyperlink{namespace_n}{N}} threads in the thread pool. \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_thread_pool_a44d3d2ab618970605e684efc216655eb}{$\sim$\+Thread\+Pool}} ()
\begin{DoxyCompactList}\small\item\em deletes the thread pool by finishing all threads \end{DoxyCompactList}\item 
{\footnotesize template$<$class F , class R  = std\+::result\+\_\+of\+\_\+t$<$\+F\&()$>$$>$ }\\std\+::future$<$ R $>$ \mbox{\hyperlink{class_thread_pool_abfd71afcc32aef51c03968c99dbc0e00}{queue}} (F \&\&\mbox{\hyperlink{libmscgen_2gd_8h_a26bd95fde4dbe225dd861231581fc268}{f}})
\item 
void \mbox{\hyperlink{class_thread_pool_a1fc76489de6e11c259ccf8f072fe135d}{finish}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename ... Args$>$ }\\void \mbox{\hyperlink{class_thread_pool_aa4eb9cb7a39f85ad28ff04175ba71eb7}{unused\+\_\+variable}} (Args \&\&...args)
\item 
void \mbox{\hyperlink{class_thread_pool_a630a5230a8d6a8ba5c11b88ccc91c32b}{thread\+Task}} ()
\item 
{\footnotesize template$<$typename ... Args$>$ }\\void \mbox{\hyperlink{class_thread_pool_aa4eb9cb7a39f85ad28ff04175ba71eb7}{unused\+\_\+variable}} (Args \&\&...args)
\item 
void \mbox{\hyperlink{class_thread_pool_a630a5230a8d6a8ba5c11b88ccc91c32b}{thread\+Task}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::mutex \mbox{\hyperlink{class_thread_pool_a8111098c66bef75793ca4f954c46b7c2}{m\+\_\+mutex}}
\item 
std\+::condition\+\_\+variable \mbox{\hyperlink{class_thread_pool_aea3e5ca7e471639fdd30c8bde0670616}{m\+\_\+cond}}
\item 
std\+::deque$<$ \mbox{\hyperlink{testing_2054__parblock_8cpp_a2dd0ac47f42a9994b91d34403be05fe9}{std\+::function}}$<$ void()$>$ $>$ \mbox{\hyperlink{class_thread_pool_a3cdc092adab6f35de2c9cfc6827668b6}{m\+\_\+work}}
\item 
\mbox{\hyperlink{liblodepng_2lodepng_8cpp_ac8c5476186a019b60cc8fd4cc6ea41a1}{std\+::vector}}$<$ std\+::future$<$ void $>$ $>$ \mbox{\hyperlink{class_thread_pool_acb4f2c10ee9b32191966527d5a4ba94a}{m\+\_\+finished}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\mbox{\hyperlink{class_class}{Class}} managing a pool of worker threads. Work can be queued by passing a function to \mbox{\hyperlink{class_thread_pool_abfd71afcc32aef51c03968c99dbc0e00}{queue()}}. \mbox{\hyperlink{class_a}{A}} future will be returned that can be used to obtain the result of the function after execution.

Usage example\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{class_thread_pool}{ThreadPool}} pool(10);}
\DoxyCodeLine{std::vector< std::future< int > > results;}
\DoxyCodeLine{\textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i=0;i<10;i++)}
\DoxyCodeLine{\{}
\DoxyCodeLine{  \textcolor{keyword}{auto} run = [](\textcolor{keywordtype}{int} i) \{ \textcolor{keywordflow}{return} i*i; \};}
\DoxyCodeLine{  results.emplace\_back(pool.queue(std::bind(run,i)));}
\DoxyCodeLine{\}}
\DoxyCodeLine{\textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \&\mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a26bd95fde4dbe225dd861231581fc268}{f}} : results)}
\DoxyCodeLine{\{}
\DoxyCodeLine{  printf(\textcolor{stringliteral}{"{}Result \%d:\(\backslash\)n"{}}, \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a26bd95fde4dbe225dd861231581fc268}{f}}.get());}
\DoxyCodeLine{\}}

\end{DoxyCode}
 

Definition at line \mbox{\hyperlink{build_2doxygen_2src_2threadpool_8h_source_l00047}{47}} of file \mbox{\hyperlink{build_2doxygen_2src_2threadpool_8h_source}{threadpool.\+h}}.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_thread_pool_a786db3b3e0aac5ca3e43c37025ab22b0}\label{class_thread_pool_a786db3b3e0aac5ca3e43c37025ab22b0}} 
\index{ThreadPool@{ThreadPool}!ThreadPool@{ThreadPool}}
\index{ThreadPool@{ThreadPool}!ThreadPool@{ThreadPool}}
\doxysubsubsection{\texorpdfstring{ThreadPool()}{ThreadPool()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily Thread\+Pool\+::\+Thread\+Pool (\begin{DoxyParamCaption}\item[{std\+::size\+\_\+t}]{N = {\ttfamily 1} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



start \mbox{\hyperlink{namespace_n}{N}} threads in the thread pool. 



Definition at line \mbox{\hyperlink{build_2doxygen_2src_2threadpool_8h_source_l00051}{51}} of file \mbox{\hyperlink{build_2doxygen_2src_2threadpool_8h_source}{threadpool.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00052     \{}
\DoxyCodeLine{00053       \textcolor{keywordflow}{for} (std::size\_t i = 0; i < \mbox{\hyperlink{namespace_n}{N}}; ++i)}
\DoxyCodeLine{00054       \{}
\DoxyCodeLine{00055         \textcolor{comment}{// each thread is a std::async running thread\_task():}}
\DoxyCodeLine{00056         \mbox{\hyperlink{class_thread_pool_acb4f2c10ee9b32191966527d5a4ba94a}{m\_finished}}.push\_back(}
\DoxyCodeLine{00057             std::async(}
\DoxyCodeLine{00058               std::launch::async,}
\DoxyCodeLine{00059               [\textcolor{keyword}{this}]\{ \mbox{\hyperlink{class_thread_pool_a630a5230a8d6a8ba5c11b88ccc91c32b}{threadTask}}(); \}}
\DoxyCodeLine{00060               )}
\DoxyCodeLine{00061             );}
\DoxyCodeLine{00062       \}}
\DoxyCodeLine{00063     \}}

\end{DoxyCode}


References \mbox{\hyperlink{class_thread_pool_acb4f2c10ee9b32191966527d5a4ba94a}{m\+\_\+finished}}, and \mbox{\hyperlink{class_thread_pool_a630a5230a8d6a8ba5c11b88ccc91c32b}{thread\+Task()}}.

\mbox{\Hypertarget{class_thread_pool_a44d3d2ab618970605e684efc216655eb}\label{class_thread_pool_a44d3d2ab618970605e684efc216655eb}} 
\index{ThreadPool@{ThreadPool}!````~ThreadPool@{$\sim$ThreadPool}}
\index{````~ThreadPool@{$\sim$ThreadPool}!ThreadPool@{ThreadPool}}
\doxysubsubsection{\texorpdfstring{$\sim$ThreadPool()}{~ThreadPool()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily Thread\+Pool\+::$\sim$\+Thread\+Pool (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



deletes the thread pool by finishing all threads 



Definition at line \mbox{\hyperlink{build_2doxygen_2src_2threadpool_8h_source_l00065}{65}} of file \mbox{\hyperlink{build_2doxygen_2src_2threadpool_8h_source}{threadpool.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00066     \{}
\DoxyCodeLine{00067       \mbox{\hyperlink{class_thread_pool_a1fc76489de6e11c259ccf8f072fe135d}{finish}}();}
\DoxyCodeLine{00068     \}}

\end{DoxyCode}


References \mbox{\hyperlink{class_thread_pool_a1fc76489de6e11c259ccf8f072fe135d}{finish()}}.

\mbox{\Hypertarget{class_thread_pool_a786db3b3e0aac5ca3e43c37025ab22b0}\label{class_thread_pool_a786db3b3e0aac5ca3e43c37025ab22b0}} 
\index{ThreadPool@{ThreadPool}!ThreadPool@{ThreadPool}}
\index{ThreadPool@{ThreadPool}!ThreadPool@{ThreadPool}}
\doxysubsubsection{\texorpdfstring{ThreadPool()}{ThreadPool()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily Thread\+Pool\+::\+Thread\+Pool (\begin{DoxyParamCaption}\item[{std\+::size\+\_\+t}]{N = {\ttfamily 1} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



start \mbox{\hyperlink{namespace_n}{N}} threads in the thread pool. 



Definition at line \mbox{\hyperlink{src_2threadpool_8h_source_l00051}{51}} of file \mbox{\hyperlink{src_2threadpool_8h_source}{threadpool.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00052     \{}
\DoxyCodeLine{00053       \textcolor{keywordflow}{for} (std::size\_t i = 0; i < \mbox{\hyperlink{namespace_n}{N}}; ++i)}
\DoxyCodeLine{00054       \{}
\DoxyCodeLine{00055         \textcolor{comment}{// each thread is a std::async running thread\_task():}}
\DoxyCodeLine{00056         \mbox{\hyperlink{class_thread_pool_acb4f2c10ee9b32191966527d5a4ba94a}{m\_finished}}.push\_back(}
\DoxyCodeLine{00057             std::async(}
\DoxyCodeLine{00058               std::launch::async,}
\DoxyCodeLine{00059               [\textcolor{keyword}{this}]\{ \mbox{\hyperlink{class_thread_pool_a630a5230a8d6a8ba5c11b88ccc91c32b}{threadTask}}(); \}}
\DoxyCodeLine{00060               )}
\DoxyCodeLine{00061             );}
\DoxyCodeLine{00062       \}}
\DoxyCodeLine{00063     \}}

\end{DoxyCode}


References \mbox{\hyperlink{class_thread_pool_acb4f2c10ee9b32191966527d5a4ba94a}{m\+\_\+finished}}, and \mbox{\hyperlink{class_thread_pool_a630a5230a8d6a8ba5c11b88ccc91c32b}{thread\+Task()}}.

\mbox{\Hypertarget{class_thread_pool_a44d3d2ab618970605e684efc216655eb}\label{class_thread_pool_a44d3d2ab618970605e684efc216655eb}} 
\index{ThreadPool@{ThreadPool}!````~ThreadPool@{$\sim$ThreadPool}}
\index{````~ThreadPool@{$\sim$ThreadPool}!ThreadPool@{ThreadPool}}
\doxysubsubsection{\texorpdfstring{$\sim$ThreadPool()}{~ThreadPool()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily Thread\+Pool\+::$\sim$\+Thread\+Pool (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



deletes the thread pool by finishing all threads 



Definition at line \mbox{\hyperlink{src_2threadpool_8h_source_l00065}{65}} of file \mbox{\hyperlink{src_2threadpool_8h_source}{threadpool.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00066     \{}
\DoxyCodeLine{00067       \mbox{\hyperlink{class_thread_pool_a1fc76489de6e11c259ccf8f072fe135d}{finish}}();}
\DoxyCodeLine{00068     \}}

\end{DoxyCode}


References \mbox{\hyperlink{class_thread_pool_a1fc76489de6e11c259ccf8f072fe135d}{finish()}}.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_thread_pool_a1fc76489de6e11c259ccf8f072fe135d}\label{class_thread_pool_a1fc76489de6e11c259ccf8f072fe135d}} 
\index{ThreadPool@{ThreadPool}!finish@{finish}}
\index{finish@{finish}!ThreadPool@{ThreadPool}}
\doxysubsubsection{\texorpdfstring{finish()}{finish()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Thread\+Pool\+::finish (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

finish enques a \char`\"{}stop the thread\char`\"{} message for every thread, then waits for them to finish 

Definition at line \mbox{\hyperlink{build_2doxygen_2src_2threadpool_8h_source_l00095}{95}} of file \mbox{\hyperlink{build_2doxygen_2src_2threadpool_8h_source}{threadpool.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00096     \{}
\DoxyCodeLine{00097       \{}
\DoxyCodeLine{00098         std::unique\_lock<std::mutex> l(\mbox{\hyperlink{class_thread_pool_a8111098c66bef75793ca4f954c46b7c2}{m\_mutex}});}
\DoxyCodeLine{00099         \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}\&\& u : \mbox{\hyperlink{class_thread_pool_acb4f2c10ee9b32191966527d5a4ba94a}{m\_finished}})}
\DoxyCodeLine{00100         \{}
\DoxyCodeLine{00101           \mbox{\hyperlink{class_thread_pool_aa4eb9cb7a39f85ad28ff04175ba71eb7}{unused\_variable}}(u);}
\DoxyCodeLine{00102           \mbox{\hyperlink{class_thread_pool_a3cdc092adab6f35de2c9cfc6827668b6}{m\_work}}.push\_back(\{\}); \textcolor{comment}{// insert empty function object to signal abort}}
\DoxyCodeLine{00103         \}}
\DoxyCodeLine{00104       \}}
\DoxyCodeLine{00105       \mbox{\hyperlink{class_thread_pool_aea3e5ca7e471639fdd30c8bde0670616}{m\_cond}}.notify\_all();}
\DoxyCodeLine{00106       \mbox{\hyperlink{class_thread_pool_acb4f2c10ee9b32191966527d5a4ba94a}{m\_finished}}.clear();}
\DoxyCodeLine{00107     \}}

\end{DoxyCode}


References \mbox{\hyperlink{class_thread_pool_aea3e5ca7e471639fdd30c8bde0670616}{m\+\_\+cond}}, \mbox{\hyperlink{class_thread_pool_acb4f2c10ee9b32191966527d5a4ba94a}{m\+\_\+finished}}, \mbox{\hyperlink{class_thread_pool_a8111098c66bef75793ca4f954c46b7c2}{m\+\_\+mutex}}, \mbox{\hyperlink{class_thread_pool_a3cdc092adab6f35de2c9cfc6827668b6}{m\+\_\+work}}, and \mbox{\hyperlink{class_thread_pool_aa4eb9cb7a39f85ad28ff04175ba71eb7}{unused\+\_\+variable()}}.



Referenced by \mbox{\hyperlink{class_thread_pool_a44d3d2ab618970605e684efc216655eb}{$\sim$\+Thread\+Pool()}}.

\mbox{\Hypertarget{class_thread_pool_a1fc76489de6e11c259ccf8f072fe135d}\label{class_thread_pool_a1fc76489de6e11c259ccf8f072fe135d}} 
\index{ThreadPool@{ThreadPool}!finish@{finish}}
\index{finish@{finish}!ThreadPool@{ThreadPool}}
\doxysubsubsection{\texorpdfstring{finish()}{finish()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Thread\+Pool\+::finish (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

finish enques a \char`\"{}stop the thread\char`\"{} message for every thread, then waits for them to finish 

Definition at line \mbox{\hyperlink{src_2threadpool_8h_source_l00095}{95}} of file \mbox{\hyperlink{src_2threadpool_8h_source}{threadpool.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00096     \{}
\DoxyCodeLine{00097       \{}
\DoxyCodeLine{00098         std::unique\_lock<std::mutex> l(\mbox{\hyperlink{class_thread_pool_a8111098c66bef75793ca4f954c46b7c2}{m\_mutex}});}
\DoxyCodeLine{00099         \textcolor{keywordflow}{for}(\textcolor{keyword}{auto}\&\& u : \mbox{\hyperlink{class_thread_pool_acb4f2c10ee9b32191966527d5a4ba94a}{m\_finished}})}
\DoxyCodeLine{00100         \{}
\DoxyCodeLine{00101           \mbox{\hyperlink{class_thread_pool_aa4eb9cb7a39f85ad28ff04175ba71eb7}{unused\_variable}}(u);}
\DoxyCodeLine{00102           \mbox{\hyperlink{class_thread_pool_a3cdc092adab6f35de2c9cfc6827668b6}{m\_work}}.push\_back(\{\}); \textcolor{comment}{// insert empty function object to signal abort}}
\DoxyCodeLine{00103         \}}
\DoxyCodeLine{00104       \}}
\DoxyCodeLine{00105       \mbox{\hyperlink{class_thread_pool_aea3e5ca7e471639fdd30c8bde0670616}{m\_cond}}.notify\_all();}
\DoxyCodeLine{00106       \mbox{\hyperlink{class_thread_pool_acb4f2c10ee9b32191966527d5a4ba94a}{m\_finished}}.clear();}
\DoxyCodeLine{00107     \}}

\end{DoxyCode}


References \mbox{\hyperlink{class_thread_pool_aea3e5ca7e471639fdd30c8bde0670616}{m\+\_\+cond}}, \mbox{\hyperlink{class_thread_pool_acb4f2c10ee9b32191966527d5a4ba94a}{m\+\_\+finished}}, \mbox{\hyperlink{class_thread_pool_a8111098c66bef75793ca4f954c46b7c2}{m\+\_\+mutex}}, \mbox{\hyperlink{class_thread_pool_a3cdc092adab6f35de2c9cfc6827668b6}{m\+\_\+work}}, and \mbox{\hyperlink{class_thread_pool_aa4eb9cb7a39f85ad28ff04175ba71eb7}{unused\+\_\+variable()}}.

\mbox{\Hypertarget{class_thread_pool_abfd71afcc32aef51c03968c99dbc0e00}\label{class_thread_pool_abfd71afcc32aef51c03968c99dbc0e00}} 
\index{ThreadPool@{ThreadPool}!queue@{queue}}
\index{queue@{queue}!ThreadPool@{ThreadPool}}
\doxysubsubsection{\texorpdfstring{queue()}{queue()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$class F , class R  = std\+::result\+\_\+of\+\_\+t$<$\+F\&()$>$$>$ \\
std\+::future$<$ R $>$ Thread\+Pool\+::queue (\begin{DoxyParamCaption}\item[{F \&\&}]{f }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Queue the callable function {\itshape f} for the threads to execute. \mbox{\hyperlink{class_a}{A}} future of the return type of the function is returned to capture the result. 

Definition at line \mbox{\hyperlink{build_2doxygen_2src_2threadpool_8h_source_l00073}{73}} of file \mbox{\hyperlink{build_2doxygen_2src_2threadpool_8h_source}{threadpool.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00074     \{}
\DoxyCodeLine{00075       \textcolor{comment}{// We wrap the function object into a packaged task, splitting}}
\DoxyCodeLine{00076       \textcolor{comment}{// execution from the return value.}}
\DoxyCodeLine{00077       \textcolor{comment}{// Since the packaged\_task object is not copyable, we create it on the heap}}
\DoxyCodeLine{00078       \textcolor{comment}{// and capture it via a shared pointer in a lambda and then assign that lambda}}
\DoxyCodeLine{00079       \textcolor{comment}{// to a std::function.}}
\DoxyCodeLine{00080       \textcolor{keyword}{auto} ptr = std::make\_shared< std::packaged\_task<R()> >(std::forward<F>(\mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a26bd95fde4dbe225dd861231581fc268}{f}}));}
\DoxyCodeLine{00081       \textcolor{keyword}{auto} taskFunc = [ptr]() \{ \textcolor{keywordflow}{if} (ptr-\/>valid()) (*ptr)(); \};}
\DoxyCodeLine{00082 }
\DoxyCodeLine{00083       \textcolor{keyword}{auto} \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_acab531abaa74a7e664e3986f2522b33a}{r}}=ptr-\/>get\_future(); \textcolor{comment}{// get the return value before we hand off the task}}
\DoxyCodeLine{00084       \{}
\DoxyCodeLine{00085         std::unique\_lock<std::mutex> l(\mbox{\hyperlink{class_thread_pool_a8111098c66bef75793ca4f954c46b7c2}{m\_mutex}});}
\DoxyCodeLine{00086         \mbox{\hyperlink{class_thread_pool_a3cdc092adab6f35de2c9cfc6827668b6}{m\_work}}.emplace\_back(taskFunc);}
\DoxyCodeLine{00087         \mbox{\hyperlink{class_thread_pool_aea3e5ca7e471639fdd30c8bde0670616}{m\_cond}}.notify\_one(); \textcolor{comment}{// wake a thread to work on the task}}
\DoxyCodeLine{00088       \}}
\DoxyCodeLine{00089 }
\DoxyCodeLine{00090       \textcolor{keywordflow}{return} \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_acab531abaa74a7e664e3986f2522b33a}{r}}; \textcolor{comment}{// return the future result of the task}}
\DoxyCodeLine{00091     \}}

\end{DoxyCode}


References \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a26bd95fde4dbe225dd861231581fc268}{f}}, \mbox{\hyperlink{class_thread_pool_aea3e5ca7e471639fdd30c8bde0670616}{m\+\_\+cond}}, \mbox{\hyperlink{class_thread_pool_a8111098c66bef75793ca4f954c46b7c2}{m\+\_\+mutex}}, \mbox{\hyperlink{class_thread_pool_a3cdc092adab6f35de2c9cfc6827668b6}{m\+\_\+work}}, and \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_acab531abaa74a7e664e3986f2522b33a}{r}}.



Referenced by \mbox{\hyperlink{build_2doxygen_2src_2doxygen_8cpp_adc2cc0c0248747e3608de552a9947cfb}{compute\+Tooltip\+Texts()}}, \mbox{\hyperlink{build_2doxygen_2src_2doxygen_8cpp_a0cb7d6c9c783e1376142dbe33d01f821}{generate\+Docs\+For\+Class\+List()}}, \mbox{\hyperlink{build_2doxygen_2src_2doxygen_8cpp_a57a6bc5421d2bc55208fa100ee7d4a0b}{generate\+File\+Docs()}}, \mbox{\hyperlink{build_2doxygen_2src_2doxygen_8cpp_a6d0fb628b1fc96844bb2836317a3ce5a}{generate\+File\+Sources()}}, \mbox{\hyperlink{build_2doxygen_2src_2doxygen_8cpp_a61b713e61e238a458b7a64ef221973a4}{generate\+Namespace\+Class\+Docs()}}, and \mbox{\hyperlink{build_2doxygen_2src_2doxygen_8cpp_af69cff788100ddb682f88658018d3969}{parse\+Files\+Multi\+Threading()}}.

\mbox{\Hypertarget{class_thread_pool_abfd71afcc32aef51c03968c99dbc0e00}\label{class_thread_pool_abfd71afcc32aef51c03968c99dbc0e00}} 
\index{ThreadPool@{ThreadPool}!queue@{queue}}
\index{queue@{queue}!ThreadPool@{ThreadPool}}
\doxysubsubsection{\texorpdfstring{queue()}{queue()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$class F , class R  = std\+::result\+\_\+of\+\_\+t$<$\+F\&()$>$$>$ \\
std\+::future$<$ R $>$ Thread\+Pool\+::queue (\begin{DoxyParamCaption}\item[{F \&\&}]{f }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}

Queue the callable function {\itshape f} for the threads to execute. \mbox{\hyperlink{class_a}{A}} future of the return type of the function is returned to capture the result. 

Definition at line \mbox{\hyperlink{src_2threadpool_8h_source_l00073}{73}} of file \mbox{\hyperlink{src_2threadpool_8h_source}{threadpool.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00074     \{}
\DoxyCodeLine{00075       \textcolor{comment}{// We wrap the function object into a packaged task, splitting}}
\DoxyCodeLine{00076       \textcolor{comment}{// execution from the return value.}}
\DoxyCodeLine{00077       \textcolor{comment}{// Since the packaged\_task object is not copyable, we create it on the heap}}
\DoxyCodeLine{00078       \textcolor{comment}{// and capture it via a shared pointer in a lambda and then assign that lambda}}
\DoxyCodeLine{00079       \textcolor{comment}{// to a std::function.}}
\DoxyCodeLine{00080       \textcolor{keyword}{auto} ptr = std::make\_shared< std::packaged\_task<R()> >(std::forward<F>(\mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a26bd95fde4dbe225dd861231581fc268}{f}}));}
\DoxyCodeLine{00081       \textcolor{keyword}{auto} taskFunc = [ptr]() \{ \textcolor{keywordflow}{if} (ptr-\/>valid()) (*ptr)(); \};}
\DoxyCodeLine{00082 }
\DoxyCodeLine{00083       \textcolor{keyword}{auto} \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_acab531abaa74a7e664e3986f2522b33a}{r}}=ptr-\/>get\_future(); \textcolor{comment}{// get the return value before we hand off the task}}
\DoxyCodeLine{00084       \{}
\DoxyCodeLine{00085         std::unique\_lock<std::mutex> l(\mbox{\hyperlink{class_thread_pool_a8111098c66bef75793ca4f954c46b7c2}{m\_mutex}});}
\DoxyCodeLine{00086         \mbox{\hyperlink{class_thread_pool_a3cdc092adab6f35de2c9cfc6827668b6}{m\_work}}.emplace\_back(taskFunc);}
\DoxyCodeLine{00087         \mbox{\hyperlink{class_thread_pool_aea3e5ca7e471639fdd30c8bde0670616}{m\_cond}}.notify\_one(); \textcolor{comment}{// wake a thread to work on the task}}
\DoxyCodeLine{00088       \}}
\DoxyCodeLine{00089 }
\DoxyCodeLine{00090       \textcolor{keywordflow}{return} \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_acab531abaa74a7e664e3986f2522b33a}{r}}; \textcolor{comment}{// return the future result of the task}}
\DoxyCodeLine{00091     \}}

\end{DoxyCode}


References \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a26bd95fde4dbe225dd861231581fc268}{f}}, \mbox{\hyperlink{class_thread_pool_aea3e5ca7e471639fdd30c8bde0670616}{m\+\_\+cond}}, \mbox{\hyperlink{class_thread_pool_a8111098c66bef75793ca4f954c46b7c2}{m\+\_\+mutex}}, \mbox{\hyperlink{class_thread_pool_a3cdc092adab6f35de2c9cfc6827668b6}{m\+\_\+work}}, and \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_acab531abaa74a7e664e3986f2522b33a}{r}}.

\mbox{\Hypertarget{class_thread_pool_a630a5230a8d6a8ba5c11b88ccc91c32b}\label{class_thread_pool_a630a5230a8d6a8ba5c11b88ccc91c32b}} 
\index{ThreadPool@{ThreadPool}!threadTask@{threadTask}}
\index{threadTask@{threadTask}!ThreadPool@{ThreadPool}}
\doxysubsubsection{\texorpdfstring{threadTask()}{threadTask()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Thread\+Pool\+::thread\+Task (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line \mbox{\hyperlink{build_2doxygen_2src_2threadpool_8h_source_l00115}{115}} of file \mbox{\hyperlink{build_2doxygen_2src_2threadpool_8h_source}{threadpool.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00116     \{}
\DoxyCodeLine{00117       \textcolor{keywordflow}{while}(\textcolor{keyword}{true})}
\DoxyCodeLine{00118       \{}
\DoxyCodeLine{00119         \textcolor{comment}{// pop a task off the queue:}}
\DoxyCodeLine{00120         \mbox{\hyperlink{build_2doxygen_2testing_2054__parblock_8cpp_a2dd0ac47f42a9994b91d34403be05fe9}{std::function}}<void()> \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a26bd95fde4dbe225dd861231581fc268}{f}};}
\DoxyCodeLine{00121         \{}
\DoxyCodeLine{00122           \textcolor{comment}{// usual thread-\/safe queue code:}}
\DoxyCodeLine{00123           std::unique\_lock<std::mutex> l(\mbox{\hyperlink{class_thread_pool_a8111098c66bef75793ca4f954c46b7c2}{m\_mutex}});}
\DoxyCodeLine{00124           \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_thread_pool_a3cdc092adab6f35de2c9cfc6827668b6}{m\_work}}.empty())}
\DoxyCodeLine{00125           \{}
\DoxyCodeLine{00126             \mbox{\hyperlink{class_thread_pool_aea3e5ca7e471639fdd30c8bde0670616}{m\_cond}}.wait(l,[\&]\{\textcolor{keywordflow}{return} !\mbox{\hyperlink{class_thread_pool_a3cdc092adab6f35de2c9cfc6827668b6}{m\_work}}.empty();\});}
\DoxyCodeLine{00127           \}}
\DoxyCodeLine{00128           \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a26bd95fde4dbe225dd861231581fc268}{f}} = std::move(\mbox{\hyperlink{class_thread_pool_a3cdc092adab6f35de2c9cfc6827668b6}{m\_work}}.front());}
\DoxyCodeLine{00129           \mbox{\hyperlink{class_thread_pool_a3cdc092adab6f35de2c9cfc6827668b6}{m\_work}}.pop\_front();}
\DoxyCodeLine{00130         \}}
\DoxyCodeLine{00131         \textcolor{comment}{// if the function is empty, it means we are asked to abort}}
\DoxyCodeLine{00132         \textcolor{keywordflow}{if} (!\mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a26bd95fde4dbe225dd861231581fc268}{f}}) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00133         \textcolor{comment}{// run the task}}
\DoxyCodeLine{00134         \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a26bd95fde4dbe225dd861231581fc268}{f}}();}
\DoxyCodeLine{00135       \}}
\DoxyCodeLine{00136     \}}

\end{DoxyCode}


References \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a26bd95fde4dbe225dd861231581fc268}{f}}, \mbox{\hyperlink{build_2doxygen_2testing_2054__parblock_8cpp_a2dd0ac47f42a9994b91d34403be05fe9}{function()}}, \mbox{\hyperlink{class_thread_pool_aea3e5ca7e471639fdd30c8bde0670616}{m\+\_\+cond}}, \mbox{\hyperlink{class_thread_pool_a8111098c66bef75793ca4f954c46b7c2}{m\+\_\+mutex}}, and \mbox{\hyperlink{class_thread_pool_a3cdc092adab6f35de2c9cfc6827668b6}{m\+\_\+work}}.



Referenced by \mbox{\hyperlink{class_thread_pool_a786db3b3e0aac5ca3e43c37025ab22b0}{Thread\+Pool()}}.

\mbox{\Hypertarget{class_thread_pool_a630a5230a8d6a8ba5c11b88ccc91c32b}\label{class_thread_pool_a630a5230a8d6a8ba5c11b88ccc91c32b}} 
\index{ThreadPool@{ThreadPool}!threadTask@{threadTask}}
\index{threadTask@{threadTask}!ThreadPool@{ThreadPool}}
\doxysubsubsection{\texorpdfstring{threadTask()}{threadTask()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Thread\+Pool\+::thread\+Task (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line \mbox{\hyperlink{src_2threadpool_8h_source_l00115}{115}} of file \mbox{\hyperlink{src_2threadpool_8h_source}{threadpool.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00116     \{}
\DoxyCodeLine{00117       \textcolor{keywordflow}{while}(\textcolor{keyword}{true})}
\DoxyCodeLine{00118       \{}
\DoxyCodeLine{00119         \textcolor{comment}{// pop a task off the queue:}}
\DoxyCodeLine{00120         \mbox{\hyperlink{build_2doxygen_2testing_2054__parblock_8cpp_a2dd0ac47f42a9994b91d34403be05fe9}{std::function}}<void()> \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a26bd95fde4dbe225dd861231581fc268}{f}};}
\DoxyCodeLine{00121         \{}
\DoxyCodeLine{00122           \textcolor{comment}{// usual thread-\/safe queue code:}}
\DoxyCodeLine{00123           std::unique\_lock<std::mutex> l(\mbox{\hyperlink{class_thread_pool_a8111098c66bef75793ca4f954c46b7c2}{m\_mutex}});}
\DoxyCodeLine{00124           \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_thread_pool_a3cdc092adab6f35de2c9cfc6827668b6}{m\_work}}.empty())}
\DoxyCodeLine{00125           \{}
\DoxyCodeLine{00126             \mbox{\hyperlink{class_thread_pool_aea3e5ca7e471639fdd30c8bde0670616}{m\_cond}}.wait(l,[\&]\{\textcolor{keywordflow}{return} !\mbox{\hyperlink{class_thread_pool_a3cdc092adab6f35de2c9cfc6827668b6}{m\_work}}.empty();\});}
\DoxyCodeLine{00127           \}}
\DoxyCodeLine{00128           \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a26bd95fde4dbe225dd861231581fc268}{f}} = std::move(\mbox{\hyperlink{class_thread_pool_a3cdc092adab6f35de2c9cfc6827668b6}{m\_work}}.front());}
\DoxyCodeLine{00129           \mbox{\hyperlink{class_thread_pool_a3cdc092adab6f35de2c9cfc6827668b6}{m\_work}}.pop\_front();}
\DoxyCodeLine{00130         \}}
\DoxyCodeLine{00131         \textcolor{comment}{// if the function is empty, it means we are asked to abort}}
\DoxyCodeLine{00132         \textcolor{keywordflow}{if} (!\mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a26bd95fde4dbe225dd861231581fc268}{f}}) \textcolor{keywordflow}{return};}
\DoxyCodeLine{00133         \textcolor{comment}{// run the task}}
\DoxyCodeLine{00134         \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a26bd95fde4dbe225dd861231581fc268}{f}}();}
\DoxyCodeLine{00135       \}}
\DoxyCodeLine{00136     \}}

\end{DoxyCode}


References \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a26bd95fde4dbe225dd861231581fc268}{f}}, \mbox{\hyperlink{build_2doxygen_2testing_2054__parblock_8cpp_a2dd0ac47f42a9994b91d34403be05fe9}{function()}}, \mbox{\hyperlink{class_thread_pool_aea3e5ca7e471639fdd30c8bde0670616}{m\+\_\+cond}}, \mbox{\hyperlink{class_thread_pool_a8111098c66bef75793ca4f954c46b7c2}{m\+\_\+mutex}}, and \mbox{\hyperlink{class_thread_pool_a3cdc092adab6f35de2c9cfc6827668b6}{m\+\_\+work}}.

\mbox{\Hypertarget{class_thread_pool_aa4eb9cb7a39f85ad28ff04175ba71eb7}\label{class_thread_pool_aa4eb9cb7a39f85ad28ff04175ba71eb7}} 
\index{ThreadPool@{ThreadPool}!unused\_variable@{unused\_variable}}
\index{unused\_variable@{unused\_variable}!ThreadPool@{ThreadPool}}
\doxysubsubsection{\texorpdfstring{unused\_variable()}{unused\_variable()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily template$<$typename ... Args$>$ \\
void Thread\+Pool\+::unused\+\_\+variable (\begin{DoxyParamCaption}\item[{Args \&\&...}]{args }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line \mbox{\hyperlink{build_2doxygen_2src_2threadpool_8h_source_l00112}{112}} of file \mbox{\hyperlink{build_2doxygen_2src_2threadpool_8h_source}{threadpool.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00112 \{ (void)(\textcolor{keyword}{sizeof}...(args)); \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{class_thread_pool_a1fc76489de6e11c259ccf8f072fe135d}{finish()}}.

\mbox{\Hypertarget{class_thread_pool_aa4eb9cb7a39f85ad28ff04175ba71eb7}\label{class_thread_pool_aa4eb9cb7a39f85ad28ff04175ba71eb7}} 
\index{ThreadPool@{ThreadPool}!unused\_variable@{unused\_variable}}
\index{unused\_variable@{unused\_variable}!ThreadPool@{ThreadPool}}
\doxysubsubsection{\texorpdfstring{unused\_variable()}{unused\_variable()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily template$<$typename ... Args$>$ \\
void Thread\+Pool\+::unused\+\_\+variable (\begin{DoxyParamCaption}\item[{Args \&\&...}]{args }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



Definition at line \mbox{\hyperlink{src_2threadpool_8h_source_l00112}{112}} of file \mbox{\hyperlink{src_2threadpool_8h_source}{threadpool.\+h}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00112 \{ (void)(\textcolor{keyword}{sizeof}...(args)); \}}

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{class_thread_pool_aea3e5ca7e471639fdd30c8bde0670616}\label{class_thread_pool_aea3e5ca7e471639fdd30c8bde0670616}} 
\index{ThreadPool@{ThreadPool}!m\_cond@{m\_cond}}
\index{m\_cond@{m\_cond}!ThreadPool@{ThreadPool}}
\doxysubsubsection{\texorpdfstring{m\_cond}{m\_cond}}
{\footnotesize\ttfamily std\+::condition\+\_\+variable Thread\+Pool\+::m\+\_\+cond\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{build_2doxygen_2src_2threadpool_8h_source_l00141}{141}} of file \mbox{\hyperlink{build_2doxygen_2src_2threadpool_8h_source}{threadpool.\+h}}.



Referenced by \mbox{\hyperlink{class_thread_pool_a1fc76489de6e11c259ccf8f072fe135d}{finish()}}, \mbox{\hyperlink{class_thread_pool_abfd71afcc32aef51c03968c99dbc0e00}{queue()}}, and \mbox{\hyperlink{class_thread_pool_a630a5230a8d6a8ba5c11b88ccc91c32b}{thread\+Task()}}.

\mbox{\Hypertarget{class_thread_pool_acb4f2c10ee9b32191966527d5a4ba94a}\label{class_thread_pool_acb4f2c10ee9b32191966527d5a4ba94a}} 
\index{ThreadPool@{ThreadPool}!m\_finished@{m\_finished}}
\index{m\_finished@{m\_finished}!ThreadPool@{ThreadPool}}
\doxysubsubsection{\texorpdfstring{m\_finished}{m\_finished}}
{\footnotesize\ttfamily \mbox{\hyperlink{liblodepng_2lodepng_8cpp_ac8c5476186a019b60cc8fd4cc6ea41a1}{std\+::vector}}$<$ std\+::future$<$ void $>$ $>$ Thread\+Pool\+::m\+\_\+finished\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{build_2doxygen_2src_2threadpool_8h_source_l00147}{147}} of file \mbox{\hyperlink{build_2doxygen_2src_2threadpool_8h_source}{threadpool.\+h}}.



Referenced by \mbox{\hyperlink{class_thread_pool_a1fc76489de6e11c259ccf8f072fe135d}{finish()}}, and \mbox{\hyperlink{class_thread_pool_a786db3b3e0aac5ca3e43c37025ab22b0}{Thread\+Pool()}}.

\mbox{\Hypertarget{class_thread_pool_a8111098c66bef75793ca4f954c46b7c2}\label{class_thread_pool_a8111098c66bef75793ca4f954c46b7c2}} 
\index{ThreadPool@{ThreadPool}!m\_mutex@{m\_mutex}}
\index{m\_mutex@{m\_mutex}!ThreadPool@{ThreadPool}}
\doxysubsubsection{\texorpdfstring{m\_mutex}{m\_mutex}}
{\footnotesize\ttfamily std\+::mutex Thread\+Pool\+::m\+\_\+mutex\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{build_2doxygen_2src_2threadpool_8h_source_l00140}{140}} of file \mbox{\hyperlink{build_2doxygen_2src_2threadpool_8h_source}{threadpool.\+h}}.



Referenced by \mbox{\hyperlink{class_thread_pool_a1fc76489de6e11c259ccf8f072fe135d}{finish()}}, \mbox{\hyperlink{class_thread_pool_abfd71afcc32aef51c03968c99dbc0e00}{queue()}}, and \mbox{\hyperlink{class_thread_pool_a630a5230a8d6a8ba5c11b88ccc91c32b}{thread\+Task()}}.

\mbox{\Hypertarget{class_thread_pool_a3cdc092adab6f35de2c9cfc6827668b6}\label{class_thread_pool_a3cdc092adab6f35de2c9cfc6827668b6}} 
\index{ThreadPool@{ThreadPool}!m\_work@{m\_work}}
\index{m\_work@{m\_work}!ThreadPool@{ThreadPool}}
\doxysubsubsection{\texorpdfstring{m\_work}{m\_work}}
{\footnotesize\ttfamily std\+::deque$<$ \mbox{\hyperlink{testing_2054__parblock_8cpp_a2dd0ac47f42a9994b91d34403be05fe9}{std\+::function}}$<$ void()$>$ $>$ Thread\+Pool\+::m\+\_\+work\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{build_2doxygen_2src_2threadpool_8h_source_l00144}{144}} of file \mbox{\hyperlink{build_2doxygen_2src_2threadpool_8h_source}{threadpool.\+h}}.



Referenced by \mbox{\hyperlink{class_thread_pool_a1fc76489de6e11c259ccf8f072fe135d}{finish()}}, \mbox{\hyperlink{class_thread_pool_abfd71afcc32aef51c03968c99dbc0e00}{queue()}}, and \mbox{\hyperlink{class_thread_pool_a630a5230a8d6a8ba5c11b88ccc91c32b}{thread\+Task()}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
doxygen/build/doxygen/src/\mbox{\hyperlink{build_2doxygen_2src_2threadpool_8h}{threadpool.\+h}}\item 
doxygen/src/\mbox{\hyperlink{src_2threadpool_8h}{threadpool.\+h}}\end{DoxyCompactItemize}
