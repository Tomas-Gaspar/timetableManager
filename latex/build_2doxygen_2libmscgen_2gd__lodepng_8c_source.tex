\hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source}{}\doxysection{gd\+\_\+lodepng.\+c}
\label{build_2doxygen_2libmscgen_2gd__lodepng_8c_source}\index{doxygen/build/doxygen/libmscgen/gd\_lodepng.c@{doxygen/build/doxygen/libmscgen/gd\_lodepng.c}}
\mbox{\hyperlink{build_2doxygen_2libmscgen_2gd__lodepng_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00001}00001 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{libmscgen_2gd_8h}{gd.h}}"{}}}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00002}00002 \textcolor{preprocessor}{\#include "{}lodepng.h"{}}}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00003}00003 }
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00004}\mbox{\hyperlink{build_2doxygen_2libmscgen_2gd__lodepng_8c_a90662a8202ea56741002e364c3f9d771}{00004}} \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd__lodepng_8c_a90662a8202ea56741002e364c3f9d771}{BGD\_DECLARE}}(\textcolor{keywordtype}{void}) gdImagePng (\mbox{\hyperlink{structgd_image_struct}{gdImagePtr}} im, FILE * \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a9af8a34a1d63fa9ed984b7cdd97daee1}{outFile}})}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00005}00005 \{}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00006}00006   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *buffer;}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00007}00007   \textcolor{keywordtype}{size\_t} bufferSize;}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00008}00008   \textcolor{keywordtype}{int} **ptpixels = im-\/>\mbox{\hyperlink{structgd_image_struct_a558bc5437f32ab626088b9bf5ec8c6f1}{tpixels}};}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00009}00009   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *pixelBuffer = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *)malloc(3*im-\/>\mbox{\hyperlink{structgd_image_struct_ad20ac3fc24af0eece29dc69ad7137161}{sx}}*im-\/>\mbox{\hyperlink{structgd_image_struct_a9e20b782d97fb6f571ab4b578962060e}{sy}});}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00010}00010   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *pOut = pixelBuffer;}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00011}00011   \textcolor{keywordtype}{int} \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a6150e0515f7202e2fb518f7206ed97dc}{x}},\mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_af1202c02b14870c18fb3a1da73e9e7c7}{y}};}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00012}00012   \textcolor{keywordflow}{for} (\mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_af1202c02b14870c18fb3a1da73e9e7c7}{y}}=0;\mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_af1202c02b14870c18fb3a1da73e9e7c7}{y}}<im-\/>\mbox{\hyperlink{structgd_image_struct_a9e20b782d97fb6f571ab4b578962060e}{sy}};\mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_af1202c02b14870c18fb3a1da73e9e7c7}{y}}++)}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00013}00013   \{}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00014}00014     \textcolor{keywordtype}{int} *pThisRow = *ptpixels++;}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00015}00015     \textcolor{keywordflow}{for} (\mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a6150e0515f7202e2fb518f7206ed97dc}{x}}=0;\mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a6150e0515f7202e2fb518f7206ed97dc}{x}}<im-\/>\mbox{\hyperlink{structgd_image_struct_ad20ac3fc24af0eece29dc69ad7137161}{sx}};\mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a6150e0515f7202e2fb518f7206ed97dc}{x}}++)}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00016}00016     \{}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00017}00017       \textcolor{keywordtype}{int} thisPixel = *pThisRow++;}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00018}00018       *pOut++ = \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a7ce23cb6f7d788d55dd3076908a97c34}{gdTrueColorGetRed}}(thisPixel);}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00019}00019       *pOut++ = \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a2e632a88e2d78f17c67cd4addb04e18d}{gdTrueColorGetGreen}}(thisPixel);}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00020}00020       *pOut++ = \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a03f7656bd0d5e8c160ff840f6f77a641}{gdTrueColorGetBlue}}(thisPixel);}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00021}00021     \}}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00022}00022   \}}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00023}00023   \textcolor{comment}{// TODO: convert ptPixels into pixelBuffer...}}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00024}00024   \mbox{\hyperlink{struct_lode_p_n_g___encoder}{LodePNG\_Encoder}} encoder;}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00025}00025   \mbox{\hyperlink{build_2doxygen_2liblodepng_2lodepng_8cpp_a187956c5e5784f77f5b17181310be304}{LodePNG\_Encoder\_init}}(\&encoder);}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00026}00026   encoder.\mbox{\hyperlink{struct_lode_p_n_g___encoder_a5c4bc6d9be898fbcc14b5d762d69457e}{infoPng}}.\mbox{\hyperlink{struct_lode_p_n_g___info_png_acce58518f72f42ba94db4c1cfd69336b}{color}}.\mbox{\hyperlink{struct_lode_p_n_g___info_color_a4ed18d179c5078137a18e742b1c41a00}{colorType}} = 2; \textcolor{comment}{// 2=RGB 24 bit}}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00027}00027   encoder.\mbox{\hyperlink{struct_lode_p_n_g___encoder_af37ca9b0bcecd5d1d68756fd293ab998}{infoRaw}}.\mbox{\hyperlink{struct_lode_p_n_g___info_raw_ae9fa1c020358980be41f861ab71589fb}{color}}.\mbox{\hyperlink{struct_lode_p_n_g___info_color_a4ed18d179c5078137a18e742b1c41a00}{colorType}} = 2; \textcolor{comment}{// 2=RGB 24 bit}}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00028}00028   \mbox{\hyperlink{build_2doxygen_2liblodepng_2lodepng_8cpp_aeb8588ff6ad7dae8c5322b1520aa5687}{LodePNG\_encode}}(\&encoder, \&buffer, \&bufferSize, pixelBuffer, im-\/>\mbox{\hyperlink{structgd_image_struct_ad20ac3fc24af0eece29dc69ad7137161}{sx}}, im-\/>\mbox{\hyperlink{structgd_image_struct_a9e20b782d97fb6f571ab4b578962060e}{sy}});}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00029}00029   \textcolor{comment}{// write bufferSize bytes from buffer into outFile}}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00030}00030   fwrite(buffer,1,bufferSize,\mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a9af8a34a1d63fa9ed984b7cdd97daee1}{outFile}});}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00031}00031   \mbox{\hyperlink{build_2doxygen_2liblodepng_2lodepng_8cpp_a7269f380122edb94715d5e2e87eab835}{LodePNG\_Encoder\_cleanup}}(\&encoder);}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00032}00032   free(buffer);}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00033}00033   free(pixelBuffer);}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00034}00034 \}}
\DoxyCodeLine{\Hypertarget{build_2doxygen_2libmscgen_2gd__lodepng_8c_source_l00035}00035 }

\end{DoxyCode}
