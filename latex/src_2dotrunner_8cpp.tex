\hypertarget{src_2dotrunner_8cpp}{}\doxysection{doxygen/src/dotrunner.cpp File Reference}
\label{src_2dotrunner_8cpp}\index{doxygen/src/dotrunner.cpp@{doxygen/src/dotrunner.cpp}}
{\ttfamily \#include $<$cassert$>$}\newline
{\ttfamily \#include $<$cmath$>$}\newline
{\ttfamily \#include \char`\"{}dotrunner.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}util.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}portable.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}dot.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}message.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}config.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}dir.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}doxygen.\+h\char`\"{}}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{src_2dotrunner_8cpp_a11984900bb9b207c7496404c65c40115}{MAX\+\_\+\+LATEX\+\_\+\+GRAPH\+\_\+\+INCH}}~150
\item 
\#define \mbox{\hyperlink{src_2dotrunner_8cpp_aea20ab8f782b45746f1e20f5d0b565e6}{MAX\+\_\+\+LATEX\+\_\+\+GRAPH\+\_\+\+SIZE}}~(\mbox{\hyperlink{src_2dotrunner_8cpp_a11984900bb9b207c7496404c65c40115}{MAX\+\_\+\+LATEX\+\_\+\+GRAPH\+\_\+\+INCH}} $\ast$ 72)
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{src_2dotrunner_8cpp_a651ad97ecc3800fb7d2590c6cf0c0f6a}{check\+Png\+Result}} (const \mbox{\hyperlink{class_q_c_string}{QCString}} \&img\+Name)
\item 
static bool \mbox{\hyperlink{src_2dotrunner_8cpp_af2aa6035c4917cd2d139f59850c5a008}{reset\+PDFSize}} (const int width, const int height, const \mbox{\hyperlink{class_q_c_string}{QCString}} \&base)
\item 
\mbox{\hyperlink{class_q_c_string}{QCString}} \mbox{\hyperlink{src_2dotrunner_8cpp_a5cba77d157c52ffaef77df9fb2782230}{get\+Base\+Name\+Of\+Output}} (const \mbox{\hyperlink{class_q_c_string}{QCString}} \&output)
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{src_2dotrunner_8cpp_a11984900bb9b207c7496404c65c40115}\label{src_2dotrunner_8cpp_a11984900bb9b207c7496404c65c40115}} 
\index{dotrunner.cpp@{dotrunner.cpp}!MAX\_LATEX\_GRAPH\_INCH@{MAX\_LATEX\_GRAPH\_INCH}}
\index{MAX\_LATEX\_GRAPH\_INCH@{MAX\_LATEX\_GRAPH\_INCH}!dotrunner.cpp@{dotrunner.cpp}}
\doxysubsubsection{\texorpdfstring{MAX\_LATEX\_GRAPH\_INCH}{MAX\_LATEX\_GRAPH\_INCH}}
{\footnotesize\ttfamily \#define MAX\+\_\+\+LATEX\+\_\+\+GRAPH\+\_\+\+INCH~150}



Definition at line \mbox{\hyperlink{src_2dotrunner_8cpp_source_l00031}{31}} of file \mbox{\hyperlink{src_2dotrunner_8cpp_source}{dotrunner.\+cpp}}.

\mbox{\Hypertarget{src_2dotrunner_8cpp_aea20ab8f782b45746f1e20f5d0b565e6}\label{src_2dotrunner_8cpp_aea20ab8f782b45746f1e20f5d0b565e6}} 
\index{dotrunner.cpp@{dotrunner.cpp}!MAX\_LATEX\_GRAPH\_SIZE@{MAX\_LATEX\_GRAPH\_SIZE}}
\index{MAX\_LATEX\_GRAPH\_SIZE@{MAX\_LATEX\_GRAPH\_SIZE}!dotrunner.cpp@{dotrunner.cpp}}
\doxysubsubsection{\texorpdfstring{MAX\_LATEX\_GRAPH\_SIZE}{MAX\_LATEX\_GRAPH\_SIZE}}
{\footnotesize\ttfamily \#define MAX\+\_\+\+LATEX\+\_\+\+GRAPH\+\_\+\+SIZE~(\mbox{\hyperlink{src_2dotrunner_8cpp_a11984900bb9b207c7496404c65c40115}{MAX\+\_\+\+LATEX\+\_\+\+GRAPH\+\_\+\+INCH}} $\ast$ 72)}



Definition at line \mbox{\hyperlink{src_2dotrunner_8cpp_source_l00032}{32}} of file \mbox{\hyperlink{src_2dotrunner_8cpp_source}{dotrunner.\+cpp}}.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{src_2dotrunner_8cpp_a651ad97ecc3800fb7d2590c6cf0c0f6a}\label{src_2dotrunner_8cpp_a651ad97ecc3800fb7d2590c6cf0c0f6a}} 
\index{dotrunner.cpp@{dotrunner.cpp}!checkPngResult@{checkPngResult}}
\index{checkPngResult@{checkPngResult}!dotrunner.cpp@{dotrunner.cpp}}
\doxysubsubsection{\texorpdfstring{checkPngResult()}{checkPngResult()}}
{\footnotesize\ttfamily static void check\+Png\+Result (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_q_c_string}{QCString}} \&}]{img\+Name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line \mbox{\hyperlink{src_2dotrunner_8cpp_source_l00038}{38}} of file \mbox{\hyperlink{src_2dotrunner_8cpp_source}{dotrunner.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00039 \{}
\DoxyCodeLine{00040   FILE *\mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a26bd95fde4dbe225dd861231581fc268}{f}} = \mbox{\hyperlink{namespace_portable_a4dbb08c3de409bd1a73be3da6d93ac57}{Portable::fopen}}(imgName,\textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{00041   \textcolor{keywordflow}{if} (\mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a26bd95fde4dbe225dd861231581fc268}{f}})}
\DoxyCodeLine{00042   \{}
\DoxyCodeLine{00043     \textcolor{keywordtype}{char} \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_ac5c5967f62e5c3601479be651a8ed76c}{data}}[4];}
\DoxyCodeLine{00044     \textcolor{keywordflow}{if} (fread(\mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_ac5c5967f62e5c3601479be651a8ed76c}{data}},1,4,\mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a26bd95fde4dbe225dd861231581fc268}{f}})==4)}
\DoxyCodeLine{00045     \{}
\DoxyCodeLine{00046       \textcolor{keywordflow}{if} (!(\mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_ac5c5967f62e5c3601479be651a8ed76c}{data}}[1]==\textcolor{charliteral}{'P'} \&\& \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_ac5c5967f62e5c3601479be651a8ed76c}{data}}[2]==\textcolor{charliteral}{'N'} \&\& \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_ac5c5967f62e5c3601479be651a8ed76c}{data}}[3]==\textcolor{charliteral}{'G'}))}
\DoxyCodeLine{00047       \{}
\DoxyCodeLine{00048         \mbox{\hyperlink{build_2doxygen_2src_2message_8cpp_aede5746344fdce99647541101eaa7f06}{err}}(\textcolor{stringliteral}{"{}Image '\%s' produced by dot is not a valid PNG!\(\backslash\)n"{}}}
\DoxyCodeLine{00049           \textcolor{stringliteral}{"{}You should either select a different format "{}}}
\DoxyCodeLine{00050           \textcolor{stringliteral}{"{}(DOT\_IMAGE\_FORMAT in the config file) or install a more "{}}}
\DoxyCodeLine{00051           \textcolor{stringliteral}{"{}recent version of graphviz (1.7+)\(\backslash\)n"{}},\mbox{\hyperlink{build_2doxygen_2src_2qcstring_8h_a9851ebb5ae2f65b4d2b1d08421edbfd2}{qPrint}}(imgName)}
\DoxyCodeLine{00052         );}
\DoxyCodeLine{00053       \}}
\DoxyCodeLine{00054     \}}
\DoxyCodeLine{00055     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00056     \{}
\DoxyCodeLine{00057       \mbox{\hyperlink{build_2doxygen_2src_2message_8cpp_aede5746344fdce99647541101eaa7f06}{err}}(\textcolor{stringliteral}{"{}Could not read image '\%s' generated by dot!\(\backslash\)n"{}},\mbox{\hyperlink{build_2doxygen_2src_2qcstring_8h_a9851ebb5ae2f65b4d2b1d08421edbfd2}{qPrint}}(imgName));}
\DoxyCodeLine{00058     \}}
\DoxyCodeLine{00059     \mbox{\hyperlink{namespace_portable_af099fa6239b4961887192d8eadfd2a44}{fclose}}(\mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a26bd95fde4dbe225dd861231581fc268}{f}});}
\DoxyCodeLine{00060   \}}
\DoxyCodeLine{00061   \textcolor{keywordflow}{else}}
\DoxyCodeLine{00062   \{}
\DoxyCodeLine{00063     \mbox{\hyperlink{build_2doxygen_2src_2message_8cpp_aede5746344fdce99647541101eaa7f06}{err}}(\textcolor{stringliteral}{"{}Could not open image '\%s' generated by dot!\(\backslash\)n"{}},\mbox{\hyperlink{build_2doxygen_2src_2qcstring_8h_a9851ebb5ae2f65b4d2b1d08421edbfd2}{qPrint}}(imgName));}
\DoxyCodeLine{00064   \}}
\DoxyCodeLine{00065 \}}

\end{DoxyCode}


References \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_ac5c5967f62e5c3601479be651a8ed76c}{data}}, \mbox{\hyperlink{build_2doxygen_2src_2message_8cpp_aede5746344fdce99647541101eaa7f06}{err()}}, \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a26bd95fde4dbe225dd861231581fc268}{f}}, \mbox{\hyperlink{namespace_portable_af099fa6239b4961887192d8eadfd2a44}{Portable\+::fclose()}}, \mbox{\hyperlink{namespace_portable_a4dbb08c3de409bd1a73be3da6d93ac57}{Portable\+::fopen()}}, and \mbox{\hyperlink{build_2doxygen_2src_2qcstring_8h_a9851ebb5ae2f65b4d2b1d08421edbfd2}{q\+Print()}}.

\mbox{\Hypertarget{src_2dotrunner_8cpp_a5cba77d157c52ffaef77df9fb2782230}\label{src_2dotrunner_8cpp_a5cba77d157c52ffaef77df9fb2782230}} 
\index{dotrunner.cpp@{dotrunner.cpp}!getBaseNameOfOutput@{getBaseNameOfOutput}}
\index{getBaseNameOfOutput@{getBaseNameOfOutput}!dotrunner.cpp@{dotrunner.cpp}}
\doxysubsubsection{\texorpdfstring{getBaseNameOfOutput()}{getBaseNameOfOutput()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_q_c_string}{QCString}} get\+Base\+Name\+Of\+Output (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_q_c_string}{QCString}} \&}]{output }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{src_2dotrunner_8cpp_source_l00170}{170}} of file \mbox{\hyperlink{src_2dotrunner_8cpp_source}{dotrunner.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00171 \{}
\DoxyCodeLine{00172   \textcolor{keywordtype}{int} index = output.\mbox{\hyperlink{class_q_c_string_ab47a6435c16d61d04fb448f1080b4e26}{findRev}}(\textcolor{charliteral}{'.'});}
\DoxyCodeLine{00173   \textcolor{keywordflow}{if} (index < 0) \textcolor{keywordflow}{return} output;}
\DoxyCodeLine{00174   \textcolor{keywordflow}{return} output.\mbox{\hyperlink{class_q_c_string_aecf8b66312c4e97333219cc344c11a4f}{left}}(index);}
\DoxyCodeLine{00175 \}}

\end{DoxyCode}


References \mbox{\hyperlink{class_q_c_string_ab47a6435c16d61d04fb448f1080b4e26}{QCString\+::find\+Rev()}}, and \mbox{\hyperlink{class_q_c_string_aecf8b66312c4e97333219cc344c11a4f}{QCString\+::left()}}.

\mbox{\Hypertarget{src_2dotrunner_8cpp_af2aa6035c4917cd2d139f59850c5a008}\label{src_2dotrunner_8cpp_af2aa6035c4917cd2d139f59850c5a008}} 
\index{dotrunner.cpp@{dotrunner.cpp}!resetPDFSize@{resetPDFSize}}
\index{resetPDFSize@{resetPDFSize}!dotrunner.cpp@{dotrunner.cpp}}
\doxysubsubsection{\texorpdfstring{resetPDFSize()}{resetPDFSize()}}
{\footnotesize\ttfamily static bool reset\+PDFSize (\begin{DoxyParamCaption}\item[{const int}]{width,  }\item[{const int}]{height,  }\item[{const \mbox{\hyperlink{class_q_c_string}{QCString}} \&}]{base }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line \mbox{\hyperlink{src_2dotrunner_8cpp_source_l00067}{67}} of file \mbox{\hyperlink{src_2dotrunner_8cpp_source}{dotrunner.\+cpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00068 \{}
\DoxyCodeLine{00069   \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_ab316628fa3d58332c1756353c49316c1}{std::string}} tmpName   = base.\mbox{\hyperlink{class_q_c_string_a875e9ad762554ef12f3ed69b015bb245}{str}}()+\textcolor{stringliteral}{"{}.tmp"{}};}
\DoxyCodeLine{00070   \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_ab316628fa3d58332c1756353c49316c1}{std::string}} patchFile = base.\mbox{\hyperlink{class_q_c_string_a875e9ad762554ef12f3ed69b015bb245}{str}}()+\textcolor{stringliteral}{"{}.dot"{}};}
\DoxyCodeLine{00071   \mbox{\hyperlink{class_dir}{Dir}} thisDir;}
\DoxyCodeLine{00072   \textcolor{keywordflow}{if} (!thisDir.\mbox{\hyperlink{class_dir_ab14881c67dae32902aa709517177e5ce}{rename}}(patchFile,tmpName))}
\DoxyCodeLine{00073   \{}
\DoxyCodeLine{00074     \mbox{\hyperlink{build_2doxygen_2src_2message_8cpp_aede5746344fdce99647541101eaa7f06}{err}}(\textcolor{stringliteral}{"{}Failed to rename file \%s to \%s!\(\backslash\)n"{}},\mbox{\hyperlink{build_2doxygen_2src_2qcstring_8h_a9851ebb5ae2f65b4d2b1d08421edbfd2}{qPrint}}(patchFile),\mbox{\hyperlink{build_2doxygen_2src_2qcstring_8h_a9851ebb5ae2f65b4d2b1d08421edbfd2}{qPrint}}(tmpName));}
\DoxyCodeLine{00075     \textcolor{keywordflow}{return} \mbox{\hyperlink{build_2doxygen_2src_2qcstring_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}};}
\DoxyCodeLine{00076   \}}
\DoxyCodeLine{00077   \mbox{\hyperlink{namespaceghc_1_1filesystem_ac5ce4cc34ef910b06b64f6110c866e2e}{std::ifstream}} fi(tmpName,std::ifstream::in);}
\DoxyCodeLine{00078   \mbox{\hyperlink{namespaceghc_1_1filesystem_a5a9df37f9ba2cf3b2dabb4a221b71b09}{std::ofstream}} t(patchFile,\mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a48bc11919b2752df9d14ce89557cfb25}{std::ofstream::out}} | std::ofstream::binary);}
\DoxyCodeLine{00079   \textcolor{keywordflow}{if} (!fi.is\_open())}
\DoxyCodeLine{00080   \{}
\DoxyCodeLine{00081     \mbox{\hyperlink{build_2doxygen_2src_2message_8cpp_aede5746344fdce99647541101eaa7f06}{err}}(\textcolor{stringliteral}{"{}problem opening file \%s for patching!\(\backslash\)n"{}},\mbox{\hyperlink{build_2doxygen_2src_2qcstring_8h_a9851ebb5ae2f65b4d2b1d08421edbfd2}{qPrint}}(tmpName));}
\DoxyCodeLine{00082     thisDir.\mbox{\hyperlink{class_dir_ab14881c67dae32902aa709517177e5ce}{rename}}(tmpName,patchFile);}
\DoxyCodeLine{00083     \textcolor{keywordflow}{return} \mbox{\hyperlink{build_2doxygen_2src_2qcstring_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}};}
\DoxyCodeLine{00084   \}}
\DoxyCodeLine{00085   \textcolor{keywordflow}{if} (!t.is\_open())}
\DoxyCodeLine{00086   \{}
\DoxyCodeLine{00087     \mbox{\hyperlink{build_2doxygen_2src_2message_8cpp_aede5746344fdce99647541101eaa7f06}{err}}(\textcolor{stringliteral}{"{}problem opening file \%s for patching!\(\backslash\)n"{}},\mbox{\hyperlink{build_2doxygen_2src_2qcstring_8h_a9851ebb5ae2f65b4d2b1d08421edbfd2}{qPrint}}(patchFile));}
\DoxyCodeLine{00088     thisDir.\mbox{\hyperlink{class_dir_ab14881c67dae32902aa709517177e5ce}{rename}}(tmpName,patchFile);}
\DoxyCodeLine{00089     \textcolor{keywordflow}{return} \mbox{\hyperlink{build_2doxygen_2src_2qcstring_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}};}
\DoxyCodeLine{00090   \}}
\DoxyCodeLine{00091   \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_ab316628fa3d58332c1756353c49316c1}{std::string}} line;}
\DoxyCodeLine{00092   \textcolor{keywordflow}{while} (getline(fi,line)) \textcolor{comment}{// foreach line}}
\DoxyCodeLine{00093   \{}
\DoxyCodeLine{00094     \textcolor{keywordflow}{if} (line.find(\textcolor{stringliteral}{"{}LATEX\_PDF\_SIZE"{}}) != std::string::npos)}
\DoxyCodeLine{00095     \{}
\DoxyCodeLine{00096       \textcolor{keywordtype}{double} scale = (width > height ? width : height)/\textcolor{keywordtype}{double}(\mbox{\hyperlink{src_2dotrunner_8cpp_a11984900bb9b207c7496404c65c40115}{MAX\_LATEX\_GRAPH\_INCH}});}
\DoxyCodeLine{00097       t << \textcolor{stringliteral}{"{}  size=\(\backslash\)"{}"{}}<<width/scale << \textcolor{stringliteral}{"{},"{}} <<height/scale << \textcolor{stringliteral}{"{}\(\backslash\)"{};\(\backslash\)n"{}};}
\DoxyCodeLine{00098     \}}
\DoxyCodeLine{00099     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00100       t << line << \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00101   \}}
\DoxyCodeLine{00102   fi.close();}
\DoxyCodeLine{00103   t.close();}
\DoxyCodeLine{00104   \textcolor{comment}{// remove temporary file}}
\DoxyCodeLine{00105   thisDir.\mbox{\hyperlink{class_dir_a5a64060f8e1731e8f00da7e8f7051e4b}{remove}}(tmpName);}
\DoxyCodeLine{00106   \textcolor{keywordflow}{return} \mbox{\hyperlink{build_2doxygen_2src_2qcstring_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}};}
\DoxyCodeLine{00107 \}}

\end{DoxyCode}


References \mbox{\hyperlink{build_2doxygen_2src_2message_8cpp_aede5746344fdce99647541101eaa7f06}{err()}}, \mbox{\hyperlink{build_2doxygen_2src_2qcstring_8h_aa93f0eb578d23995850d61f7d61c55c1}{FALSE}}, \mbox{\hyperlink{src_2dotrunner_8cpp_a11984900bb9b207c7496404c65c40115}{MAX\+\_\+\+LATEX\+\_\+\+GRAPH\+\_\+\+INCH}}, \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_a48bc11919b2752df9d14ce89557cfb25}{out}}, \mbox{\hyperlink{build_2doxygen_2src_2qcstring_8h_a9851ebb5ae2f65b4d2b1d08421edbfd2}{q\+Print()}}, \mbox{\hyperlink{class_dir_a5a64060f8e1731e8f00da7e8f7051e4b}{Dir\+::remove()}}, \mbox{\hyperlink{class_dir_ab14881c67dae32902aa709517177e5ce}{Dir\+::rename()}}, \mbox{\hyperlink{class_q_c_string_a875e9ad762554ef12f3ed69b015bb245}{QCString\+::str()}}, \mbox{\hyperlink{build_2doxygen_2libmscgen_2gd_8h_ab316628fa3d58332c1756353c49316c1}{string}}, and \mbox{\hyperlink{build_2doxygen_2src_2qcstring_8h_aa8cecfc5c5c054d2875c03e77b7be15d}{TRUE}}.

